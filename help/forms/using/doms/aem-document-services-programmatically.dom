<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="Using AEM Document Services Programmatically" name="jcr:title" /> 
  <meta content="content_type:reference;products:SG_EXPERIENCEMANAGER/6.4/FORMS;topic_tags:document_services" name="cq:tags" /> 
  <meta content="mix:versionable;cq:ReplicationStatus" name="jcr:mixinTypes" /> 
  <meta content="2014-04-16T11:24:08.748-0400" name="jcr:created" /> 
  <meta content="vishgupt" name="acrolinxLastCheckedBy" /> 
  <meta content="Learn how to use Document Services APIs to Digitally sign, encrypt, and generate PDF documents." name="seoDescription" /> 
  <meta content="1104" name="acrolinxSentences" /> 
  <meta content="2018-04-24T06:36:16.748-0400" name="cq:lastReplicated" /> 
  <meta content="2018-04-24T06:36:16.658-0400" name="publishExternalDate" /> 
  <meta content="2016-05-31T06:33:22.885-0400" name="acrolinxDate" /> 
  <meta content="c40f59d2-89f1-4912-9807-6cdb7423404a" name="jcr:uuid" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="16908" name="acrolinxWords" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="f09e2456-5256-4dd4-9356-6462ebdd03c7" name="jcr:predecessors" /> 
  <meta content="2015-09-23T06:32:53.486-0400" name="lastPublishQADate" /> 
  <meta content="khsingh" name="cq:lastReplicatedBy" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/forms/using/aem-document-services-programmatically.html" name="publishExternalURL" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="not_checked" name="acrolinxStatus" /> 
  <meta content="http://checkstyle.corp.adobe.com:8031/output/en/aem_document_services_programmatically_admin_5e12de0b318c6865_1956_report.xml" name="acrolinxReportURL" /> 
  <meta content="AEM Document Services programmatically" name="navTitle" /> 
  <meta content="2018-04-26T04:21:45.300-0400" name="locHandOffDate" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/FORMS" name="primaryProductTag" /> 
  <meta content="2018-04-24T06:36:16.658-0400" name="lastPublishExternalDate" /> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="2016-04-20T09:28:45.666-0400" name="firstPublishExternalDate" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="2018-08-28T06:28:46.406-0400" name="cq:lastModified" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="2018-04-24T06:36:16.658-0400" name="topicBrowsingSortDate" /> 
  <meta content="khsingh@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="red" name="acrolinxPageStatus" /> 
  <meta content="/content/help/en/experience-manager/6-4/forms/morehelp/document_services;/content/help/en/experience-manager/6-4/forms/morehelp/document_services" name="moreHelpPaths" /> 
  <meta content="khsingh" name="cq:lastModifiedBy" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="asgupta" name="jcr:createdBy" /> 
  <meta content="" name="jcr:baseVersion" /> 
 </head> 
 <body> 
  <p>Client classes required to build Maven Projects using AEM Document Services are available in the <a href="/content/help/en/aem-forms/kb/aem-forms-releases" target="_blank">AEM Forms Client SDK</a> jar. For information around maven projects, see <a href="../../sites/developing/using/ht-projects-maven.md" target="_blank">how to build your AEM project using Maven</a>.</p> 
  <note> 
   <p>Before using the DocAssurance service APIs, <a href="/forms/using/configuring-document-services" target="_blank">configure the DocAssurance service</a>.</p> 
  </note> 
  <h2>DocAssurance Service</h2> 
  <p>The DocAssurance service includes the following services:</p> 
  <ul> 
   <li>Signature service</li> 
   <li>Encryption service</li> 
   <li>Reader Extension service</li> 
  </ul> 
  <p>You can perform the following operations using the DocAssurance service:</p> 
  <ul> 
   <li><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-26">Add Invisible Signature</a><br /> </li> 
   <li><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-28">Add Signature Field</a></li> 
   <li><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-79751480">Apply Document TimeStamp</a><br /> </li> 
   <li><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-41">Get Signature</a></li> 
   <li><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-29">Get Signature Field List</a></li> 
   <li><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-30">Modify Signature Fields</a><br /> </li> 
   <li><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-43" style="font-size: 14px;">Secure Document</a><br /> </li> 
   <li><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-31">Get Credential Usage Rights</a><br /> </li> 
   <li><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-44">Get Document Usage Rights</a><br /> </li> 
   <li><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-45">Remove Usage Rights</a></li> 
   <li><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-33">Verify Digital Signatures</a></li> 
   <li><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-34">Verify Multiple Digital Signatures</a></li> 
   <li><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-35">Remove Digital Signatures</a><br /> </li> 
   <li><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-40">Get Certifying Signature Field</a></li> 
   <li><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-42">Get PDF Encryption Type</a></li> 
   <li><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-38" style="font-size: 14px;">Remove Password Encryption</a><br /> </li> 
   <li><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-39">Remove Certificate Encryption</a></li> 
  </ul> 
  <note> 
   <p>All these services use Document object as 
    <g class="gr_ gr_3 gr-alert gr_gramm gr_run_anim Grammar only-ins doubleReplace replaceWithoutSep" data-gr-id="3">
      input 
    </g> parameter for which the Javadoc can be found at the URL <a href="https://helpx.adobe.com/experience-manager/6-3/forms/javadocs/index.html" target="_blank">https://helpx.adobe.com/experience-manager/6-3/forms/javadocs/index.html</a> </p> 
  </note> 
  <h4>Adding an invisible signature field</h4> 
  <p>Digital signatures appear in signature fields, which are form fields that contain a graphical representation of the signature. Signature fields can be visible or invisible. Signers can use a pre-existing signature field, or a signature field can be programmatically added. In either case, the signature field must exist before a PDF document can be signed. You can programmatically add a signature field by using the Signature service Java API or Signature web service API. You can add more than one signature field to a PDF document. However, each signature field name must be unique.</p> 
  <p><strong>Syntax</strong>:<span class="code">addInvisibleSignatureField(Document inDoc, String signatureFieldName, FieldMDPOptionSpec fieldMDPOptionsSpec, PDFSeedValueOptionSpec seedValueOptionsSpec, UnlockOptions unlockOptions)</span></p> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">inDoc</span></td> 
     <td>Document object containing PDF.<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">signatureFieldName</span><br /> </td> 
     <td>The name of the signature field. This parameter is mandatory and cannot have null as a value.<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">fieldMDPOptionsSpec</span></td> 
     <td>A <span class="code">FieldMDPOptionSpec</span> object that specifies the PDF document fields that are locked after the signature field is signed. This parameter is optional and can accept null value.</td> 
    </tr> 
    <tr> 
     <td><span class="code">seedValueOptionsSpec</span></td> 
     <td>A <span class="code">SeedValueOptions</span> object that specifies the various seed values for the field. T This parameter is optional and can accept null value.<span class="acrolinxCursorMarker"></span></td> 
    </tr> 
    <tr> 
     <td><span class="code">unlockOptions</span></td> 
     <td>Includes the parameters require to unlock an encrypted file, This parameter is required only for the encrypted files.</td> 
    </tr> 
   </tbody> 
  </table> 
  <p>Here is a sample Java code that adds an invisible signature field to a PDF document.</p> 
  <codeblock gutter="true" lineWrap="true" class="syntax js">
    /*************************************************************************!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;ADOBE&amp;nbsp;CONFIDENTIAL!!discoiqbr!!&amp;nbsp;*&amp;nbsp;___________________!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;Copyright&amp;nbsp;2014&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;All&amp;nbsp;Rights&amp;nbsp;Reserved.!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;NOTICE:&amp;nbsp;&amp;nbsp;All&amp;nbsp;information&amp;nbsp;contained&amp;nbsp;herein&amp;nbsp;is,&amp;nbsp;and&amp;nbsp;remains!!discoiqbr!!&amp;nbsp;*&amp;nbsp;the&amp;nbsp;property&amp;nbsp;of&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its&amp;nbsp;suppliers,!!discoiqbr!!&amp;nbsp;*&amp;nbsp;if&amp;nbsp;any.&amp;nbsp;&amp;nbsp;The&amp;nbsp;intellectual&amp;nbsp;and&amp;nbsp;technical&amp;nbsp;concepts&amp;nbsp;contained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;herein&amp;nbsp;are&amp;nbsp;proprietary&amp;nbsp;to&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its!!discoiqbr!!&amp;nbsp;*&amp;nbsp;suppliers&amp;nbsp;and&amp;nbsp;are&amp;nbsp;protected&amp;nbsp;by&amp;nbsp;trade&amp;nbsp;secret&amp;nbsp;or&amp;nbsp;copyright&amp;nbsp;law.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Dissemination&amp;nbsp;of&amp;nbsp;this&amp;nbsp;information&amp;nbsp;or&amp;nbsp;reproduction&amp;nbsp;of&amp;nbsp;this&amp;nbsp;material!!discoiqbr!!&amp;nbsp;*&amp;nbsp;is&amp;nbsp;strictly&amp;nbsp;forbidden&amp;nbsp;unless&amp;nbsp;prior&amp;nbsp;written&amp;nbsp;permission&amp;nbsp;is&amp;nbsp;obtained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;from&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated.!!discoiqbr!!&amp;nbsp;**************************************************************************/!!discoiqbr!!package&amp;nbsp;com.adobe.docassurance.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!import&amp;nbsp;java.io.IOException;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.PositionRectangle;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.DuplicateSignatureFieldException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.InvalidArgumentException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.PDFOperationException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.PermissionsException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.SignaturesBaseException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.UnlockOptions;!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Digital&amp;nbsp;signatures&amp;nbsp;appear&amp;nbsp;in&amp;nbsp;signature&amp;nbsp;fields,&amp;nbsp;which&amp;nbsp;are&amp;nbsp;form&amp;nbsp;fields&amp;nbsp;that&amp;nbsp;contain&amp;nbsp;a&amp;nbsp;graphic&amp;nbsp;representation&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Signature&amp;nbsp;fields&amp;nbsp;can&amp;nbsp;be&amp;nbsp;visible&amp;nbsp;or&amp;nbsp;invisible.&amp;nbsp;Signers&amp;nbsp;can&amp;nbsp;use&amp;nbsp;a&amp;nbsp;pre&amp;nbsp;existing&amp;nbsp;signature&amp;nbsp;field,&amp;nbsp;or&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;can&amp;nbsp;be&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;programmatically&amp;nbsp;added.&amp;nbsp;In&amp;nbsp;either&amp;nbsp;case,&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;must&amp;nbsp;exist&amp;nbsp;before&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;can&amp;nbsp;be&amp;nbsp;signed.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;You&amp;nbsp;can&amp;nbsp;programmatically&amp;nbsp;add&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;by&amp;nbsp;using&amp;nbsp;the&amp;nbsp;Signature&amp;nbsp;service&amp;nbsp;Java&amp;nbsp;API&amp;nbsp;or&amp;nbsp;Signature&amp;nbsp;web&amp;nbsp;service&amp;nbsp;API.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;You&amp;nbsp;can&amp;nbsp;add&amp;nbsp;more&amp;nbsp;than&amp;nbsp;one&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;to&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document;&amp;nbsp;however,&amp;nbsp;each&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;name&amp;nbsp;must&amp;nbsp;be&amp;nbsp;unique.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;The&amp;nbsp;following&amp;nbsp;Java&amp;nbsp;code&amp;nbsp;example&amp;nbsp;adds&amp;nbsp;an&amp;nbsp;invisible&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;named&amp;nbsp;SignatureField1&amp;nbsp;to&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document.!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!!!discoiqbr!!@Component!!discoiqbr!!@Service(value=AddInvisibleSignatureField.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;AddInvisibleSignatureField&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;inputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;an&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;disk!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;outputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;where&amp;nbsp;the&amp;nbsp;output&amp;nbsp;file&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;saved&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;SignaturesBaseException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;DuplicateSignatureFieldException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;PermissionsException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;PDFOperationException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;InvalidArgumentException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;DocAssuranceException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;public&amp;nbsp;void&amp;nbsp;addInvisibleSignatureField(String&amp;nbsp;inputFile,&amp;nbsp;String&amp;nbsp;outputFile)&amp;nbsp;throws&amp;nbsp;InvalidArgumentException,&amp;nbsp;PDFOperationException,&amp;nbsp;PermissionsException,&amp;nbsp;DuplicateSignatureFieldException,&amp;nbsp;SignaturesBaseException,&amp;nbsp;DocAssuranceException&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;inFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;outFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;outDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Specify&amp;nbsp;the&amp;nbsp;name&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;fieldName&amp;nbsp;=&amp;nbsp;"SignatureField1";!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;a&amp;nbsp;&amp;nbsp;PositionRectangle&amp;nbsp;object&amp;nbsp;that&amp;nbsp;specifies!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//the&amp;nbsp;signature&amp;nbsp;fields&amp;nbsp;location!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PositionRectangle&amp;nbsp;post&amp;nbsp;=&amp;nbsp;new&amp;nbsp;&amp;nbsp;PositionRectangle(193,47,133,12);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Specify&amp;nbsp;the&amp;nbsp;page&amp;nbsp;number&amp;nbsp;that&amp;nbsp;will&amp;nbsp;contain&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;java.lang.Integer&amp;nbsp;pageNum&amp;nbsp;=&amp;nbsp;new&amp;nbsp;java.lang.Integer(1);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Add&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;to&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;outDoc&amp;nbsp;=&amp;nbsp;docAssuranceService.addInvisibleSignatureField(!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fieldName,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;null,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;null,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;null);!!discoiqbr!!&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(Exception&amp;nbsp;e1)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;//&amp;nbsp;TODO&amp;nbsp;Auto-generated&amp;nbsp;catch&amp;nbsp;block!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;e1.printStackTrace();!!discoiqbr!!&amp;nbsp;&amp;nbsp;}&amp;nbsp;//&amp;nbsp;for&amp;nbsp;an&amp;nbsp;encrypted&amp;nbsp;PDF&amp;nbsp;input,&amp;nbsp;pass&amp;nbsp;unlock&amp;nbsp;options!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//save&amp;nbsp;the&amp;nbsp;outDoc!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;outDoc.copyToFile(outFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(IOException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;//&amp;nbsp;TODO&amp;nbsp;Auto-generated&amp;nbsp;catch&amp;nbsp;block!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;UnlockOptions&amp;nbsp;to&amp;nbsp;be&amp;nbsp;passed&amp;nbsp;to&amp;nbsp;addSignatureField()&amp;nbsp;API&amp;nbsp;to&amp;nbsp;add&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;in&amp;nbsp;an&amp;nbsp;encrypted&amp;nbsp;pdf&amp;nbsp;document.!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;private&amp;nbsp;UnlockOptions&amp;nbsp;getUnlockOptions(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;UnlockOptions&amp;nbsp;unlockOptions&amp;nbsp;=&amp;nbsp;new&amp;nbsp;UnlockOptions();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;Open&amp;nbsp;Password&amp;nbsp;for&amp;nbsp;password&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unlockOptions.setPassword("OpenPassword");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;Certificate&amp;nbsp;Encrypted&amp;nbsp;Document,&amp;nbsp;set&amp;nbsp;the&amp;nbsp;alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;uploaded&amp;nbsp;in&amp;nbsp;the&amp;nbsp;user's&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//and&amp;nbsp;corresponding&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;unlockOptions;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!} 
  </codeblock> 
  <p>You can also use <a href="https://en.wikipedia.org/wiki/CAdES_%28computing%29">CAdES </a>specification for signing documents. Use the following sample code to set up signing format to <a href="https://en.wikipedia.org/wiki/CAdES_%28computing%29">CAdES.</a></p> 
  <codeblock gutter="true" class="syntax java">
    SigningFormat&amp;nbsp;signingFormat&amp;nbsp;=&amp;nbsp;SigningFormat.CAdES;!!discoiqbr!!sigAppearence.setSigningFormat(signingFormat);!!discoiqbr!!signOptions.setSigAppearence(sigAppearence); 
  </codeblock> 
  <h4>Adding a signature field&amp;nbsp;</h4> 
  <p>You can programmatically add a signature field by using the Signature service Java API or Signature web service API. You can add multiple signature fields to a PDF document. However, each signature field name must be unique.</p> 
  <p><strong>Syntax</strong>: <code class="code">public Document addSignatureField(Document inDoc,
    <discoiqbr /> String signatureFieldName, 
    <discoiqbr /> Integer pageNo,
    <discoiqbr /> PositionRectangle positionRectangle,
    <discoiqbr /> FieldMDPOptionSpec fieldMDPOptionsSpec,
    <discoiqbr /> PDFSeedValueOptionSpec seedValueOptionsSpec, UnlockOptions unlockOptions)</code></p> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">inDoc</span></td> 
     <td>Document object containing PDF</td> 
    </tr> 
    <tr> 
     <td><span class="code">signatureFieldName</span></td> 
     <td>Name of the signature field. This parameter is mandatory and cannot accept a null value.</td> 
    </tr> 
    <tr> 
     <td><span class="code">pageNumber</span></td> 
     <td>The page number on which the signature field is added. Valid values are 1 to the number of pages contained within the document. This parameter is mandatory and cannot accept a null value.<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">positionRectangle</span></td> 
     <td>A <span class="code">PositionRectangle object</span> that specifies the position for the signature field. This parameter is mandatory and cannot accept a null value. If the specified rectangle does not lie at least partially on the crop box of the specified page, an <span class="code">InvalidArgumentException</span> is thrown. Also, neither the height or width of the specified rectangle can be 0 or negative. Lower left X or lower left Y coordinates can be 0 or greater but not negative, and are relative to the crop box of the page.</td> 
    </tr> 
    <tr> 
     <td><span class="code">fieldMDPOptionsSpec</span></td> 
     <td>A <span class="code">FieldMDPOptionSpec</span> object that specifies the PDF document fields that are locked after the signature field is signed. This is an optional parameter and can be null.</td> 
    </tr> 
    <tr> 
     <td><span class="code">seedValueOptionsSpec</span></td> 
     <td>A <span class="code">SeedValueOptions</span> object that specifies the various seed values for the field. This is an optional parameter and can be null.</td> 
    </tr> 
    <tr> 
     <td><span class="code">unlockOptions</span></td> 
     <td>Includes the parameters required to unlock an encrypted file. This parameter is required only for the encypted files.</td> 
    </tr> 
   </tbody> 
  </table> 
  <p>Here is a sample Java code that adds a signature field to a PDF document.</p> 
  <codeblock gutter="true" lineWrap="true" class="syntax java">
    /*************************************************************************!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!-------------------------------------------------------------!!discoiqbr!!*ADOBE&amp;nbsp;SYSTEMS&amp;nbsp;INCORPORATED!!discoiqbr!!*Copyright&amp;nbsp;2014&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated!!discoiqbr!!*All&amp;nbsp;Rights&amp;nbsp;Reserved.!!discoiqbr!!!!discoiqbr!!*NOTICE:&amp;nbsp;&amp;nbsp;Adobe&amp;nbsp;permits&amp;nbsp;you&amp;nbsp;to&amp;nbsp;use,&amp;nbsp;modify,&amp;nbsp;and&amp;nbsp;distribute&amp;nbsp;this&amp;nbsp;file&amp;nbsp;in&amp;nbsp;accordance&amp;nbsp;with&amp;nbsp;the&amp;nbsp;!!discoiqbr!!*terms&amp;nbsp;of&amp;nbsp;the&amp;nbsp;Adobe&amp;nbsp;license&amp;nbsp;agreement&amp;nbsp;accompanying&amp;nbsp;it.&amp;nbsp;&amp;nbsp;If&amp;nbsp;you&amp;nbsp;have&amp;nbsp;received&amp;nbsp;this&amp;nbsp;file&amp;nbsp;from&amp;nbsp;a&amp;nbsp;!!discoiqbr!!*source&amp;nbsp;other&amp;nbsp;than&amp;nbsp;Adobe,&amp;nbsp;then&amp;nbsp;your&amp;nbsp;use,&amp;nbsp;modification,&amp;nbsp;or&amp;nbsp;distribution&amp;nbsp;of&amp;nbsp;it&amp;nbsp;requires&amp;nbsp;the&amp;nbsp;prior&amp;nbsp;!!discoiqbr!!*written&amp;nbsp;permission&amp;nbsp;of&amp;nbsp;Adobe.!!discoiqbr!!-------------------------------------------------------------------------------------------------!!discoiqbr!!!!discoiqbr!!&amp;nbsp;**************************************************************************/!!discoiqbr!!package&amp;nbsp;com.adobe.docassurance.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!import&amp;nbsp;java.io.IOException;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.PositionRectangle;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.DuplicateSignatureFieldException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.InvalidArgumentException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.PDFOperationException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.PermissionsException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.SignaturesBaseException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.UnlockOptions;!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Digital&amp;nbsp;signatures&amp;nbsp;appear&amp;nbsp;in&amp;nbsp;signature&amp;nbsp;fields,&amp;nbsp;which&amp;nbsp;are&amp;nbsp;form&amp;nbsp;fields&amp;nbsp;that&amp;nbsp;contain&amp;nbsp;a&amp;nbsp;graphic&amp;nbsp;representation&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Signature&amp;nbsp;fields&amp;nbsp;can&amp;nbsp;be&amp;nbsp;visible&amp;nbsp;or&amp;nbsp;invisible.&amp;nbsp;Signers&amp;nbsp;can&amp;nbsp;use&amp;nbsp;a&amp;nbsp;pre&amp;nbsp;existing&amp;nbsp;signature&amp;nbsp;field,&amp;nbsp;or&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;can&amp;nbsp;be&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;programmatically&amp;nbsp;added.&amp;nbsp;In&amp;nbsp;either&amp;nbsp;case,&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;must&amp;nbsp;exist&amp;nbsp;before&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;can&amp;nbsp;be&amp;nbsp;signed.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;You&amp;nbsp;can&amp;nbsp;programmatically&amp;nbsp;add&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;by&amp;nbsp;using&amp;nbsp;the&amp;nbsp;Signature&amp;nbsp;service&amp;nbsp;Java&amp;nbsp;API&amp;nbsp;or&amp;nbsp;Signature&amp;nbsp;web&amp;nbsp;service&amp;nbsp;API.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;You&amp;nbsp;can&amp;nbsp;add&amp;nbsp;more&amp;nbsp;than&amp;nbsp;one&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;to&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document;&amp;nbsp;however,&amp;nbsp;each&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;name&amp;nbsp;must&amp;nbsp;be&amp;nbsp;unique.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;The&amp;nbsp;following&amp;nbsp;Java&amp;nbsp;code&amp;nbsp;example&amp;nbsp;adds&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;named&amp;nbsp;SignatureField1&amp;nbsp;to&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document.!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!!!discoiqbr!!@Component!!discoiqbr!!@Service(value=AddSignatureField.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;AddSignatureField&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;inputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;an&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;disk!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;outputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;where&amp;nbsp;the&amp;nbsp;output&amp;nbsp;file&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;saved&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;SignaturesBaseException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;DuplicateSignatureFieldException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;PermissionsException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;PDFOperationException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;InvalidArgumentException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;DocAssuranceException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;public&amp;nbsp;void&amp;nbsp;addSignatureField(String&amp;nbsp;inputFile,&amp;nbsp;String&amp;nbsp;outputFile)&amp;nbsp;throws&amp;nbsp;InvalidArgumentException,&amp;nbsp;PDFOperationException,&amp;nbsp;PermissionsException,&amp;nbsp;DuplicateSignatureFieldException,&amp;nbsp;SignaturesBaseException,&amp;nbsp;DocAssuranceException&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;inFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;outFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;outDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Specify&amp;nbsp;the&amp;nbsp;name&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;fieldName&amp;nbsp;=&amp;nbsp;"SignatureField1";!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;a&amp;nbsp;&amp;nbsp;PositionRectangle&amp;nbsp;object&amp;nbsp;that&amp;nbsp;specifies!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//the&amp;nbsp;signature&amp;nbsp;fields&amp;nbsp;location!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PositionRectangle&amp;nbsp;post&amp;nbsp;=&amp;nbsp;new&amp;nbsp;&amp;nbsp;PositionRectangle(193,47,133,12);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Specify&amp;nbsp;the&amp;nbsp;page&amp;nbsp;number&amp;nbsp;that&amp;nbsp;will&amp;nbsp;contain&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;java.lang.Integer&amp;nbsp;pageNum&amp;nbsp;=&amp;nbsp;new&amp;nbsp;java.lang.Integer(1);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Add&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;to&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;outDoc&amp;nbsp;=&amp;nbsp;docAssuranceService.addSignatureField(!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fieldName,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pageNum,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;post,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;null,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;null,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;null);!!discoiqbr!!&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(Exception&amp;nbsp;e1)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;//&amp;nbsp;TODO&amp;nbsp;Auto-generated&amp;nbsp;catch&amp;nbsp;block!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;e1.printStackTrace();!!discoiqbr!!&amp;nbsp;&amp;nbsp;}&amp;nbsp;//&amp;nbsp;for&amp;nbsp;an&amp;nbsp;encrypted&amp;nbsp;PDF&amp;nbsp;input,&amp;nbsp;pass&amp;nbsp;unlock&amp;nbsp;options!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//save&amp;nbsp;the&amp;nbsp;outDoc!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;outDoc.copyToFile(outFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(IOException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;//&amp;nbsp;TODO&amp;nbsp;Auto-generated&amp;nbsp;catch&amp;nbsp;block!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;UnlockOptions&amp;nbsp;to&amp;nbsp;be&amp;nbsp;passed&amp;nbsp;to&amp;nbsp;addSignatureField()&amp;nbsp;API&amp;nbsp;to&amp;nbsp;add&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;in&amp;nbsp;an&amp;nbsp;encrypted&amp;nbsp;pdf&amp;nbsp;document.!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;private&amp;nbsp;UnlockOptions&amp;nbsp;getUnlockOptions(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;UnlockOptions&amp;nbsp;unlockOptions&amp;nbsp;=&amp;nbsp;new&amp;nbsp;UnlockOptions();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;Open&amp;nbsp;Password&amp;nbsp;for&amp;nbsp;password&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unlockOptions.setPassword("OpenPassword");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;Certificate&amp;nbsp;Encrypted&amp;nbsp;Document,&amp;nbsp;set&amp;nbsp;the&amp;nbsp;alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;uploaded&amp;nbsp;in&amp;nbsp;the&amp;nbsp;user's&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//and&amp;nbsp;corresponding&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;unlockOptions;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!} 
  </codeblock> 
  <h4>Apply Document TimeStamp</h4> 
  <p>You can programmatically timestamp a document as per <a href="https://en.wikipedia.org/wiki/PAdES" target="_blank">PAdES 4</a> specifications. You can also use <a href="https://en.wikipedia.org/wiki/CAdES_%28computing%29">CAdES</a> specification for transaction related documents. </p> 
  <p><strong>Syntax</strong>: <span class="code">applyDocumentTimeStamp(Document doc, VerificationTime verificationTime, ValidationPreferences dssPrefs, ResourceResolver resourceResolver, UnlockOptions unlockOptions)</span></p> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">doc</span><br /> </td> 
     <td>Document object containing PDF.<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">VerificationTime</span></td> 
     <td>The time at which the signature should be validated<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">ValidationPreferences</span> </td> 
     <td>Preferences to control validation configurations.</td> 
    </tr> 
    <tr> 
     <td><span class="code">ResourceResolver</span></td> 
     <td>Resource resolver to the granite trust store.</td> 
    </tr> 
    <tr> 
     <td><span class="code">UnlockOptions</span></td> 
     <td>Includes the parameters require to unlock an encrypted file. This is required only if the file is encrypted.</td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following code samples adds a time stamp to a document as per <a href="https://en.wikipedia.org/wiki/PAdES">PAdES 4</a>.</p> 
  <codeblock gutter="true" class="syntax java">
    package&amp;nbsp;com.adobe.signatures.test;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;javax.jcr.Session;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!import&amp;nbsp;org.apache.sling.api.resource.ResourceResolver;!!discoiqbr!!import&amp;nbsp;org.apache.sling.jcr.api.SlingRepository;!!discoiqbr!!import&amp;nbsp;org.apache.sling.jcr.resource.JcrResourceResolverFactory;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.VerificationTime;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.ValidationPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.ValidationPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.common.RevocationCheckStyle;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.CRLPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.CRLPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.OCSPPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PKIPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PKIPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PathValidationPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PathValidationPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.TSPPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.TSPPreferencesImpl;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Component!!discoiqbr!!&amp;nbsp;@Service(value=Test.class)!!discoiqbr!!&amp;nbsp;public&amp;nbsp;class&amp;nbsp;Test&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;SlingRepository&amp;nbsp;slingRepository;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;JcrResourceResolverFactory&amp;nbsp;jcrResourceResolverFactory&amp;nbsp;;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;inputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;the&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;disk!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;outputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;the&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;where&amp;nbsp;the&amp;nbsp;output&amp;nbsp;needs&amp;nbsp;to&amp;nbsp;be&amp;nbsp;stored!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;Exception!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;void&amp;nbsp;TimeStamp(String&amp;nbsp;inputFile,&amp;nbsp;String&amp;nbsp;outputFile)&amp;nbsp;throws&amp;nbsp;Exception{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;inFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;outFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Document&amp;nbsp;outDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Session&amp;nbsp;adminSession&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ResourceResolver&amp;nbsp;resourceResolver&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**&amp;nbsp;resourceResolver&amp;nbsp;with&amp;nbsp;admin&amp;nbsp;privileges&amp;nbsp;to&amp;nbsp;be&amp;nbsp;passed&amp;nbsp;to&amp;nbsp;SignatureServiceAPI&amp;nbsp;and&amp;nbsp;Reader&amp;nbsp;Extensions!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;the&amp;nbsp;resource&amp;nbsp;resolver&amp;nbsp;for&amp;nbsp;signature&amp;nbsp;options&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;corresponding&amp;nbsp;to&amp;nbsp;the&amp;nbsp;user&amp;nbsp;who&amp;nbsp;has&amp;nbsp;the&amp;nbsp;signing&amp;nbsp;certificate&amp;nbsp;in&amp;nbsp;his&amp;nbsp;granite&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;the&amp;nbsp;resource&amp;nbsp;resolver&amp;nbsp;for&amp;nbsp;signature&amp;nbsp;options&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;corresponding&amp;nbsp;to&amp;nbsp;the&amp;nbsp;user&amp;nbsp;who&amp;nbsp;has&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;for&amp;nbsp;reader&amp;nbsp;extension&amp;nbsp;in&amp;nbsp;his&amp;nbsp;granite&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;here&amp;nbsp;we&amp;nbsp;are&amp;nbsp;using&amp;nbsp;the&amp;nbsp;same&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;adminSession&amp;nbsp;=&amp;nbsp;slingRepository.loginAdministrative(null);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver&amp;nbsp;=&amp;nbsp;jcrResourceResolverFactory.getResourceResolver(adminSession);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;VerificationTime&amp;nbsp;verificationTime&amp;nbsp;=&amp;nbsp;getVerificationTimeForPades();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ValidationPreferences&amp;nbsp;dssPrefs&amp;nbsp;=&amp;nbsp;getValidationPreferences();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//retrieve&amp;nbsp;specifications&amp;nbsp;for&amp;nbsp;each&amp;nbsp;of&amp;nbsp;the&amp;nbsp;services,&amp;nbsp;you&amp;nbsp;may&amp;nbsp;pass&amp;nbsp;null&amp;nbsp;if&amp;nbsp;you&amp;nbsp;don't&amp;nbsp;want&amp;nbsp;to&amp;nbsp;use&amp;nbsp;that&amp;nbsp;service!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;encrypted&amp;nbsp;document&amp;nbsp;pass&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;-&amp;nbsp;see&amp;nbsp;the&amp;nbsp;method&amp;nbsp;getUnlockOptions()&amp;nbsp;below!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outDoc&amp;nbsp;=&amp;nbsp;docAssuranceService.applyDocumentTimeStamp(inDoc,&amp;nbsp;verificationTime,&amp;nbsp;dssPrefs,&amp;nbsp;resourceResolver,&amp;nbsp;null);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;finally{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;always&amp;nbsp;close&amp;nbsp;the&amp;nbsp;PDFDocument&amp;nbsp;object&amp;nbsp;after&amp;nbsp;your&amp;nbsp;processing&amp;nbsp;is&amp;nbsp;done.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(inDoc&amp;nbsp;!=&amp;nbsp;null){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc.close();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(adminSession&amp;nbsp;!=&amp;nbsp;null&amp;nbsp;&amp;&amp;&amp;nbsp;adminSession.isLive()){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(resourceResolver&amp;nbsp;!=&amp;nbsp;null){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver.close();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;adminSession.logout();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outDoc.copyToFile(outFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;public&amp;nbsp;&amp;nbsp;VerificationTime&amp;nbsp;getVerificationTimeForPades(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;VerificationTime.SECURE_TIME_ELSE_CURRENT_TIME;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;ValidationPreferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;static&amp;nbsp;ValidationPreferences&amp;nbsp;getValidationPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ValidationPreferencesImpl&amp;nbsp;prefs&amp;nbsp;=&amp;nbsp;new&amp;nbsp;ValidationPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;prefs.setPKIPreferences(getPKIPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//set&amp;nbsp;the&amp;nbsp;unlock&amp;nbsp;options&amp;nbsp;for&amp;nbsp;processing&amp;nbsp;an&amp;nbsp;encrypted&amp;nbsp;pdf&amp;nbsp;document,&amp;nbsp;do&amp;nbsp;not&amp;nbsp;set&amp;nbsp;if&amp;nbsp;the&amp;nbsp;input&amp;nbsp;doc&amp;nbsp;is&amp;nbsp;unprotected!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;prefs;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;PKIPreferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;static&amp;nbsp;PKIPreferences&amp;nbsp;getPKIPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PKIPreferences&amp;nbsp;pkiPref&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PKIPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pkiPref.setCRLPreferences(getCRLPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pkiPref.setPathPreferences(getPathValidationPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pkiPref.setOCSPPreferences(getOCSPPref());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pkiPref.setTSPPreferences(getTspPref());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;pkiPref;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;CRL&amp;nbsp;Preferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;static&amp;nbsp;CRLPreferences&amp;nbsp;getCRLPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;CRLPreferencesImpl&amp;nbsp;crlPrefs&amp;nbsp;=&amp;nbsp;new&amp;nbsp;CRLPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;crlPrefs.setRevocationCheck(RevocationCheckStyle.BestEffort);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;crlPrefs.setGoOnline(true);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;crlPrefs;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;PathValidationPreferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;static&amp;nbsp;PathValidationPreferences&amp;nbsp;getPathValidationPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PathValidationPreferencesImpl&amp;nbsp;pathPref&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PathValidationPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pathPref.setDoValidation(true);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;pathPref;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;public&amp;nbsp;static&amp;nbsp;TSPPreferences&amp;nbsp;getTspPref(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;TSPPreferencesImpl&amp;nbsp;tspPrefs=new&amp;nbsp;TSPPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;char&amp;nbsp;pass[]=new&amp;nbsp;char[9];!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;tspPrefs.setTspServerURL("TSPPrefs_ServerURL");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;tspPrefs.setUsername("TSPPrefs_Username");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;tspPrefs.setPassword(pass);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;tspPrefs.setSize(10240);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;tspPrefs;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;static&amp;nbsp;OCSPPreferencesImpl&amp;nbsp;getOCSPPref(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;OCSPPreferencesImpl&amp;nbsp;ocsp&amp;nbsp;=&amp;nbsp;new&amp;nbsp;OCSPPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ocsp.setRevocationCheck(RevocationCheckStyle.BestEffort);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;ocsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!!!discoiqbr!!} 
  </codeblock> 
  <h4>Getting signature</h4> 
  <p>You can retrieve the names of all signature fields that are located in a PDF document that you want to sign or certify. If you are not sure of the signature field names located in a PDF document or to verify the names, then retrieve the names programmatically. The Signature service returns the fully qualified name of the signature field, such as <span class="code">form1[0].grantApplication[0].page1[0].SignatureField1[0]</span>.</p> 
  <p><strong>Syntax</strong>: <span class="code">getSignature(Document doc, String signatureFieldName, UnlockOptions unlockOptions)</span></p> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">doc</span><br /> </td> 
     <td>Document object containing PDF.<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">signatureFieldName</span></td> 
     <td>The name of the signature field that contains a signature. Specify the fully qualified name of the signature field. When using a PDF document that is based on an XFA form, then the partial name of the signature field can be used. For example, <span class="code">form1[0].#subform[1].SignatureField3[3]</span> can be specified as <span class="code">SignatureField3[3]</span>.</td> 
    </tr> 
    <tr> 
     <td><span class="code">UnlockOptions</span></td> 
     <td>Includes the parameters require to unlock an encrypted file. This is required only if the file is encrypted.</td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code example retrieves the signature information for the given signature field located in a PDF document.</p> 
  <codeblock gutter="true" lineWrap="true" class="syntax js">
    /*************************************************************************!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;ADOBE&amp;nbsp;CONFIDENTIAL!!discoiqbr!!&amp;nbsp;*&amp;nbsp;___________________!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;Copyright&amp;nbsp;2014&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;All&amp;nbsp;Rights&amp;nbsp;Reserved.!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;NOTICE:&amp;nbsp;&amp;nbsp;All&amp;nbsp;information&amp;nbsp;contained&amp;nbsp;herein&amp;nbsp;is,&amp;nbsp;and&amp;nbsp;remains!!discoiqbr!!&amp;nbsp;*&amp;nbsp;the&amp;nbsp;property&amp;nbsp;of&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its&amp;nbsp;suppliers,!!discoiqbr!!&amp;nbsp;*&amp;nbsp;if&amp;nbsp;any.&amp;nbsp;&amp;nbsp;The&amp;nbsp;intellectual&amp;nbsp;and&amp;nbsp;technical&amp;nbsp;concepts&amp;nbsp;contained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;herein&amp;nbsp;are&amp;nbsp;proprietary&amp;nbsp;to&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its!!discoiqbr!!&amp;nbsp;*&amp;nbsp;suppliers&amp;nbsp;and&amp;nbsp;are&amp;nbsp;protected&amp;nbsp;by&amp;nbsp;trade&amp;nbsp;secret&amp;nbsp;or&amp;nbsp;copyright&amp;nbsp;law.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Dissemination&amp;nbsp;of&amp;nbsp;this&amp;nbsp;information&amp;nbsp;or&amp;nbsp;reproduction&amp;nbsp;of&amp;nbsp;this&amp;nbsp;material!!discoiqbr!!&amp;nbsp;*&amp;nbsp;is&amp;nbsp;strictly&amp;nbsp;forbidden&amp;nbsp;unless&amp;nbsp;prior&amp;nbsp;written&amp;nbsp;permission&amp;nbsp;is&amp;nbsp;obtained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;from&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated.!!discoiqbr!!&amp;nbsp;**************************************************************************/!!discoiqbr!!package&amp;nbsp;com.adobe.docassurance.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!import&amp;nbsp;java.util.Iterator;!!discoiqbr!!import&amp;nbsp;java.util.List;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.PDFSignatureField;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.DuplicateSignatureFieldException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.InvalidArgumentException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.PDFOperationException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.PermissionsException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.SignaturesBaseException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.UnlockOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.PDFSignature;!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;*&amp;nbsp;You&amp;nbsp;can&amp;nbsp;retrieve&amp;nbsp;the&amp;nbsp;names&amp;nbsp;of&amp;nbsp;all&amp;nbsp;signature&amp;nbsp;fields&amp;nbsp;that&amp;nbsp;are&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;that&amp;nbsp;you&amp;nbsp;want&amp;nbsp;to&amp;nbsp;sign&amp;nbsp;or&amp;nbsp;certify.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;If&amp;nbsp;you&amp;nbsp;are&amp;nbsp;unsure&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;names&amp;nbsp;that&amp;nbsp;are&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;or&amp;nbsp;you&amp;nbsp;want&amp;nbsp;to&amp;nbsp;verify&amp;nbsp;the&amp;nbsp;names,&amp;nbsp;you&amp;nbsp;can!!discoiqbr!!&amp;nbsp;*&amp;nbsp;programmatically&amp;nbsp;retrieve&amp;nbsp;them.&amp;nbsp;The&amp;nbsp;Signature&amp;nbsp;service&amp;nbsp;returns&amp;nbsp;the&amp;nbsp;fully&amp;nbsp;qualified&amp;nbsp;name&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field,&amp;nbsp;such&amp;nbsp;as&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;form1[0].grantApplication[0].page1[0].SignatureField1[0].!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;The&amp;nbsp;following&amp;nbsp;Java&amp;nbsp;code&amp;nbsp;example&amp;nbsp;retrieves&amp;nbsp;the&amp;nbsp;Signature&amp;nbsp;Info&amp;nbsp;for&amp;nbsp;the&amp;nbsp;given&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document.!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!!!discoiqbr!!@Component!!discoiqbr!!@Service(value=GetSignature.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;GetSignature&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;inputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;the&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;disk!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;SignaturesBaseException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;DuplicateSignatureFieldException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;PermissionsException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;PDFOperationException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;InvalidArgumentException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;public&amp;nbsp;void&amp;nbsp;GetSignature(String&amp;nbsp;inputFile)&amp;nbsp;throws&amp;nbsp;Exception&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;inFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Retrieve&amp;nbsp;signature&amp;nbsp;data&amp;nbsp;for&amp;nbsp;a&amp;nbsp;given&amp;nbsp;signature&amp;nbsp;field.!!discoiqbr!!&amp;nbsp;&amp;nbsp;//for&amp;nbsp;encrypted&amp;nbsp;document&amp;nbsp;pass&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;-&amp;nbsp;see&amp;nbsp;the&amp;nbsp;method&amp;nbsp;getUnlockOptions()&amp;nbsp;below!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PDFSignature&amp;nbsp;pdfSignature&amp;nbsp;=&amp;nbsp;docAssuranceService.getSignature(inDoc,"fieldName",null);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;for&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;UnlockOptions&amp;nbsp;getUnlockOptions(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;UnlockOptions&amp;nbsp;unlockOptions&amp;nbsp;=&amp;nbsp;new&amp;nbsp;UnlockOptions();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;Open&amp;nbsp;Password&amp;nbsp;for&amp;nbsp;password&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unlockOptions.setPassword("OpenPassword");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;Certificate&amp;nbsp;Encrypted&amp;nbsp;Document,&amp;nbsp;set&amp;nbsp;the&amp;nbsp;alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;uploaded&amp;nbsp;in&amp;nbsp;the&amp;nbsp;user's&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//and&amp;nbsp;corresponding&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;unlockOptions;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!}!!discoiqbr!! 
  </codeblock> 
  <h4>Getting signature field list&amp;nbsp;</h4> 
  <p>You can retrieve the names of all signature fields that are located in a PDF document that you want to sign or certify. If you are unsure of the signature field names in a PDF document, you can programmatically retrieve and verify them. The Signature service returns the fully qualified name of the signature field, such as <span class="code">form1[0].grantApplication[0].page1[0].SignatureField1[0]</span>.</p> 
  <p><strong>Syntax</strong>: <span class="code">public List &amp;lt;PDFSignatureField&amp;gt; getSignatureFieldList (Document inDoc, UnlockOptions unlockOptions)</span></p> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">inDoc</span></td> 
     <td>Document object containing PDF</td> 
    </tr> 
    <tr> 
     <td><span class="code">unlockOptions</span></td> 
     <td>Includes the parameters require to unlock an encrypted file. This is required only if the file is encrypted.</td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code example retrieves the names of signature fields located in a PDF document.</p> 
  <codeblock gutter="true" lineWrap="true" class="syntax java">
    /*************************************************************************!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!-------------------------------------------------------------!!discoiqbr!!*ADOBE&amp;nbsp;SYSTEMS&amp;nbsp;INCORPORATED!!discoiqbr!!*Copyright&amp;nbsp;2014&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated!!discoiqbr!!*All&amp;nbsp;Rights&amp;nbsp;Reserved.!!discoiqbr!!!!discoiqbr!!*NOTICE:&amp;nbsp;&amp;nbsp;Adobe&amp;nbsp;permits&amp;nbsp;you&amp;nbsp;to&amp;nbsp;use,&amp;nbsp;modify,&amp;nbsp;and&amp;nbsp;distribute&amp;nbsp;this&amp;nbsp;file&amp;nbsp;in&amp;nbsp;accordance&amp;nbsp;with&amp;nbsp;the&amp;nbsp;!!discoiqbr!!*terms&amp;nbsp;of&amp;nbsp;the&amp;nbsp;Adobe&amp;nbsp;license&amp;nbsp;agreement&amp;nbsp;accompanying&amp;nbsp;it.&amp;nbsp;&amp;nbsp;If&amp;nbsp;you&amp;nbsp;have&amp;nbsp;received&amp;nbsp;this&amp;nbsp;file&amp;nbsp;from&amp;nbsp;a&amp;nbsp;!!discoiqbr!!*source&amp;nbsp;other&amp;nbsp;than&amp;nbsp;Adobe,&amp;nbsp;then&amp;nbsp;your&amp;nbsp;use,&amp;nbsp;modification,&amp;nbsp;or&amp;nbsp;distribution&amp;nbsp;of&amp;nbsp;it&amp;nbsp;requires&amp;nbsp;the&amp;nbsp;prior&amp;nbsp;!!discoiqbr!!*written&amp;nbsp;permission&amp;nbsp;of&amp;nbsp;Adobe.!!discoiqbr!!-------------------------------------------------------------------------------------------------!!discoiqbr!!**************************************************************************/!!discoiqbr!!package&amp;nbsp;com.adobe.docassurance.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!import&amp;nbsp;java.util.Iterator;!!discoiqbr!!import&amp;nbsp;java.util.List;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.PDFSignatureField;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.DuplicateSignatureFieldException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.InvalidArgumentException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.PDFOperationException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.PermissionsException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.SignaturesBaseException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.UnlockOptions;!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;*&amp;nbsp;You&amp;nbsp;can&amp;nbsp;retrieve&amp;nbsp;the&amp;nbsp;names&amp;nbsp;of&amp;nbsp;all&amp;nbsp;signature&amp;nbsp;fields&amp;nbsp;that&amp;nbsp;are&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;that&amp;nbsp;you&amp;nbsp;want&amp;nbsp;to&amp;nbsp;sign&amp;nbsp;or&amp;nbsp;certify.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;If&amp;nbsp;you&amp;nbsp;are&amp;nbsp;unsure&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;names&amp;nbsp;that&amp;nbsp;are&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;or&amp;nbsp;you&amp;nbsp;want&amp;nbsp;to&amp;nbsp;verify&amp;nbsp;the&amp;nbsp;names,&amp;nbsp;you&amp;nbsp;can!!discoiqbr!!&amp;nbsp;*&amp;nbsp;programmatically&amp;nbsp;retrieve&amp;nbsp;them.&amp;nbsp;The&amp;nbsp;Signature&amp;nbsp;service&amp;nbsp;returns&amp;nbsp;the&amp;nbsp;fully&amp;nbsp;qualified&amp;nbsp;name&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field,&amp;nbsp;such&amp;nbsp;as&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;form1[0].grantApplication[0].page1[0].SignatureField1[0].!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;The&amp;nbsp;following&amp;nbsp;Java&amp;nbsp;code&amp;nbsp;example&amp;nbsp;retrieves&amp;nbsp;the&amp;nbsp;names&amp;nbsp;of&amp;nbsp;signature&amp;nbsp;fields&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document.!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!!!discoiqbr!!@Component!!discoiqbr!!@Service(value=GetSignatureFields.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;GetSignatureFields&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;inputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;the&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;disk!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;SignaturesBaseException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;DuplicateSignatureFieldException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;PermissionsException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;PDFOperationException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;InvalidArgumentException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;public&amp;nbsp;void&amp;nbsp;getSignatureFields(String&amp;nbsp;inputFile)&amp;nbsp;throws&amp;nbsp;Exception&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;inFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Retrieve&amp;nbsp;the&amp;nbsp;name&amp;nbsp;of&amp;nbsp;the&amp;nbsp;document's&amp;nbsp;signature&amp;nbsp;fields!!discoiqbr!!&amp;nbsp;&amp;nbsp;//for&amp;nbsp;encrypted&amp;nbsp;document&amp;nbsp;pass&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;-&amp;nbsp;see&amp;nbsp;the&amp;nbsp;method&amp;nbsp;getUnlockOptions()&amp;nbsp;below!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;List&amp;nbsp;fieldNames&amp;nbsp;=&amp;nbsp;docAssuranceService.getSignatureFieldList(inDoc,null);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Obtain&amp;nbsp;the&amp;nbsp;name&amp;nbsp;of&amp;nbsp;each&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;by&amp;nbsp;iterating&amp;nbsp;through&amp;nbsp;the&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//List&amp;nbsp;object!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Iterator&amp;nbsp;iter&amp;nbsp;=&amp;nbsp;fieldNames.iterator();&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int&amp;nbsp;i&amp;nbsp;=&amp;nbsp;0&amp;nbsp;;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;fieldName="";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;while&amp;nbsp;(iter.hasNext())&amp;nbsp;{&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PDFSignatureField&amp;nbsp;signatureField&amp;nbsp;=&amp;nbsp;(PDFSignatureField)iter.next();&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fieldName&amp;nbsp;=&amp;nbsp;signatureField.getName();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println("The&amp;nbsp;name&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;is&amp;nbsp;"&amp;nbsp;+fieldName);&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;i++;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;for&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;UnlockOptions&amp;nbsp;getUnlockOptions(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;UnlockOptions&amp;nbsp;unlockOptions&amp;nbsp;=&amp;nbsp;new&amp;nbsp;UnlockOptions();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;Open&amp;nbsp;Password&amp;nbsp;for&amp;nbsp;password&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unlockOptions.setPassword("OpenPassword");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;Certificate&amp;nbsp;Encrypted&amp;nbsp;Document,&amp;nbsp;set&amp;nbsp;the&amp;nbsp;alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;uploaded&amp;nbsp;in&amp;nbsp;the&amp;nbsp;user's&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//and&amp;nbsp;corresponding&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;unlockOptions;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!} 
  </codeblock> 
  <h4>Modifying signature fields&amp;nbsp;</h4> 
  <p>You can modify signature fields that are located in a PDF document. Modifying a signature field involves manipulating its signature field lock dictionary values or seed value dictionary values.</p> 
  <p>A field lock dictionary specifies a list of fields that are locked when the signature field is signed. A locked field prevents users from editing the field. A seed value dictionary contains constraining information that is used at the time the signature is applied. For example, you can change permissions that control the actions that can occur without invalidating a signature.</p> 
  <p>By modifying an existing signature field, you can edit the PDF document to reflect changing business requirements. For example, a new business requirement requires locking all document fields after the document is signed.</p> 
  <p><strong>Syntax</strong>: <span class="code">public Document modifySignatureField(Document inDoc, String signatureFieldName, PDFSignatureFieldProperties pdfSignatureFieldProperties, UnlockOptions unlockOptions)</span></p> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">inDoc</span></td> 
     <td>Document object containing PDF</td> 
    </tr> 
    <tr> 
     <td><span class="code">signatureFieldName</span></td> 
     <td>The name of the signature field. This parameter is mandatory and cannot accept a null value.<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">pdfSignatureFieldProperties</span></td> 
     <td>Object that specifies information about the <span class="code">PDFSeedValueOptionSpec</span> and <span class="code">FieldMDPOptionSpec</span> values of the signature field.</td> 
    </tr> 
    <tr> 
     <td><span class="code">unlockOptions</span></td> 
     <td>Includes the parameters require to unlock an encrypted file. This is required only if the file is encrypted.</td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code sample modifies a signature field by locking all fields in the form when a signature is applied to the signature field. </p> 
  <codeblock gutter="true" lineWrap="true" class="syntax java">
    /*************************************************************************!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!!!discoiqbr!!-------------------------------------------------------------!!discoiqbr!!*ADOBE&amp;nbsp;SYSTEMS&amp;nbsp;INCORPORATED!!discoiqbr!!*Copyright&amp;nbsp;2014&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated!!discoiqbr!!*All&amp;nbsp;Rights&amp;nbsp;Reserved.!!discoiqbr!!!!discoiqbr!!*NOTICE:&amp;nbsp;&amp;nbsp;Adobe&amp;nbsp;permits&amp;nbsp;you&amp;nbsp;to&amp;nbsp;use,&amp;nbsp;modify,&amp;nbsp;and&amp;nbsp;distribute&amp;nbsp;this&amp;nbsp;file&amp;nbsp;in&amp;nbsp;accordance&amp;nbsp;with&amp;nbsp;the&amp;nbsp;!!discoiqbr!!*terms&amp;nbsp;of&amp;nbsp;the&amp;nbsp;Adobe&amp;nbsp;license&amp;nbsp;agreement&amp;nbsp;accompanying&amp;nbsp;it.&amp;nbsp;&amp;nbsp;If&amp;nbsp;you&amp;nbsp;have&amp;nbsp;received&amp;nbsp;this&amp;nbsp;file&amp;nbsp;from&amp;nbsp;a&amp;nbsp;!!discoiqbr!!*source&amp;nbsp;other&amp;nbsp;than&amp;nbsp;Adobe,&amp;nbsp;then&amp;nbsp;your&amp;nbsp;use,&amp;nbsp;modification,&amp;nbsp;or&amp;nbsp;distribution&amp;nbsp;of&amp;nbsp;it&amp;nbsp;requires&amp;nbsp;the&amp;nbsp;prior&amp;nbsp;!!discoiqbr!!*written&amp;nbsp;permission&amp;nbsp;of&amp;nbsp;Adobe.!!discoiqbr!!-------------------------------------------------------------------------------------------------!!discoiqbr!!!!discoiqbr!!&amp;nbsp;**************************************************************************/!!discoiqbr!!package&amp;nbsp;com.adobe.docassurance.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.FieldMDPAction;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.FieldMDPOptionSpec;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.MDPPermissions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.PDFSeedValueOptionSpec;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.PDFSignatureFieldProperties;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.PositionRectangle;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.DuplicateSignatureFieldException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.InvalidArgumentException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.MissingSignatureFieldException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.PDFOperationException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.PermissionsException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.SignatureFieldSignedException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.SignaturesBaseException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.SignaturesOtherException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.UnlockOptions;!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;*&amp;nbsp;You&amp;nbsp;can&amp;nbsp;modify&amp;nbsp;signature&amp;nbsp;fields&amp;nbsp;that&amp;nbsp;are&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;by&amp;nbsp;using&amp;nbsp;the&amp;nbsp;Java&amp;nbsp;API&amp;nbsp;and&amp;nbsp;web&amp;nbsp;service&amp;nbsp;API.&amp;nbsp;Modifying&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;involves!!discoiqbr!!&amp;nbsp;*&amp;nbsp;manipulating&amp;nbsp;its&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;lock&amp;nbsp;dictionary&amp;nbsp;values&amp;nbsp;or&amp;nbsp;seed&amp;nbsp;value&amp;nbsp;dictionary&amp;nbsp;values.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;A&amp;nbsp;field&amp;nbsp;lock&amp;nbsp;dictionary&amp;nbsp;specifies&amp;nbsp;a&amp;nbsp;list&amp;nbsp;of&amp;nbsp;fields&amp;nbsp;that&amp;nbsp;are&amp;nbsp;locked&amp;nbsp;when&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;is&amp;nbsp;signed.&amp;nbsp;A&amp;nbsp;locked&amp;nbsp;field&amp;nbsp;prevents&amp;nbsp;users&amp;nbsp;from&amp;nbsp;making&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;changes&amp;nbsp;to&amp;nbsp;the&amp;nbsp;field.&amp;nbsp;A&amp;nbsp;seed&amp;nbsp;value&amp;nbsp;dictionary&amp;nbsp;contains&amp;nbsp;constraining&amp;nbsp;information&amp;nbsp;that&amp;nbsp;is&amp;nbsp;used&amp;nbsp;at&amp;nbsp;the&amp;nbsp;time&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;is&amp;nbsp;applied.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;For&amp;nbsp;example,&amp;nbsp;you&amp;nbsp;can&amp;nbsp;change&amp;nbsp;permissions&amp;nbsp;that&amp;nbsp;control&amp;nbsp;the&amp;nbsp;actions&amp;nbsp;that&amp;nbsp;can&amp;nbsp;occur&amp;nbsp;without&amp;nbsp;invalidating&amp;nbsp;a&amp;nbsp;signature.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;By&amp;nbsp;modifying&amp;nbsp;an&amp;nbsp;existing&amp;nbsp;signature&amp;nbsp;field,&amp;nbsp;you&amp;nbsp;can&amp;nbsp;make&amp;nbsp;changes&amp;nbsp;to&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;to&amp;nbsp;reflect&amp;nbsp;changing&amp;nbsp;business&amp;nbsp;requirements.&amp;nbsp;For&amp;nbsp;example,&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;a&amp;nbsp;new&amp;nbsp;business&amp;nbsp;requirement&amp;nbsp;may&amp;nbsp;require&amp;nbsp;locking&amp;nbsp;all&amp;nbsp;document&amp;nbsp;fields&amp;nbsp;after&amp;nbsp;the&amp;nbsp;document&amp;nbsp;is&amp;nbsp;signed.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;This&amp;nbsp;section&amp;nbsp;explains&amp;nbsp;how&amp;nbsp;to&amp;nbsp;modify&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;by&amp;nbsp;amending&amp;nbsp;both&amp;nbsp;field&amp;nbsp;lock&amp;nbsp;dictionary&amp;nbsp;and&amp;nbsp;seed&amp;nbsp;value&amp;nbsp;dictionary&amp;nbsp;values.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Changes&amp;nbsp;made&amp;nbsp;to&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;lock&amp;nbsp;dictionary&amp;nbsp;result&amp;nbsp;in&amp;nbsp;all&amp;nbsp;fields&amp;nbsp;in&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;being&amp;nbsp;locked&amp;nbsp;when&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;is&amp;nbsp;signed.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Changes&amp;nbsp;made&amp;nbsp;to&amp;nbsp;the&amp;nbsp;seed&amp;nbsp;value&amp;nbsp;dictionary&amp;nbsp;prohibit&amp;nbsp;specific&amp;nbsp;types&amp;nbsp;of&amp;nbsp;changes&amp;nbsp;to&amp;nbsp;the&amp;nbsp;document.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;The&amp;nbsp;following&amp;nbsp;Java&amp;nbsp;code&amp;nbsp;example&amp;nbsp;modifies&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;named&amp;nbsp;SignatureField1&amp;nbsp;by&amp;nbsp;locking&amp;nbsp;all&amp;nbsp;fields&amp;nbsp;in&amp;nbsp;the&amp;nbsp;form&amp;nbsp;when&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;is&amp;nbsp;applied&amp;nbsp;to&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;and&amp;nbsp;ensuring&amp;nbsp;that&amp;nbsp;no&amp;nbsp;changes&amp;nbsp;are&amp;nbsp;allowed.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;After&amp;nbsp;the&amp;nbsp;Signature&amp;nbsp;service&amp;nbsp;returns&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;that&amp;nbsp;contains&amp;nbsp;the&amp;nbsp;modified&amp;nbsp;signature&amp;nbsp;field!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!!!discoiqbr!!@Component!!discoiqbr!!@Service(value=ModifySignatureField.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;ModifySignatureField&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;inputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;the&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;disk!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;outFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;where&amp;nbsp;the&amp;nbsp;output&amp;nbsp;file&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;saved!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;public&amp;nbsp;void&amp;nbsp;modifySignatureField(String&amp;nbsp;inputFile,&amp;nbsp;String&amp;nbsp;outFile)&amp;nbsp;throws&amp;nbsp;Exception&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;inFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inFile);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Specify&amp;nbsp;the&amp;nbsp;name&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;fieldName&amp;nbsp;=&amp;nbsp;"SignatureField1";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;a&amp;nbsp;PDFSignatureFieldProperties!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PDFSignatureFieldProperties&amp;nbsp;fieldProperties&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PDFSignatureFieldProperties();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;a&amp;nbsp;PDFSeedValueOptionSpec&amp;nbsp;object&amp;nbsp;that&amp;nbsp;stores&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//seed&amp;nbsp;value&amp;nbsp;dictionary&amp;nbsp;information.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PDFSeedValueOptionSpec&amp;nbsp;seedOptionsSpec&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PDFSeedValueOptionSpec();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Disallow&amp;nbsp;changes&amp;nbsp;to&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document.&amp;nbsp;Any&amp;nbsp;change&amp;nbsp;to&amp;nbsp;the&amp;nbsp;document&amp;nbsp;invalidates&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//the&amp;nbsp;signature!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;seedOptionsSpec.setMdpValue(MDPPermissions.NoChanges);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;a&amp;nbsp;FieldMDPOptionSpec&amp;nbsp;object&amp;nbsp;that&amp;nbsp;stores&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//signature&amp;nbsp;field&amp;nbsp;lock&amp;nbsp;dictionary&amp;nbsp;information.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FieldMDPOptionSpec&amp;nbsp;fieldMDPOptionsSpec&amp;nbsp;=&amp;nbsp;new&amp;nbsp;FieldMDPOptionSpec();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Lock&amp;nbsp;all&amp;nbsp;fields&amp;nbsp;in&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fieldMDPOptionsSpec.setAction(FieldMDPAction.ALL);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Set&amp;nbsp;dictionary&amp;nbsp;information!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fieldProperties.setSeedValue(seedOptionsSpec);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fieldProperties.setFieldMDP(fieldMDPOptionsSpec);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Modify&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;encrypted&amp;nbsp;document&amp;nbsp;pass&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;-&amp;nbsp;see&amp;nbsp;the&amp;nbsp;method&amp;nbsp;getUnlockOptions()&amp;nbsp;below!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Document&amp;nbsp;modSignatureField&amp;nbsp;=&amp;nbsp;&amp;nbsp;docAssuranceService.modifySignatureField(inDoc,fieldName,fieldProperties,null);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//save&amp;nbsp;the&amp;nbsp;modSignatureField!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;modSignatureField.copyToFile(new&amp;nbsp;File(outFile));!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;for&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;UnlockOptions&amp;nbsp;getUnlockOptions(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;UnlockOptions&amp;nbsp;unlockOptions&amp;nbsp;=&amp;nbsp;new&amp;nbsp;UnlockOptions();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;Open&amp;nbsp;Password&amp;nbsp;for&amp;nbsp;password&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unlockOptions.setPassword("OpenPassword");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;Certificate&amp;nbsp;Encrypted&amp;nbsp;Document,&amp;nbsp;set&amp;nbsp;the&amp;nbsp;alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;uploaded&amp;nbsp;in&amp;nbsp;the&amp;nbsp;user's&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//and&amp;nbsp;corresponding&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;unlockOptions;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!} 
  </codeblock> 
  <h4>Certifying PDF documents&amp;nbsp;</h4> 
  <p>You can secure a PDF document by certifying it with a particular type of signature called a certified signature. A certified signature is distinguished from a digital signature in these ways:</p> 
  <ul> 
   <li>It must be the first signature applied to the PDF document. In other words, when the certified signature is applied, other signature fields in the document must be unsigned. Only one certified signature is permitted in a PDF document. To sign and certify a PDF document, certify it before signing it. After you certify a PDF document, you can digitally sign additional signature fields.</li> 
   <li>The author or originator of the document can specify that the document can be modified in certain ways without invalidating the certified signature. For example, the document can permit filling in forms or commenting. If the author specifies that a certain modification is not permitted, Acrobat restricts users from modifying the document in that way. If such modifications are made, the certified signature is invalid. In addition, Acrobat issues a warning when a user opens the document. (With non-certified signatures, modifications are not prevented, and normal editing operations do not invalidate the original signature.)</li> 
   <li>At the time of signing, the document is scanned for specific types of content that could make the contents of a document ambiguous or misleading. For example, an annotation could obscure some text on a page that is important for understanding what is being certified. An explanation (legal attestation) can be provided about such content.</li> 
  </ul> 
  <div> 
   <strong>Syntax</strong>: 
   <code class="code">secureDocument(Document inDoc, EncryptionOptions encryptionOptions,
    <discoiqbr /> SignatureOptions signatureOptions, ReaderExtensionOptions readerExtensionOptions, UnlockOptions unlockOptions)</code> 
   <br /> 
  </div> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">inDoc</span><br /> </td> 
     <td>Document input PDF document<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">encryptionOptions</span><br /> </td> 
     <td>Includes the arguments required for Encrypting a PDF document<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">signatureOptions</span></td> 
     <td>Includes the options required for Signing/Certifying a PDF document</td> 
    </tr> 
    <tr> 
     <td><span class="code">readerExtensionOptions</span></td> 
     <td>Includes the options required for Reader Extending a PDF document</td> 
    </tr> 
    <tr> 
     <td><span class="code">unlockOptions</span></td> 
     <td>Includes the parameters require to unlock an encrypted file, This is required only if the file is encrypted.<br /> </td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following code sample certifies a PDF document that is based on a PDF file. </p> 
  <codeblock gutter="true" lineWrap="true" class="syntax java">
    /*************************************************************************!!discoiqbr!!!!discoiqbr!!-------------------------------------------------------------!!discoiqbr!!*ADOBE&amp;nbsp;SYSTEMS&amp;nbsp;INCORPORATED!!discoiqbr!!*Copyright&amp;nbsp;2014&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated!!discoiqbr!!*All&amp;nbsp;Rights&amp;nbsp;Reserved.!!discoiqbr!!!!discoiqbr!!*NOTICE:&amp;nbsp;&amp;nbsp;Adobe&amp;nbsp;permits&amp;nbsp;you&amp;nbsp;to&amp;nbsp;use,&amp;nbsp;modify,&amp;nbsp;and&amp;nbsp;distribute&amp;nbsp;this&amp;nbsp;file&amp;nbsp;in&amp;nbsp;accordance&amp;nbsp;with&amp;nbsp;the&amp;nbsp;!!discoiqbr!!*terms&amp;nbsp;of&amp;nbsp;the&amp;nbsp;Adobe&amp;nbsp;license&amp;nbsp;agreement&amp;nbsp;accompanying&amp;nbsp;it.&amp;nbsp;&amp;nbsp;If&amp;nbsp;you&amp;nbsp;have&amp;nbsp;received&amp;nbsp;this&amp;nbsp;file&amp;nbsp;from&amp;nbsp;a&amp;nbsp;!!discoiqbr!!*source&amp;nbsp;other&amp;nbsp;than&amp;nbsp;Adobe,&amp;nbsp;then&amp;nbsp;your&amp;nbsp;use,&amp;nbsp;modification,&amp;nbsp;or&amp;nbsp;distribution&amp;nbsp;of&amp;nbsp;it&amp;nbsp;requires&amp;nbsp;the&amp;nbsp;prior&amp;nbsp;!!discoiqbr!!*written&amp;nbsp;permission&amp;nbsp;of&amp;nbsp;Adobe.!!discoiqbr!!-------------------------------------------------------------------------------------------------!!discoiqbr!!!!discoiqbr!!&amp;nbsp;**************************************************************************/!!discoiqbr!!package&amp;nbsp;com.adobe.docassurance.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!import&amp;nbsp;java.io.IOException;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;javax.jcr.RepositoryException;!!discoiqbr!!import&amp;nbsp;javax.jcr.Session;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!import&amp;nbsp;org.apache.sling.api.resource.ResourceResolver;!!discoiqbr!!import&amp;nbsp;org.apache.sling.jcr.api.SlingRepository;!!discoiqbr!!import&amp;nbsp;org.apache.sling.jcr.resource.JcrResourceResolverFactory;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceServiceOperationTypes;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.SignatureOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.MDPPermissions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.InvalidArgumentException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.CredentialContext;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.DSSPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.DSSPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.PDFSignatureAppearenceOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.PDFSignatureAppearenceOptions.PDFSignatureAppearanceType;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.PDFSignatureAppearenceOptions.TextDirection;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.UnlockOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.common.HashAlgorithm;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.common.RevocationCheckStyle;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.CRLPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.CRLPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.GeneralPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PKIPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PKIPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PathValidationPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PathValidationPreferencesImpl;!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;*&amp;nbsp;You&amp;nbsp;can&amp;nbsp;secure&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;by&amp;nbsp;certifying&amp;nbsp;it&amp;nbsp;with&amp;nbsp;a&amp;nbsp;particular&amp;nbsp;type&amp;nbsp;of&amp;nbsp;signature&amp;nbsp;called&amp;nbsp;a&amp;nbsp;certified&amp;nbsp;signature.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;A&amp;nbsp;certified&amp;nbsp;signature&amp;nbsp;is&amp;nbsp;distinguished&amp;nbsp;from&amp;nbsp;a&amp;nbsp;digital&amp;nbsp;signature&amp;nbsp;in&amp;nbsp;these&amp;nbsp;ways:!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;It&amp;nbsp;must&amp;nbsp;be&amp;nbsp;the&amp;nbsp;first&amp;nbsp;signature&amp;nbsp;applied&amp;nbsp;to&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document;&amp;nbsp;that&amp;nbsp;is,&amp;nbsp;at&amp;nbsp;the&amp;nbsp;time&amp;nbsp;the&amp;nbsp;certified&amp;nbsp;signature&amp;nbsp;is&amp;nbsp;applied,&amp;nbsp;any&amp;nbsp;other&amp;nbsp;signature&amp;nbsp;fields&amp;nbsp;in&amp;nbsp;the&amp;nbsp;document&amp;nbsp;must&amp;nbsp;be&amp;nbsp;unsigned.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Only&amp;nbsp;one&amp;nbsp;certified&amp;nbsp;signature&amp;nbsp;is&amp;nbsp;permitted&amp;nbsp;in&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document.&amp;nbsp;If&amp;nbsp;you&amp;nbsp;want&amp;nbsp;to&amp;nbsp;sign&amp;nbsp;and&amp;nbsp;certify&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document,&amp;nbsp;you&amp;nbsp;must&amp;nbsp;certify&amp;nbsp;it&amp;nbsp;before&amp;nbsp;signing&amp;nbsp;it.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;After&amp;nbsp;you&amp;nbsp;certify&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document,&amp;nbsp;you&amp;nbsp;can&amp;nbsp;digitally&amp;nbsp;sign&amp;nbsp;additional&amp;nbsp;signature&amp;nbsp;fields.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;The&amp;nbsp;author&amp;nbsp;or&amp;nbsp;originator&amp;nbsp;of&amp;nbsp;the&amp;nbsp;document&amp;nbsp;can&amp;nbsp;specify&amp;nbsp;that&amp;nbsp;the&amp;nbsp;document&amp;nbsp;can&amp;nbsp;be&amp;nbsp;modified&amp;nbsp;in&amp;nbsp;certain&amp;nbsp;ways&amp;nbsp;without&amp;nbsp;invalidating&amp;nbsp;the&amp;nbsp;certified&amp;nbsp;signature.&amp;nbsp;For&amp;nbsp;example,&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;the&amp;nbsp;document&amp;nbsp;may&amp;nbsp;permit&amp;nbsp;filling&amp;nbsp;in&amp;nbsp;forms&amp;nbsp;or&amp;nbsp;commenting.&amp;nbsp;If&amp;nbsp;the&amp;nbsp;author&amp;nbsp;specifies&amp;nbsp;that&amp;nbsp;a&amp;nbsp;certain&amp;nbsp;modification&amp;nbsp;is&amp;nbsp;not&amp;nbsp;permitted,&amp;nbsp;Acrobat&amp;nbsp;restricts&amp;nbsp;users&amp;nbsp;from&amp;nbsp;modifying&amp;nbsp;the&amp;nbsp;document&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;in&amp;nbsp;that&amp;nbsp;way.&amp;nbsp;If&amp;nbsp;such&amp;nbsp;modifications&amp;nbsp;are&amp;nbsp;made,&amp;nbsp;such&amp;nbsp;as&amp;nbsp;by&amp;nbsp;using&amp;nbsp;another&amp;nbsp;application,&amp;nbsp;the&amp;nbsp;certified&amp;nbsp;signature&amp;nbsp;is&amp;nbsp;invalid&amp;nbsp;and&amp;nbsp;Acrobat&amp;nbsp;issues&amp;nbsp;a&amp;nbsp;warning&amp;nbsp;when&amp;nbsp;a&amp;nbsp;user&amp;nbsp;opens&amp;nbsp;the&amp;nbsp;document.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;(With&amp;nbsp;non-certified&amp;nbsp;signatures,&amp;nbsp;modifications&amp;nbsp;are&amp;nbsp;not&amp;nbsp;prevented,&amp;nbsp;and&amp;nbsp;normal&amp;nbsp;editing&amp;nbsp;operations&amp;nbsp;do&amp;nbsp;not&amp;nbsp;invalidate&amp;nbsp;the&amp;nbsp;original&amp;nbsp;signature.)!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;At&amp;nbsp;the&amp;nbsp;time&amp;nbsp;of&amp;nbsp;signing,&amp;nbsp;the&amp;nbsp;document&amp;nbsp;is&amp;nbsp;scanned&amp;nbsp;for&amp;nbsp;specific&amp;nbsp;types&amp;nbsp;of&amp;nbsp;content&amp;nbsp;that&amp;nbsp;could&amp;nbsp;make&amp;nbsp;the&amp;nbsp;contents&amp;nbsp;of&amp;nbsp;a&amp;nbsp;document&amp;nbsp;ambiguous&amp;nbsp;or&amp;nbsp;misleading.&amp;nbsp;For&amp;nbsp;example,&amp;nbsp;an&amp;nbsp;annotation&amp;nbsp;could&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;obscure&amp;nbsp;some&amp;nbsp;text&amp;nbsp;on&amp;nbsp;a&amp;nbsp;page&amp;nbsp;that&amp;nbsp;is&amp;nbsp;important&amp;nbsp;for&amp;nbsp;understanding&amp;nbsp;what&amp;nbsp;is&amp;nbsp;being&amp;nbsp;certified.&amp;nbsp;An&amp;nbsp;explanation&amp;nbsp;(legal&amp;nbsp;attestation)&amp;nbsp;can&amp;nbsp;be&amp;nbsp;provided&amp;nbsp;about&amp;nbsp;such&amp;nbsp;content.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;You&amp;nbsp;can&amp;nbsp;programmatically&amp;nbsp;certify&amp;nbsp;PDF&amp;nbsp;documents&amp;nbsp;by&amp;nbsp;using&amp;nbsp;the&amp;nbsp;Signature&amp;nbsp;service&amp;nbsp;Java&amp;nbsp;API&amp;nbsp;or&amp;nbsp;the&amp;nbsp;Signature&amp;nbsp;web&amp;nbsp;service&amp;nbsp;API.&amp;nbsp;When&amp;nbsp;certifying&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document,&amp;nbsp;you&amp;nbsp;must&amp;nbsp;reference&amp;nbsp;a&amp;nbsp;security&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;credential&amp;nbsp;that&amp;nbsp;exists&amp;nbsp;in&amp;nbsp;the&amp;nbsp;Credential&amp;nbsp;service.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Note:&amp;nbsp;When&amp;nbsp;certifying&amp;nbsp;and&amp;nbsp;signing&amp;nbsp;the&amp;nbsp;same&amp;nbsp;PDF&amp;nbsp;document,&amp;nbsp;if&amp;nbsp;the&amp;nbsp;certify&amp;nbsp;signature&amp;nbsp;is&amp;nbsp;not&amp;nbsp;trusted,&amp;nbsp;a&amp;nbsp;yellow&amp;nbsp;triangle&amp;nbsp;appears&amp;nbsp;next&amp;nbsp;to&amp;nbsp;the&amp;nbsp;first&amp;nbsp;sign&amp;nbsp;signature&amp;nbsp;when&amp;nbsp;you&amp;nbsp;open&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;in&amp;nbsp;Acrobat&amp;nbsp;or&amp;nbsp;Adobe&amp;nbsp;Reader.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;The&amp;nbsp;certifying&amp;nbsp;signature&amp;nbsp;must&amp;nbsp;be&amp;nbsp;trusted&amp;nbsp;to&amp;nbsp;avoid&amp;nbsp;this&amp;nbsp;situation.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;The&amp;nbsp;following&amp;nbsp;Java&amp;nbsp;code&amp;nbsp;example&amp;nbsp;certifies&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;that&amp;nbsp;is&amp;nbsp;based&amp;nbsp;on&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;file.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;PreRequisites&amp;nbsp;-&amp;nbsp;Digital&amp;nbsp;certificate&amp;nbsp;for&amp;nbsp;certifying&amp;nbsp;the&amp;nbsp;document&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;uploaded&amp;nbsp;on&amp;nbsp;AEM&amp;nbsp;Key&amp;nbsp;Store.!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!!!discoiqbr!!@Component!!discoiqbr!!@Service(value=Certify.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;Certify&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;SlingRepository&amp;nbsp;slingRepository;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;JcrResourceResolverFactory&amp;nbsp;jcrResourceResolverFactory&amp;nbsp;;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;inputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;the&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;JCR&amp;nbsp;node&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;outputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;the&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;where&amp;nbsp;the&amp;nbsp;output&amp;nbsp;needs&amp;nbsp;to&amp;nbsp;be&amp;nbsp;stored!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;IOException!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;RepositoryException!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;InvalidArgumentException!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;DocAssuranceException!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;public&amp;nbsp;void&amp;nbsp;certify(String&amp;nbsp;inputFile,&amp;nbsp;String&amp;nbsp;outputFile)&amp;nbsp;throws&amp;nbsp;IOException,&amp;nbsp;RepositoryException,&amp;nbsp;InvalidArgumentException,&amp;nbsp;DocAssuranceException{!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;inFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;outFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;outDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;Session&amp;nbsp;adminSession&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ResourceResolver&amp;nbsp;resourceResolver&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**&amp;nbsp;resourceResolver&amp;nbsp;to&amp;nbsp;be&amp;nbsp;passed&amp;nbsp;to&amp;nbsp;SignatureServiceAPI&amp;nbsp;and&amp;nbsp;Reader&amp;nbsp;Extensions!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;the&amp;nbsp;resource&amp;nbsp;resolver&amp;nbsp;for&amp;nbsp;signature&amp;nbsp;options&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;corresponding&amp;nbsp;to&amp;nbsp;the&amp;nbsp;user&amp;nbsp;who&amp;nbsp;has&amp;nbsp;the&amp;nbsp;signing&amp;nbsp;certificate&amp;nbsp;in&amp;nbsp;his&amp;nbsp;granite&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;the&amp;nbsp;resource&amp;nbsp;resolver&amp;nbsp;for&amp;nbsp;signature&amp;nbsp;options&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;corresponding&amp;nbsp;to&amp;nbsp;the&amp;nbsp;user&amp;nbsp;who&amp;nbsp;has&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;for&amp;nbsp;reader&amp;nbsp;extension&amp;nbsp;in&amp;nbsp;his&amp;nbsp;granite&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;here&amp;nbsp;we&amp;nbsp;are&amp;nbsp;using&amp;nbsp;the&amp;nbsp;same&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;adminSession&amp;nbsp;=&amp;nbsp;slingRepository.loginAdministrative(null);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver&amp;nbsp;=&amp;nbsp;jcrResourceResolverFactory.getResourceResolver(adminSession);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//retrieve&amp;nbsp;specifications&amp;nbsp;for&amp;nbsp;each&amp;nbsp;of&amp;nbsp;the&amp;nbsp;services,&amp;nbsp;you&amp;nbsp;may&amp;nbsp;pass&amp;nbsp;null&amp;nbsp;if&amp;nbsp;you&amp;nbsp;don't&amp;nbsp;want&amp;nbsp;to&amp;nbsp;use&amp;nbsp;that&amp;nbsp;service!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//we&amp;nbsp;are&amp;nbsp;not&amp;nbsp;extending&amp;nbsp;the&amp;nbsp;reader&amp;nbsp;in&amp;nbsp;this&amp;nbsp;case,&amp;nbsp;so&amp;nbsp;passing&amp;nbsp;null!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;encrypted&amp;nbsp;document&amp;nbsp;pass&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;-&amp;nbsp;see&amp;nbsp;the&amp;nbsp;method&amp;nbsp;getUnlockOptions()&amp;nbsp;below!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outDoc&amp;nbsp;=&amp;nbsp;docAssuranceService.secureDocument(inDoc,&amp;nbsp;null,&amp;nbsp;getCertificationOptions(resourceResolver),&amp;nbsp;null,null);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(Exception&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//&amp;nbsp;TODO&amp;nbsp;Auto-generated&amp;nbsp;catch&amp;nbsp;block!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;finally{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;always&amp;nbsp;close&amp;nbsp;the&amp;nbsp;PDFDocument&amp;nbsp;object&amp;nbsp;after&amp;nbsp;your&amp;nbsp;processing&amp;nbsp;is&amp;nbsp;done.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(inDoc&amp;nbsp;!=&amp;nbsp;null){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc.close();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(adminSession&amp;nbsp;!=&amp;nbsp;null&amp;nbsp;&amp;&amp;&amp;nbsp;adminSession.isLive()){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(resourceResolver&amp;nbsp;!=&amp;nbsp;null){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver.close();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;adminSession.logout();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outDoc.copyToFile(outFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;rr&amp;nbsp;resource&amp;nbsp;resolver&amp;nbsp;corresponding&amp;nbsp;to&amp;nbsp;the&amp;nbsp;user&amp;nbsp;with&amp;nbsp;the&amp;nbsp;access&amp;nbsp;to&amp;nbsp;signing&amp;nbsp;credential&amp;nbsp;for&amp;nbsp;the&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;given&amp;nbsp;alias&amp;nbsp;"allcertificatesanypolicytest11ee_new"&amp;nbsp;in&amp;nbsp;this&amp;nbsp;case!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@return&amp;nbsp;SignatureOptions!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;private&amp;nbsp;SignatureOptions&amp;nbsp;getCertificationOptions(ResourceResolver&amp;nbsp;rr){!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//create&amp;nbsp;an&amp;nbsp;instance&amp;nbsp;of&amp;nbsp;SignatureOptions!!discoiqbr!!&amp;nbsp;&amp;nbsp;SignatureOptions&amp;nbsp;signatureOptions&amp;nbsp;=&amp;nbsp;SignatureOptions.getInstance();!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//set&amp;nbsp;the&amp;nbsp;operation&amp;nbsp;you&amp;nbsp;want&amp;nbsp;to&amp;nbsp;perform&amp;nbsp;-&amp;nbsp;SIGN/CERTIFY!!discoiqbr!!&amp;nbsp;&amp;nbsp;signatureOptions.setOperationType(DocAssuranceServiceOperationTypes.CERTIFY);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//signature&amp;nbsp;field&amp;nbsp;to&amp;nbsp;certify,&amp;nbsp;pass&amp;nbsp;null&amp;nbsp;if&amp;nbsp;invisible&amp;nbsp;signature&amp;nbsp;field!!discoiqbr!!&amp;nbsp;&amp;nbsp;String&amp;nbsp;fieldName&amp;nbsp;=&amp;nbsp;"Signature1"&amp;nbsp;;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;private&amp;nbsp;credential&amp;nbsp;uploaded&amp;nbsp;on&amp;nbsp;the&amp;nbsp;Key&amp;nbsp;Store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;alias&amp;nbsp;=&amp;nbsp;"allcertificatesanypolicytest11ee_new";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Hash&amp;nbsp;Algo&amp;nbsp;to&amp;nbsp;be&amp;nbsp;used&amp;nbsp;to&amp;nbsp;compute&amp;nbsp;digest&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;HashAlgorithm&amp;nbsp;algo&amp;nbsp;=&amp;nbsp;HashAlgorithm.SHA256;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Reason&amp;nbsp;for&amp;nbsp;signing/certifying!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;reason&amp;nbsp;=&amp;nbsp;"Reason";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//location&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signer!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;location&amp;nbsp;=&amp;nbsp;"Location";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//contact&amp;nbsp;info&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signer!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;contactInfo&amp;nbsp;=&amp;nbsp;"Contact&amp;nbsp;Info";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//DocMDP&amp;nbsp;Permissions&amp;nbsp;associated&amp;nbsp;with&amp;nbsp;certification!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;MDPPermissions&amp;nbsp;mdpPermissions&amp;nbsp;=&amp;nbsp;MDPPermissions.valueOf("FormChanges");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;a&amp;nbsp;PDFSignatureAppearanceOptions&amp;nbsp;object&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//and&amp;nbsp;show&amp;nbsp;date&amp;nbsp;information!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PDFSignatureAppearenceOptions&amp;nbsp;appOptions&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PDFSignatureAppearenceOptions(!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PDFSignatureAppearanceType.NAME,&amp;nbsp;null,&amp;nbsp;1.0d,&amp;nbsp;null,&amp;nbsp;true,&amp;nbsp;true,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;true,&amp;nbsp;true,&amp;nbsp;false,&amp;nbsp;true,&amp;nbsp;true,&amp;nbsp;TextDirection.AUTO);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setLockCertifyingField(true);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setSignatureFieldName(fieldName);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setAlgo(algo);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setContactInfo(contactInfo);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setLocation(location);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setSigAppearence(appOptions);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setReason(reason);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setDssPref(getDSSPreferences(rr));!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setCredential(new&amp;nbsp;CredentialContext(alias,&amp;nbsp;rr));!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setMdpPermissions(mdpPermissions);!!discoiqbr!!&amp;nbsp;&amp;nbsp;return&amp;nbsp;signatureOptions;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DSSPreferences&amp;nbsp;getDSSPreferences(ResourceResolver&amp;nbsp;rr){!!discoiqbr!!&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;DSS&amp;nbsp;Preferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;DSSPreferencesImpl&amp;nbsp;prefs&amp;nbsp;=&amp;nbsp;DSSPreferencesImpl.getInstance();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;prefs.setPKIPreferences(getPKIPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;GeneralPreferencesImpl&amp;nbsp;gp&amp;nbsp;=&amp;nbsp;(GeneralPreferencesImpl)&amp;nbsp;prefs.getPKIPreferences().getGeneralPreferences();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;gp.setDisableCache(true);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;prefs;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;PKIPreferences&amp;nbsp;getPKIPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;PKI&amp;nbsp;Preferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PKIPreferences&amp;nbsp;pkiPref&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PKIPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pkiPref.setCRLPreferences(getCRLPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pkiPref.setPathPreferences(getPathValidationPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;pkiPref;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;CRLPreferences&amp;nbsp;getCRLPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//specifies&amp;nbsp;the&amp;nbsp;CRL&amp;nbsp;Preferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;CRLPreferencesImpl&amp;nbsp;crlPrefs&amp;nbsp;=&amp;nbsp;new&amp;nbsp;CRLPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;crlPrefs.setRevocationCheck(RevocationCheckStyle.CheckIfAvailable);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;crlPrefs.setGoOnline(true);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;crlPrefs;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;PathValidationPreferences&amp;nbsp;getPathValidationPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;path&amp;nbsp;validation&amp;nbsp;preferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PathValidationPreferencesImpl&amp;nbsp;pathPref&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PathValidationPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pathPref.setDoValidation(false);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;pathPref;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;for&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;UnlockOptions&amp;nbsp;getUnlockOptions(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;UnlockOptions&amp;nbsp;unlockOptions&amp;nbsp;=&amp;nbsp;new&amp;nbsp;UnlockOptions();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;Open&amp;nbsp;Password&amp;nbsp;for&amp;nbsp;password&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unlockOptions.setPassword("OpenPassword");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;Certificate&amp;nbsp;Encrypted&amp;nbsp;Document,&amp;nbsp;set&amp;nbsp;the&amp;nbsp;alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;uploaded&amp;nbsp;in&amp;nbsp;the&amp;nbsp;user's&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//and&amp;nbsp;corresponding&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;unlockOptions;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!} 
  </codeblock> 
  <h4>Securing documents</h4> 
  <p>secureDocument enables you to encrypt, sign/certify, and reader extend a PDF Document either individually or in any combination in a particular order. To access any of this functionality, pass the corresponding argument. If null, it would be assumed that the particular processing is not required.</p> 
  <p><strong>Encrypting PDF documents with password</strong></p> 
  <p>When you encrypt a PDF document with a password, a user must specify the password to open the PDF document in Adobe Reader or Acrobat. Also, before another AEM Forms Document Services operation uses the document, a password-encrypted PDF document must be unlocked.</p> 
  <p><strong>Encrypting PDF documents with certificates</strong></p> 
  <p>Certificate-based encryption lets you encrypt a document for specific recipients using public key technology.</p> 
  <p>Various recipients can be given different permissions for the document. Many aspects of encryption are made possible by public key technology.</p> 
  <p>An algorithm is used to generate two large numbers, known as keys that have the following properties:</p> 
  <ul> 
   <li>One key is used to encrypt a set of data. Later, only the other key can be used to decrypt the data.</li> 
   <li>It is impossible to distinguish one key from the other.</li> 
   <li>One of the keys acts as a user's private key. It is important that only the user has access to this key.</li> 
   <li>The other key is the user's public key, which can be shared with others.</li> 
  </ul> 
  <p>A public key certificate contains a user's public key and identifying information. The X.509 format is used for storing certificates. Certificates are typically issued and digitally signed by a certificate authority (CA), which is a recognized entity that provides a measure of confidence in the validity of the certificate. Certificates have an expiration date, after which they are no longer valid.</p> 
  <p>In addition, certificate revocation lists (CRLs) provide information about certificates that were revoked prior to their expiration date. CRLs are published periodically by certificate authorities. The revocation status of a certificate can also be retrieved through Online Certificate Status Protocol (OCSP) over the network.</p> 
  <p><em><strong>Note</strong>:</em> <em>Before you can encrypt a PDF document with a certificate, you must ensure that you add the certificate to AEM Trust Store</em>.</p> 
  <p><strong>Applying usage rights to PDF documents</strong></p> 
  <p>You can apply usage rights to PDF documents using the Reader Extensions Java Client API and web service. Usage rights pertain to functionality that is available by default in Acrobat but not in Adobe Reader, such as the ability to add comments to a form or to fill in form fields and save the form. PDF documents that have usage rights applied to them are called rights-enabled documents. A user who opens a rights-enabled document in Adobe Reader can perform operations that are enabled for that specific document.</p> 
  <p>Before you can Reader Extend a PDF document with a certificate, you must ensure that you add the certificate to AEM Keystore.</p> 
  <p><strong>Digitally signing PDF documents</strong></p> 
  <p>Digital signatures can be applied to PDF documents to provide a level of security. Digital signatures, like handwritten signatures, provide a means by which signers identify themselves and make statements about a document.</p> 
  <p>The technology used to digitally sign documents helps to ensure that both the signer and recipients are clear about what was signed and confident that the document was not altered since it was signed.</p> 
  <p>PDF documents are signed by means of public-key technology. A signer has two keys: a public key and a private key. The private key is stored in a user's credential that must be available at the time of signing.</p> 
  <p>The public key is stored in the user's certificate that must be available to recipients to validate the signature. Information about revoked certificates is found in certificate revocation lists (CRLs) and Online Certificate Status Protocol (OCSP) responses distributed by Certificate Authorities (CAs). The time of signing can be obtained from a trusted source known as a Timestamping Authority.</p> 
  <p><em><strong>Note</strong>:</em> <em>Before you can digitally sign a PDF document, you must ensure that you add the credential in AEM Keystore. The credential is the private key used for signing</em>.</p> 
  <p><em><strong>Note:</strong></em> AEM Forms also supports <em><a href="https://en.wikipedia.org/wiki/CAdES_%28computing%29">CAdES</a></em> specification for digitally signing PDF documents. </p> 
  <p><strong>Certifying PDF Documents</strong></p> 
  <p>You can secure a PDF document by certifying it with a particular type of signature called a certified signature. A certified signature is distinguished from a digital signature in these ways:</p> 
  <p>It must be the first signature applied to the PDF document; that is, at the time the certified signature is applied, any other signature fields in the document must be unsigned.</p> 
  <p>Only one certified signature is permitted in a PDF document. If you want to sign and certify a PDF document, you must certify it before signing it.</p> 
  <p>After you certify a PDF document, you can digitally sign additional signature fields.</p> 
  <p>The author or originator of the document can specify that the document can be modified in certain ways without invalidating the certified signature.</p> 
  <p>For example, the document may permit filling in forms or commenting. If the author specifies that a certain modification is not permitted,</p> 
  <p>Acrobat restricts users from modifying the document in that way. If such modifications are made, such as by using another application, the certified signature is invalid and Acrobat issues a warning when a user opens the document. (With non-certified signatures, modifications are not prevented, and normal editing operations do not invalidate the original signature.)</p> 
  <p>At the time of signing, the document is scanned for specific types of content that could make the contents of a document ambiguous or misleading.</p> 
  <p>For example, an annotation could obscure some text on a page that is important for understanding what is being certified. An explanation (legal attestation) can be provided about such content.</p> 
  <p><em><strong>Note</strong>: Before you can digitally sign a PDF document, you must ensure that you add the credential in AEM Keystore. The credential is the private key used for signing</em>.</p> 
  <p><strong>Syntax</strong>: <code class="code">secureDocument(Document inDoc,
    <discoiqbr /> EncryptionOptions encryptionOptions,
    <discoiqbr /> SignatureOptions signatureOptions,
    <discoiqbr /> ReaderExtensionOptions readerExtensionOptions,
    <discoiqbr /> UnlockOptions unlockOptions)</code></p> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">inDoc</span><br /> </td> 
     <td>Document input PDF Document<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">encryptionOptions</span><br /> </td> 
     <td>Includes the arguments required for Encrypting a PDF Doc<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">signatureOptions</span></td> 
     <td>Includes the options required for Signing/Certifying a PDF Doc</td> 
    </tr> 
    <tr> 
     <td><span class="code">readerExtensionOptions</span></td> 
     <td>Includes the options required for Reader Extending a PDF Doc</td> 
    </tr> 
    <tr> 
     <td><span class="code">unlockOptions</span></td> 
     <td>Includes the parameters require to unlock an encrypted file, This is required only if the file is encrypted.<br /> </td> 
    </tr> 
   </tbody> 
  </table> 
  <p><strong>Sample 1</strong>: This sample is used to carry out password encryption, certifying a signature field and Reader Extending the PDF document.</p> 
  <codeblock gutter="true" lineWrap="true" class="syntax js">
    /*************************************************************************!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;ADOBE&amp;nbsp;CONFIDENTIAL!!discoiqbr!!&amp;nbsp;*&amp;nbsp;___________________!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;Copyright&amp;nbsp;2014&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;All&amp;nbsp;Rights&amp;nbsp;Reserved.!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;NOTICE:&amp;nbsp;&amp;nbsp;All&amp;nbsp;information&amp;nbsp;contained&amp;nbsp;herein&amp;nbsp;is,&amp;nbsp;and&amp;nbsp;remains!!discoiqbr!!&amp;nbsp;*&amp;nbsp;the&amp;nbsp;property&amp;nbsp;of&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its&amp;nbsp;suppliers,!!discoiqbr!!&amp;nbsp;*&amp;nbsp;if&amp;nbsp;any.&amp;nbsp;&amp;nbsp;The&amp;nbsp;intellectual&amp;nbsp;and&amp;nbsp;technical&amp;nbsp;concepts&amp;nbsp;contained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;herein&amp;nbsp;are&amp;nbsp;proprietary&amp;nbsp;to&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its!!discoiqbr!!&amp;nbsp;*&amp;nbsp;suppliers&amp;nbsp;and&amp;nbsp;are&amp;nbsp;protected&amp;nbsp;by&amp;nbsp;trade&amp;nbsp;secret&amp;nbsp;or&amp;nbsp;copyright&amp;nbsp;law.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Dissemination&amp;nbsp;of&amp;nbsp;this&amp;nbsp;information&amp;nbsp;or&amp;nbsp;reproduction&amp;nbsp;of&amp;nbsp;this&amp;nbsp;material!!discoiqbr!!&amp;nbsp;*&amp;nbsp;is&amp;nbsp;strictly&amp;nbsp;forbidden&amp;nbsp;unless&amp;nbsp;prior&amp;nbsp;written&amp;nbsp;permission&amp;nbsp;is&amp;nbsp;obtained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;from&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated.!!discoiqbr!!&amp;nbsp;**************************************************************************/!!discoiqbr!!package&amp;nbsp;com.adobe.docassurance.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!import&amp;nbsp;java.util.ArrayList;!!discoiqbr!!import&amp;nbsp;java.util.List;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;javax.jcr.Session;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!import&amp;nbsp;org.apache.sling.api.resource.ResourceResolver;!!discoiqbr!!import&amp;nbsp;org.apache.sling.jcr.api.SlingRepository;!!discoiqbr!!import&amp;nbsp;org.apache.sling.jcr.resource.JcrResourceResolverFactory;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceServiceOperationTypes;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.EncryptionOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.ReaderExtensionOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.SignatureOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.encryption.client.PasswordEncryptionCompatability;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.encryption.client.PasswordEncryptionOption;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.encryption.client.PasswordEncryptionOptionSpec;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.encryption.client.PasswordEncryptionPermission;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.readerextensions.client.ReaderExtensionsOptionSpec;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.readerextensions.client.UsageRights;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.MDPPermissions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.CredentialContext;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.DSSPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.DSSPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.PDFSignatureAppearenceOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.PDFSignatureAppearenceOptions.PDFSignatureAppearanceType;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.PDFSignatureAppearenceOptions.TextDirection;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.UnlockOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.common.HashAlgorithm;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.common.RevocationCheckStyle;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.CRLPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.CRLPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.GeneralPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PKIPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PKIPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PathValidationPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PathValidationPreferencesImpl;!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;This&amp;nbsp;class&amp;nbsp;provides&amp;nbsp;a&amp;nbsp;sample&amp;nbsp;code&amp;nbsp;to&amp;nbsp;use&amp;nbsp;{@code&amp;nbsp;DocAssuranceService}&amp;nbsp;to&amp;nbsp;carry&amp;nbsp;out!!discoiqbr!!&amp;nbsp;*&amp;nbsp;password&amp;nbsp;encryption,&amp;nbsp;certifying&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;and&amp;nbsp;reader&amp;nbsp;extending&amp;nbsp;the&amp;nbsp;pdf&amp;nbsp;document.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;PreRequisites&amp;nbsp;-&amp;nbsp;Digital&amp;nbsp;certificate&amp;nbsp;for&amp;nbsp;signing&amp;nbsp;the&amp;nbsp;document&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;uploaded&amp;nbsp;on&amp;nbsp;Granite&amp;nbsp;Key&amp;nbsp;Store!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Digital&amp;nbsp;certificate&amp;nbsp;for&amp;nbsp;reader&amp;nbsp;extending&amp;nbsp;the&amp;nbsp;document&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;uploaded&amp;nbsp;on&amp;nbsp;Granite&amp;nbsp;Key&amp;nbsp;Store!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!!!discoiqbr!!@Component!!discoiqbr!!@Service(value=PassEncryptCertifyExtend.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;PassEncryptCertifyExtend&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;SlingRepository&amp;nbsp;slingRepository;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;JcrResourceResolverFactory&amp;nbsp;jcrResourceResolverFactory&amp;nbsp;;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;inputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;the&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;disk&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;outputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;the&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;where&amp;nbsp;the&amp;nbsp;output&amp;nbsp;needs&amp;nbsp;to&amp;nbsp;be&amp;nbsp;stored!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;Exception&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;public&amp;nbsp;void&amp;nbsp;SecureDocument(String&amp;nbsp;inputFile,&amp;nbsp;String&amp;nbsp;outputFile)&amp;nbsp;throws&amp;nbsp;Exception{!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;inFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;outFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;outDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;Session&amp;nbsp;adminSession&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ResourceResolver&amp;nbsp;resourceResolver&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**&amp;nbsp;resourceResolver&amp;nbsp;with&amp;nbsp;admin&amp;nbsp;privileges&amp;nbsp;to&amp;nbsp;be&amp;nbsp;passed&amp;nbsp;to&amp;nbsp;SignatureServiceAPI&amp;nbsp;and&amp;nbsp;Reader&amp;nbsp;Extensions!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;the&amp;nbsp;resource&amp;nbsp;resolver&amp;nbsp;for&amp;nbsp;signature&amp;nbsp;options&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;corresponding&amp;nbsp;to&amp;nbsp;the&amp;nbsp;user&amp;nbsp;who&amp;nbsp;has&amp;nbsp;the&amp;nbsp;signing&amp;nbsp;certificate&amp;nbsp;in&amp;nbsp;his&amp;nbsp;granite&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;the&amp;nbsp;resource&amp;nbsp;resolver&amp;nbsp;for&amp;nbsp;signature&amp;nbsp;options&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;corresponding&amp;nbsp;to&amp;nbsp;the&amp;nbsp;user&amp;nbsp;who&amp;nbsp;has&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;for&amp;nbsp;reader&amp;nbsp;extension&amp;nbsp;in&amp;nbsp;his&amp;nbsp;granite&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;here&amp;nbsp;we&amp;nbsp;are&amp;nbsp;using&amp;nbsp;the&amp;nbsp;same&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;adminSession&amp;nbsp;=&amp;nbsp;slingRepository.loginAdministrative(null);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver&amp;nbsp;=&amp;nbsp;jcrResourceResolverFactory.getResourceResolver(adminSession);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//retrieve&amp;nbsp;specifications&amp;nbsp;for&amp;nbsp;each&amp;nbsp;of&amp;nbsp;the&amp;nbsp;services,&amp;nbsp;you&amp;nbsp;may&amp;nbsp;pass&amp;nbsp;null&amp;nbsp;if&amp;nbsp;you&amp;nbsp;don't&amp;nbsp;want&amp;nbsp;to&amp;nbsp;use&amp;nbsp;that&amp;nbsp;service!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;encrypted&amp;nbsp;document&amp;nbsp;pass&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;-&amp;nbsp;see&amp;nbsp;the&amp;nbsp;method&amp;nbsp;getUnlockOptions()&amp;nbsp;below!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outDoc&amp;nbsp;=&amp;nbsp;docAssuranceService.secureDocument(inDoc,&amp;nbsp;getPassEncryptionOptions(),&amp;nbsp;getCertificationOptions(resourceResolver),&amp;nbsp;getReaderExtensionOptions(resourceResolver),null);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;finally{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;always&amp;nbsp;close&amp;nbsp;the&amp;nbsp;PDFDocument&amp;nbsp;object&amp;nbsp;after&amp;nbsp;your&amp;nbsp;processing&amp;nbsp;is&amp;nbsp;done.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(inDoc&amp;nbsp;!=&amp;nbsp;null){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc.close();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(adminSession&amp;nbsp;!=&amp;nbsp;null&amp;nbsp;&amp;&amp;&amp;nbsp;adminSession.isLive()){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(resourceResolver&amp;nbsp;!=&amp;nbsp;null){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver.close();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;adminSession.logout();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outDoc.copyToFile(outFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;for&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;UnlockOptions&amp;nbsp;getUnlockOptions(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;UnlockOptions&amp;nbsp;unlockOptions&amp;nbsp;=&amp;nbsp;new&amp;nbsp;UnlockOptions();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;Open&amp;nbsp;Password&amp;nbsp;for&amp;nbsp;password&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unlockOptions.setPassword("OpenPassword");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;Certificate&amp;nbsp;Encrypted&amp;nbsp;Document,&amp;nbsp;set&amp;nbsp;the&amp;nbsp;alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;uploaded&amp;nbsp;in&amp;nbsp;the&amp;nbsp;user's&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//and&amp;nbsp;corresponding&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;unlockOptions;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@return&amp;nbsp;EncryptionOptions&amp;nbsp;for&amp;nbsp;password&amp;nbsp;encrypting&amp;nbsp;the&amp;nbsp;document.!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;private&amp;nbsp;EncryptionOptions&amp;nbsp;getPassEncryptionOptions(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;an&amp;nbsp;instance&amp;nbsp;of&amp;nbsp;EncryptionOptions!!discoiqbr!!&amp;nbsp;&amp;nbsp;EncryptionOptions&amp;nbsp;encryptionOptions&amp;nbsp;=&amp;nbsp;EncryptionOptions.getInstance();!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;a&amp;nbsp;PasswordEncryptionOptionSpec&amp;nbsp;object&amp;nbsp;that&amp;nbsp;stores&amp;nbsp;encryption&amp;nbsp;run-time&amp;nbsp;values!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PasswordEncryptionOptionSpec&amp;nbsp;passSpec&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PasswordEncryptionOptionSpec();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Specify&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;resource&amp;nbsp;to&amp;nbsp;encrypt!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;passSpec.setEncryptOption(PasswordEncryptionOption.ALL);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Specify&amp;nbsp;the&amp;nbsp;permission&amp;nbsp;associated&amp;nbsp;with&amp;nbsp;the&amp;nbsp;password!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//These&amp;nbsp;permissions&amp;nbsp;enable&amp;nbsp;data&amp;nbsp;to&amp;nbsp;be&amp;nbsp;extracted&amp;nbsp;from&amp;nbsp;a&amp;nbsp;password!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//protected&amp;nbsp;PDF&amp;nbsp;form!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;List&lt;PasswordEncryptionPermission&gt;&amp;nbsp;encrypPermissions&amp;nbsp;=&amp;nbsp;new&amp;nbsp;ArrayList&lt;PasswordEncryptionPermission&gt;();&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;encrypPermissions.add(PasswordEncryptionPermission.PASSWORD_EDIT_ADD);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;encrypPermissions.add(PasswordEncryptionPermission.PASSWORD_EDIT_MODIFY);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;passSpec.setPermissionsRequested(encrypPermissions);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Specify&amp;nbsp;the&amp;nbsp;Acrobat&amp;nbsp;version!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;passSpec.setCompatability(PasswordEncryptionCompatability.ACRO_7);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Specify&amp;nbsp;the&amp;nbsp;password&amp;nbsp;values!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;passSpec.setDocumentOpenPassword("OpenPassword");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;passSpec.setPermissionPassword("PermissionPassword");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Set&amp;nbsp;the&amp;nbsp;encryption&amp;nbsp;type&amp;nbsp;to&amp;nbsp;Password&amp;nbsp;Encryption!!discoiqbr!!&amp;nbsp;&amp;nbsp;encryptionOptions.setEncryptionType(DocAssuranceServiceOperationTypes.ENCRYPT_WITH_PASSWORD);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;encryptionOptions.setPasswordEncryptionOptionSpec(passSpec);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;encryptionOptions;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;resourceResolver&amp;nbsp;corresponding&amp;nbsp;to&amp;nbsp;the&amp;nbsp;user&amp;nbsp;with&amp;nbsp;the&amp;nbsp;access&amp;nbsp;to&amp;nbsp;Reader&amp;nbsp;Extension&amp;nbsp;credential&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;for&amp;nbsp;the&amp;nbsp;given&amp;nbsp;alias&amp;nbsp;-"production"&amp;nbsp;in&amp;nbsp;this&amp;nbsp;case!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@return!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;private&amp;nbsp;ReaderExtensionOptions&amp;nbsp;getReaderExtensionOptions(ResourceResolver&amp;nbsp;resourceResolver){!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;an&amp;nbsp;instance&amp;nbsp;of&amp;nbsp;ReaderExtensionOptions!!discoiqbr!!&amp;nbsp;&amp;nbsp;ReaderExtensionOptions&amp;nbsp;reOptions&amp;nbsp;=&amp;nbsp;ReaderExtensionOptions.getInstance();!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;instance&amp;nbsp;for&amp;nbsp;UsageRights&amp;nbsp;to&amp;nbsp;be&amp;nbsp;enabled&amp;nbsp;in&amp;nbsp;the&amp;nbsp;reader!!discoiqbr!!&amp;nbsp;&amp;nbsp;UsageRights&amp;nbsp;uRights&amp;nbsp;=&amp;nbsp;new&amp;nbsp;UsageRights();!!discoiqbr!!&amp;nbsp;&amp;nbsp;//enabling&amp;nbsp;comments&amp;nbsp;in&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;Reader!!discoiqbr!!&amp;nbsp;&amp;nbsp;uRights.setEnabledComments(true);!!discoiqbr!!&amp;nbsp;&amp;nbsp;//setting&amp;nbsp;ReaderExtensionsOptionSpec&amp;nbsp;in&amp;nbsp;the&amp;nbsp;reOptions!!discoiqbr!!&amp;nbsp;&amp;nbsp;reOptions.setReOptions(new&amp;nbsp;ReaderExtensionsOptionSpec(uRights,&amp;nbsp;"Enable&amp;nbsp;commenting&amp;nbsp;in&amp;nbsp;PDF"));!!discoiqbr!!&amp;nbsp;&amp;nbsp;//alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;to&amp;nbsp;be&amp;nbsp;used&amp;nbsp;for&amp;nbsp;extending&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;Reader!!discoiqbr!!&amp;nbsp;&amp;nbsp;reOptions.setCredentialAlias("production");&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//corresponding&amp;nbsp;to&amp;nbsp;the&amp;nbsp;user&amp;nbsp;with&amp;nbsp;the&amp;nbsp;access&amp;nbsp;to&amp;nbsp;Reader&amp;nbsp;Extension&amp;nbsp;credential!!discoiqbr!!&amp;nbsp;&amp;nbsp;reOptions.setResourceResolver(resourceResolver);&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;return&amp;nbsp;reOptions;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;rr&amp;nbsp;resource&amp;nbsp;resolver&amp;nbsp;corresponding&amp;nbsp;to&amp;nbsp;the&amp;nbsp;user&amp;nbsp;with&amp;nbsp;the&amp;nbsp;access&amp;nbsp;to&amp;nbsp;signing&amp;nbsp;credential&amp;nbsp;for&amp;nbsp;the&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;given&amp;nbsp;alias&amp;nbsp;"allcertificatesanypolicytest11ee_new"&amp;nbsp;in&amp;nbsp;this&amp;nbsp;case!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@return&amp;nbsp;SignatureOptions!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;private&amp;nbsp;SignatureOptions&amp;nbsp;getCertificationOptions(ResourceResolver&amp;nbsp;rr){!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//create&amp;nbsp;an&amp;nbsp;instance&amp;nbsp;of&amp;nbsp;SignatureOptions!!discoiqbr!!&amp;nbsp;&amp;nbsp;SignatureOptions&amp;nbsp;signatureOptions&amp;nbsp;=&amp;nbsp;SignatureOptions.getInstance();!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//set&amp;nbsp;the&amp;nbsp;operation&amp;nbsp;you&amp;nbsp;want&amp;nbsp;to&amp;nbsp;perform&amp;nbsp;-&amp;nbsp;SIGN/CERTIFY!!discoiqbr!!&amp;nbsp;&amp;nbsp;signatureOptions.setOperationType(DocAssuranceServiceOperationTypes.CERTIFY);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//signature&amp;nbsp;field&amp;nbsp;to&amp;nbsp;certify,&amp;nbsp;pass&amp;nbsp;null&amp;nbsp;if&amp;nbsp;invisible&amp;nbsp;signature&amp;nbsp;field!!discoiqbr!!&amp;nbsp;&amp;nbsp;String&amp;nbsp;fieldName&amp;nbsp;=&amp;nbsp;"Signature1"&amp;nbsp;;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;private&amp;nbsp;credential&amp;nbsp;uploaded&amp;nbsp;on&amp;nbsp;the&amp;nbsp;Key&amp;nbsp;Store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;alias&amp;nbsp;=&amp;nbsp;"allcertificatesanypolicytest11ee_new";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Hash&amp;nbsp;Algo&amp;nbsp;to&amp;nbsp;be&amp;nbsp;used&amp;nbsp;to&amp;nbsp;compute&amp;nbsp;digest&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;HashAlgorithm&amp;nbsp;algo&amp;nbsp;=&amp;nbsp;HashAlgorithm.SHA384;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Reason&amp;nbsp;for&amp;nbsp;signing/certifying!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;reason&amp;nbsp;=&amp;nbsp;"Test&amp;nbsp;Reason";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//location&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signer!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;location&amp;nbsp;=&amp;nbsp;"Test&amp;nbsp;Location";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//contact&amp;nbsp;info&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signer!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;contactInfo&amp;nbsp;=&amp;nbsp;"Test&amp;nbsp;Contact";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//DocMDP&amp;nbsp;Permissions&amp;nbsp;associated&amp;nbsp;with&amp;nbsp;certification!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;MDPPermissions&amp;nbsp;mdpPermissions&amp;nbsp;=&amp;nbsp;MDPPermissions.valueOf("FormChanges");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;a&amp;nbsp;PDFSignatureAppearanceOptions&amp;nbsp;object&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//and&amp;nbsp;show&amp;nbsp;date&amp;nbsp;information!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PDFSignatureAppearenceOptions&amp;nbsp;appOptions&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PDFSignatureAppearenceOptions(!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PDFSignatureAppearanceType.NAME,&amp;nbsp;null,&amp;nbsp;1.0d,&amp;nbsp;null,&amp;nbsp;true,&amp;nbsp;true,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;true,&amp;nbsp;true,&amp;nbsp;true,&amp;nbsp;true,&amp;nbsp;true,&amp;nbsp;TextDirection.AUTO);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setSignatureFieldName(fieldName);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setAlgo(algo);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setContactInfo(contactInfo);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setLocation(location);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setSigAppearence(appOptions);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setReason(reason);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setDssPref(getDSSPreferences(rr));!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setCredential(new&amp;nbsp;CredentialContext(alias,&amp;nbsp;rr));!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setMdpPermissions(mdpPermissions);!!discoiqbr!!&amp;nbsp;&amp;nbsp;return&amp;nbsp;signatureOptions;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DSSPreferences&amp;nbsp;getDSSPreferences(ResourceResolver&amp;nbsp;rr){!!discoiqbr!!&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;DSS&amp;nbsp;Preferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;DSSPreferencesImpl&amp;nbsp;prefs&amp;nbsp;=&amp;nbsp;DSSPreferencesImpl.getInstance();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;prefs.setPKIPreferences(getPKIPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;GeneralPreferencesImpl&amp;nbsp;gp&amp;nbsp;=&amp;nbsp;(GeneralPreferencesImpl)&amp;nbsp;prefs.getPKIPreferences().getGeneralPreferences();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;gp.setDisableCache(true);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;prefs;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;PKIPreferences&amp;nbsp;getPKIPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;PKI&amp;nbsp;Preferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PKIPreferences&amp;nbsp;pkiPref&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PKIPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pkiPref.setCRLPreferences(getCRLPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pkiPref.setPathPreferences(getPathValidationPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;pkiPref;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;CRLPreferences&amp;nbsp;getCRLPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//specifies&amp;nbsp;the&amp;nbsp;CRL&amp;nbsp;Preferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;CRLPreferencesImpl&amp;nbsp;crlPrefs&amp;nbsp;=&amp;nbsp;new&amp;nbsp;CRLPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;crlPrefs.setRevocationCheck(RevocationCheckStyle.CheckIfAvailable);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;crlPrefs.setGoOnline(true);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;crlPrefs;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;PathValidationPreferences&amp;nbsp;getPathValidationPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;path&amp;nbsp;validation&amp;nbsp;preferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PathValidationPreferencesImpl&amp;nbsp;pathPref&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PathValidationPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pathPref.setDoValidation(false);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;pathPref;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!} 
  </codeblock> 
  <p><strong>Sample 2</strong>: This sample is used to carry out PKI encryption, signing a signature field and Reader Extending the PDF document.</p> 
  <codeblock gutter="true" lineWrap="true" class="syntax java">
    /*************************************************************************!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;ADOBE&amp;nbsp;CONFIDENTIAL!!discoiqbr!!&amp;nbsp;*&amp;nbsp;___________________!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;Copyright&amp;nbsp;2014&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;All&amp;nbsp;Rights&amp;nbsp;Reserved.!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;NOTICE:&amp;nbsp;&amp;nbsp;All&amp;nbsp;information&amp;nbsp;contained&amp;nbsp;herein&amp;nbsp;is,&amp;nbsp;and&amp;nbsp;remains!!discoiqbr!!&amp;nbsp;*&amp;nbsp;the&amp;nbsp;property&amp;nbsp;of&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its&amp;nbsp;suppliers,!!discoiqbr!!&amp;nbsp;*&amp;nbsp;if&amp;nbsp;any.&amp;nbsp;&amp;nbsp;The&amp;nbsp;intellectual&amp;nbsp;and&amp;nbsp;technical&amp;nbsp;concepts&amp;nbsp;contained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;herein&amp;nbsp;are&amp;nbsp;proprietary&amp;nbsp;to&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its!!discoiqbr!!&amp;nbsp;*&amp;nbsp;suppliers&amp;nbsp;and&amp;nbsp;are&amp;nbsp;protected&amp;nbsp;by&amp;nbsp;trade&amp;nbsp;secret&amp;nbsp;or&amp;nbsp;copyright&amp;nbsp;law.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Dissemination&amp;nbsp;of&amp;nbsp;this&amp;nbsp;information&amp;nbsp;or&amp;nbsp;reproduction&amp;nbsp;of&amp;nbsp;this&amp;nbsp;material!!discoiqbr!!&amp;nbsp;*&amp;nbsp;is&amp;nbsp;strictly&amp;nbsp;forbidden&amp;nbsp;unless&amp;nbsp;prior&amp;nbsp;written&amp;nbsp;permission&amp;nbsp;is&amp;nbsp;obtained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;from&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated.!!discoiqbr!!&amp;nbsp;**************************************************************************/!!discoiqbr!!package&amp;nbsp;com.adobe.docassurance.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.ByteArrayInputStream;!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!import&amp;nbsp;java.io.IOException;!!discoiqbr!!import&amp;nbsp;java.io.InputStream;!!discoiqbr!!import&amp;nbsp;java.util.ArrayList;!!discoiqbr!!import&amp;nbsp;java.util.List;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;javax.jcr.Binary;!!discoiqbr!!import&amp;nbsp;javax.jcr.Node;!!discoiqbr!!import&amp;nbsp;javax.jcr.RepositoryException;!!discoiqbr!!import&amp;nbsp;javax.jcr.Session;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!import&amp;nbsp;org.apache.sling.api.resource.ResourceResolver;!!discoiqbr!!import&amp;nbsp;org.apache.sling.jcr.api.SlingRepository;!!discoiqbr!!import&amp;nbsp;org.apache.sling.jcr.resource.JcrResourceResolverFactory;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceServiceOperationTypes;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.EncryptionOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.ReaderExtensionOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.SignatureOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.encryption.client.CertificateEncryptionCompatibility;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.encryption.client.CertificateEncryptionIdentity;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.encryption.client.CertificateEncryptionOption;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.encryption.client.CertificateEncryptionOptionSpec;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.encryption.client.CertificateEncryptionPermissions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.encryption.client.Recipient;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.readerextensions.client.ReaderExtensionsOptionSpec;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.readerextensions.client.UsageRights;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.InvalidArgumentException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.CredentialContext;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.DSSPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.DSSPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.PDFSignatureAppearenceOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.UnlockOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.PDFSignatureAppearenceOptions.PDFSignatureAppearanceType;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.PDFSignatureAppearenceOptions.TextDirection;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.common.HashAlgorithm;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.common.RevocationCheckStyle;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.CRLPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.CRLPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.GeneralPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PKIPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PKIPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PathValidationPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PathValidationPreferencesImpl;!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;This&amp;nbsp;class&amp;nbsp;provides&amp;nbsp;a&amp;nbsp;sample&amp;nbsp;code&amp;nbsp;to&amp;nbsp;use&amp;nbsp;{@code&amp;nbsp;DocAssuranceService}&amp;nbsp;to&amp;nbsp;carry&amp;nbsp;out!!discoiqbr!!&amp;nbsp;*&amp;nbsp;certificate&amp;nbsp;encryption,&amp;nbsp;signing&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;and&amp;nbsp;reader&amp;nbsp;extending&amp;nbsp;the&amp;nbsp;pdf&amp;nbsp;document.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;PreRequisites&amp;nbsp;-&amp;nbsp;Digital&amp;nbsp;certificate&amp;nbsp;for&amp;nbsp;encrypting&amp;nbsp;the&amp;nbsp;document&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;uploaded&amp;nbsp;on&amp;nbsp;Granite&amp;nbsp;Trust&amp;nbsp;Store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Digital&amp;nbsp;certificate&amp;nbsp;for&amp;nbsp;signing&amp;nbsp;the&amp;nbsp;document&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;uploaded&amp;nbsp;on&amp;nbsp;Granite&amp;nbsp;Key&amp;nbsp;Store!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Digital&amp;nbsp;certificate&amp;nbsp;for&amp;nbsp;reader&amp;nbsp;extending&amp;nbsp;the&amp;nbsp;document&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;uploaded&amp;nbsp;on&amp;nbsp;Granite&amp;nbsp;Key&amp;nbsp;Store!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!!!discoiqbr!!@Component!!discoiqbr!!@Service(value=PassEncryptSignExtend.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;PassEncryptSignExtend&amp;nbsp;{!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;SlingRepository&amp;nbsp;slingRepository;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;JcrResourceResolverFactory&amp;nbsp;jcrResourceResolverFactory&amp;nbsp;;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;inputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;the&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;disk&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;outputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;the&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;where&amp;nbsp;the&amp;nbsp;output&amp;nbsp;needs&amp;nbsp;to&amp;nbsp;be&amp;nbsp;stored!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;Exception&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;public&amp;nbsp;void&amp;nbsp;CertEncryptSignReaderExtend(String&amp;nbsp;inputFile,&amp;nbsp;String&amp;nbsp;outputFile)&amp;nbsp;throws&amp;nbsp;Exception{!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;inFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;outFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;outDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;Session&amp;nbsp;adminSession&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ResourceResolver&amp;nbsp;resourceResolver&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**&amp;nbsp;resourceResolver&amp;nbsp;with&amp;nbsp;admin&amp;nbsp;privileges&amp;nbsp;to&amp;nbsp;be&amp;nbsp;passed&amp;nbsp;to&amp;nbsp;SignatureServiceAPI&amp;nbsp;and&amp;nbsp;Reader&amp;nbsp;Extensions!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;the&amp;nbsp;resource&amp;nbsp;resolver&amp;nbsp;for&amp;nbsp;signature&amp;nbsp;options&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;corresponding&amp;nbsp;to&amp;nbsp;the&amp;nbsp;user&amp;nbsp;who&amp;nbsp;has&amp;nbsp;the&amp;nbsp;signing&amp;nbsp;certificate&amp;nbsp;in&amp;nbsp;his&amp;nbsp;granite&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;the&amp;nbsp;resource&amp;nbsp;resolver&amp;nbsp;for&amp;nbsp;signature&amp;nbsp;options&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;corresponding&amp;nbsp;to&amp;nbsp;the&amp;nbsp;user&amp;nbsp;who&amp;nbsp;has&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;for&amp;nbsp;reader&amp;nbsp;extension&amp;nbsp;in&amp;nbsp;his&amp;nbsp;granite&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;here&amp;nbsp;we&amp;nbsp;are&amp;nbsp;using&amp;nbsp;the&amp;nbsp;same&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;adminSession&amp;nbsp;=&amp;nbsp;slingRepository.loginAdministrative(null);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver&amp;nbsp;=&amp;nbsp;jcrResourceResolverFactory.getResourceResolver(adminSession);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//retrieve&amp;nbsp;specifications&amp;nbsp;for&amp;nbsp;each&amp;nbsp;of&amp;nbsp;the&amp;nbsp;services,&amp;nbsp;you&amp;nbsp;may&amp;nbsp;pass&amp;nbsp;null&amp;nbsp;if&amp;nbsp;you&amp;nbsp;don't&amp;nbsp;want&amp;nbsp;to&amp;nbsp;use&amp;nbsp;that&amp;nbsp;service!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;encrypted&amp;nbsp;document&amp;nbsp;pass&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;-&amp;nbsp;see&amp;nbsp;the&amp;nbsp;method&amp;nbsp;getUnlockOptions()&amp;nbsp;below!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outDoc&amp;nbsp;=&amp;nbsp;docAssuranceService.secureDocument(inDoc,&amp;nbsp;getCertEncryptionOptions(),&amp;nbsp;getSignatureOptions(resourceResolver),&amp;nbsp;getReaderExtensionOptions(resourceResolver),null);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;finally{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;always&amp;nbsp;close&amp;nbsp;the&amp;nbsp;PDFDocument&amp;nbsp;object&amp;nbsp;after&amp;nbsp;your&amp;nbsp;processing&amp;nbsp;is&amp;nbsp;done.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(inDoc&amp;nbsp;!=&amp;nbsp;null){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc.close();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(adminSession&amp;nbsp;!=&amp;nbsp;null&amp;nbsp;&amp;&amp;&amp;nbsp;adminSession.isLive()){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(resourceResolver&amp;nbsp;!=&amp;nbsp;null){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver.close();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;adminSession.logout();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outDoc.copyToFile(outFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;for&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;UnlockOptions&amp;nbsp;getUnlockOptions(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;UnlockOptions&amp;nbsp;unlockOptions&amp;nbsp;=&amp;nbsp;new&amp;nbsp;UnlockOptions();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;Open&amp;nbsp;Password&amp;nbsp;for&amp;nbsp;password&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unlockOptions.setPassword("OpenPassword");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;Certificate&amp;nbsp;Encrypted&amp;nbsp;Document,&amp;nbsp;set&amp;nbsp;the&amp;nbsp;alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;uploaded&amp;nbsp;in&amp;nbsp;the&amp;nbsp;user's&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//and&amp;nbsp;corresponding&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;unlockOptions;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@return&amp;nbsp;EncryptionOptions&amp;nbsp;for&amp;nbsp;password&amp;nbsp;encrypting&amp;nbsp;the&amp;nbsp;document.!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;private&amp;nbsp;EncryptionOptions&amp;nbsp;getCertEncryptionOptions(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;an&amp;nbsp;instance&amp;nbsp;of&amp;nbsp;EncryptionOptions!!discoiqbr!!&amp;nbsp;&amp;nbsp;EncryptionOptions&amp;nbsp;encryptionOptions&amp;nbsp;=&amp;nbsp;EncryptionOptions.getInstance();!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Set&amp;nbsp;the&amp;nbsp;encryption&amp;nbsp;type&amp;nbsp;to&amp;nbsp;Certificate&amp;nbsp;Encryption!!discoiqbr!!&amp;nbsp;&amp;nbsp;encryptionOptions.setEncryptionType(DocAssuranceServiceOperationTypes.ENCRYPT_WITH_CERTIFCATE);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Set&amp;nbsp;the&amp;nbsp;List&amp;nbsp;that&amp;nbsp;stores&amp;nbsp;PKI&amp;nbsp;information!!discoiqbr!!&amp;nbsp;&amp;nbsp;List&lt;CertificateEncryptionIdentity&gt;&amp;nbsp;pkiIdentities&amp;nbsp;=&amp;nbsp;new&amp;nbsp;ArrayList&lt;CertificateEncryptionIdentity&gt;();&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Set&amp;nbsp;the&amp;nbsp;Permission&amp;nbsp;List!!discoiqbr!!&amp;nbsp;&amp;nbsp;List&lt;CertificateEncryptionPermissions&gt;&amp;nbsp;permList&amp;nbsp;=&amp;nbsp;new&amp;nbsp;ArrayList&lt;CertificateEncryptionPermissions&gt;();!!discoiqbr!!&amp;nbsp;&amp;nbsp;permList.add(CertificateEncryptionPermissions.PKI_ALL_PERM)&amp;nbsp;;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;a&amp;nbsp;Recipient&amp;nbsp;object&amp;nbsp;to&amp;nbsp;store&amp;nbsp;certificate&amp;nbsp;information!!discoiqbr!!&amp;nbsp;&amp;nbsp;Recipient&amp;nbsp;recipient&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Recipient();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Specify&amp;nbsp;the&amp;nbsp;alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;public&amp;nbsp;certificate&amp;nbsp;present&amp;nbsp;in&amp;nbsp;the&amp;nbsp;trust&amp;nbsp;store&amp;nbsp;that&amp;nbsp;is&amp;nbsp;used&amp;nbsp;to&amp;nbsp;encrypt&amp;nbsp;the&amp;nbsp;document!!discoiqbr!!&amp;nbsp;&amp;nbsp;recipient.setX509Cert("alias");!!discoiqbr!!&amp;nbsp;&amp;nbsp;/*!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;An&amp;nbsp;alternative&amp;nbsp;to&amp;nbsp;add&amp;nbsp;a&amp;nbsp;certificate&amp;nbsp;is&amp;nbsp;by&amp;nbsp;providing&amp;nbsp;the&amp;nbsp;alias!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;of&amp;nbsp;the&amp;nbsp;certificate&amp;nbsp;stored&amp;nbsp;in&amp;nbsp;AEM&amp;nbsp;trust&amp;nbsp;store.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;recipient.setAlias(alias);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;an&amp;nbsp;EncryptionIdentity&amp;nbsp;object!!discoiqbr!!&amp;nbsp;&amp;nbsp;CertificateEncryptionIdentity&amp;nbsp;encryptionId&amp;nbsp;=&amp;nbsp;new&amp;nbsp;CertificateEncryptionIdentity();&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;encryptionId.setPerms(permList);!!discoiqbr!!&amp;nbsp;&amp;nbsp;encryptionId.setRecipient(recipient);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Add&amp;nbsp;the&amp;nbsp;EncryptionIdentity&amp;nbsp;to&amp;nbsp;the&amp;nbsp;list!!discoiqbr!!&amp;nbsp;&amp;nbsp;pkiIdentities.add(encryptionId);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Set&amp;nbsp;encryption&amp;nbsp;run-time&amp;nbsp;options!!discoiqbr!!&amp;nbsp;&amp;nbsp;CertificateEncryptionOptionSpec&amp;nbsp;certOptionsSpec&amp;nbsp;=&amp;nbsp;new&amp;nbsp;CertificateEncryptionOptionSpec();&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;certOptionsSpec.setOption(CertificateEncryptionOption.ALL);!!discoiqbr!!&amp;nbsp;&amp;nbsp;certOptionsSpec.setCompat(CertificateEncryptionCompatibility.ACRO_9);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Set&amp;nbsp;the&amp;nbsp;certificate&amp;nbsp;encryption&amp;nbsp;option!!discoiqbr!!&amp;nbsp;&amp;nbsp;encryptionOptions.setCertOptionSpec(certOptionsSpec)!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Set&amp;nbsp;the&amp;nbsp;PKI&amp;nbsp;Identities&amp;nbsp;in&amp;nbsp;encryption&amp;nbsp;Options!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;encryptionOptions.setPkiIdentities(pkiIdentities);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;encryptionOptions;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;resourceResolver&amp;nbsp;corresponding&amp;nbsp;to&amp;nbsp;the&amp;nbsp;user&amp;nbsp;with&amp;nbsp;the&amp;nbsp;access&amp;nbsp;to&amp;nbsp;Reader&amp;nbsp;Extension&amp;nbsp;credential&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;for&amp;nbsp;the&amp;nbsp;given&amp;nbsp;alias&amp;nbsp;-"production"&amp;nbsp;in&amp;nbsp;this&amp;nbsp;case!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@return!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;private&amp;nbsp;ReaderExtensionOptions&amp;nbsp;getReaderExtensionOptions(ResourceResolver&amp;nbsp;resourceResolver){!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;an&amp;nbsp;instance&amp;nbsp;of&amp;nbsp;ReaderExtensionOptions!!discoiqbr!!&amp;nbsp;&amp;nbsp;ReaderExtensionOptions&amp;nbsp;reOptions&amp;nbsp;=&amp;nbsp;ReaderExtensionOptions.getInstance();!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;instance&amp;nbsp;for&amp;nbsp;UsageRights&amp;nbsp;to&amp;nbsp;be&amp;nbsp;enabled&amp;nbsp;in&amp;nbsp;the&amp;nbsp;reader!!discoiqbr!!&amp;nbsp;&amp;nbsp;UsageRights&amp;nbsp;uRights&amp;nbsp;=&amp;nbsp;new&amp;nbsp;UsageRights();!!discoiqbr!!&amp;nbsp;&amp;nbsp;//enabling&amp;nbsp;comments&amp;nbsp;in&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;Reader!!discoiqbr!!&amp;nbsp;&amp;nbsp;uRights.setEnabledComments(true);!!discoiqbr!!&amp;nbsp;&amp;nbsp;//setting&amp;nbsp;ReaderExtensionsOptionSpec&amp;nbsp;in&amp;nbsp;the&amp;nbsp;reOptions!!discoiqbr!!&amp;nbsp;&amp;nbsp;reOptions.setReOptions(new&amp;nbsp;ReaderExtensionsOptionSpec(uRights,&amp;nbsp;"Enable&amp;nbsp;commenting&amp;nbsp;in&amp;nbsp;PDF"));!!discoiqbr!!&amp;nbsp;&amp;nbsp;//alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;to&amp;nbsp;be&amp;nbsp;used&amp;nbsp;for&amp;nbsp;extending&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;Reader!!discoiqbr!!&amp;nbsp;&amp;nbsp;reOptions.setCredentialAlias("production");&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//corresponding&amp;nbsp;to&amp;nbsp;the&amp;nbsp;user&amp;nbsp;with&amp;nbsp;the&amp;nbsp;access&amp;nbsp;to&amp;nbsp;Reader&amp;nbsp;Extension&amp;nbsp;credential!!discoiqbr!!&amp;nbsp;&amp;nbsp;reOptions.setResourceResolver(resourceResolver);&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;return&amp;nbsp;reOptions;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;rr&amp;nbsp;resource&amp;nbsp;resolver&amp;nbsp;corresponding&amp;nbsp;to&amp;nbsp;the&amp;nbsp;user&amp;nbsp;with&amp;nbsp;the&amp;nbsp;access&amp;nbsp;to&amp;nbsp;signing&amp;nbsp;credential&amp;nbsp;for&amp;nbsp;the&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;given&amp;nbsp;alias&amp;nbsp;"allcertificatesanypolicytest11ee_new"&amp;nbsp;in&amp;nbsp;this&amp;nbsp;case!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@return&amp;nbsp;SignatureOptions!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;private&amp;nbsp;SignatureOptions&amp;nbsp;getSignatureOptions(ResourceResolver&amp;nbsp;rr){!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//create&amp;nbsp;an&amp;nbsp;instance&amp;nbsp;of&amp;nbsp;SignatureOptions!!discoiqbr!!&amp;nbsp;&amp;nbsp;SignatureOptions&amp;nbsp;signatureOptions&amp;nbsp;=&amp;nbsp;SignatureOptions.getInstance();!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//set&amp;nbsp;the&amp;nbsp;operation&amp;nbsp;you&amp;nbsp;want&amp;nbsp;to&amp;nbsp;perform&amp;nbsp;-&amp;nbsp;SIGN/CERTIFY!!discoiqbr!!&amp;nbsp;&amp;nbsp;signatureOptions.setOperationType(DocAssuranceServiceOperationTypes.SIGN);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//field&amp;nbsp;to&amp;nbsp;sign!!discoiqbr!!&amp;nbsp;&amp;nbsp;String&amp;nbsp;fieldName&amp;nbsp;=&amp;nbsp;"Signature1"&amp;nbsp;;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;private&amp;nbsp;credential&amp;nbsp;uploaded&amp;nbsp;on&amp;nbsp;the&amp;nbsp;Key&amp;nbsp;Store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;alias&amp;nbsp;=&amp;nbsp;"allcertificatesanypolicytest11ee_new";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Hash&amp;nbsp;Algo&amp;nbsp;to&amp;nbsp;be&amp;nbsp;used&amp;nbsp;to&amp;nbsp;compute&amp;nbsp;digest&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;HashAlgorithm&amp;nbsp;algo&amp;nbsp;=&amp;nbsp;HashAlgorithm.SHA384;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Reason&amp;nbsp;for&amp;nbsp;signing/certifying!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;reason&amp;nbsp;=&amp;nbsp;"Test&amp;nbsp;Reason";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//location&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signer!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;location&amp;nbsp;=&amp;nbsp;"Test&amp;nbsp;Location";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//contact&amp;nbsp;info&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signer!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;contactInfo&amp;nbsp;=&amp;nbsp;"Test&amp;nbsp;Contact";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;a&amp;nbsp;PDFSignatureAppearanceOptions&amp;nbsp;object&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//and&amp;nbsp;show&amp;nbsp;date&amp;nbsp;information!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PDFSignatureAppearenceOptions&amp;nbsp;appOptions&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PDFSignatureAppearenceOptions(!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PDFSignatureAppearanceType.NAME,&amp;nbsp;null,&amp;nbsp;1.0d,&amp;nbsp;null,&amp;nbsp;true,&amp;nbsp;true,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;true,&amp;nbsp;true,&amp;nbsp;true,&amp;nbsp;true,&amp;nbsp;true,&amp;nbsp;TextDirection.AUTO);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setSignatureFieldName(fieldName);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setAlgo(algo);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setContactInfo(contactInfo);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setLocation(location);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setSigAppearence(appOptions);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setReason(reason);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setDssPref(getDSSPreferences(rr));!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signatureOptions.setCredential(new&amp;nbsp;CredentialContext(alias,&amp;nbsp;rr));!!discoiqbr!!&amp;nbsp;&amp;nbsp;return&amp;nbsp;signatureOptions;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DSSPreferences&amp;nbsp;getDSSPreferences(ResourceResolver&amp;nbsp;rr){!!discoiqbr!!&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;DSS&amp;nbsp;Preferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;DSSPreferencesImpl&amp;nbsp;prefs&amp;nbsp;=&amp;nbsp;DSSPreferencesImpl.getInstance();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;prefs.setPKIPreferences(getPKIPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;GeneralPreferencesImpl&amp;nbsp;gp&amp;nbsp;=&amp;nbsp;(GeneralPreferencesImpl)&amp;nbsp;prefs.getPKIPreferences().getGeneralPreferences();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;gp.setDisableCache(true);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;prefs;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;PKIPreferences&amp;nbsp;getPKIPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;PKI&amp;nbsp;Preferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PKIPreferences&amp;nbsp;pkiPref&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PKIPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pkiPref.setCRLPreferences(getCRLPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pkiPref.setPathPreferences(getPathValidationPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;pkiPref;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;CRLPreferences&amp;nbsp;getCRLPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//specifies&amp;nbsp;the&amp;nbsp;CRL&amp;nbsp;Preferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;CRLPreferencesImpl&amp;nbsp;crlPrefs&amp;nbsp;=&amp;nbsp;new&amp;nbsp;CRLPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;crlPrefs.setRevocationCheck(RevocationCheckStyle.CheckIfAvailable);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;crlPrefs.setGoOnline(true);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;crlPrefs;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;PathValidationPreferences&amp;nbsp;getPathValidationPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;path&amp;nbsp;validation&amp;nbsp;preferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PathValidationPreferencesImpl&amp;nbsp;pathPref&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PathValidationPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pathPref.setDoValidation(false);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;pathPref;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!} 
  </codeblock> 
  <h4>Getting credential usage rights</h4> 
  <p>To fetch usage rights information of the credential specified by the given <span class="code">credentialAlias</span>, call this API from within the <span class="code">SecureDocument</span> API.</p> 
  <p><strong>Syntax</strong>: <span class="code">getCredentialUsageRights(String credentialAlias, ResourceResolver resourceResolver)</span></p> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">credentialAlias</span><br /> </td> 
     <td>The <span class="code">credentialAlias</span> that specifies the credential.<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">credentialPassword</span><br /> </td> 
     <td>The password of the credential if the credential is encrypted, null needs to be used if the credential is not encrypted.<br /> </td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following sample fetches usage rights information for the credential specified.</p> 
  <codeblock gutter="true" lineWrap="true" class="syntax java">
    /*************************************************************************!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;ADOBE&amp;nbsp;CONFIDENTIAL!!discoiqbr!!&amp;nbsp;*&amp;nbsp;__________________!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;Copyright&amp;nbsp;2014&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;All&amp;nbsp;Rights&amp;nbsp;Reserved.!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;NOTICE:&amp;nbsp;&amp;nbsp;All&amp;nbsp;information&amp;nbsp;contained&amp;nbsp;herein&amp;nbsp;is,&amp;nbsp;and&amp;nbsp;remains!!discoiqbr!!&amp;nbsp;*&amp;nbsp;the&amp;nbsp;property&amp;nbsp;of&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its&amp;nbsp;suppliers,!!discoiqbr!!&amp;nbsp;*&amp;nbsp;if&amp;nbsp;any.&amp;nbsp;&amp;nbsp;The&amp;nbsp;intellectual&amp;nbsp;and&amp;nbsp;technical&amp;nbsp;concepts&amp;nbsp;contained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;herein&amp;nbsp;are&amp;nbsp;proprietary&amp;nbsp;to&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its!!discoiqbr!!&amp;nbsp;*&amp;nbsp;suppliers&amp;nbsp;and&amp;nbsp;may&amp;nbsp;be&amp;nbsp;covered&amp;nbsp;by&amp;nbsp;U.S.&amp;nbsp;and&amp;nbsp;Foreign&amp;nbsp;Patents,!!discoiqbr!!&amp;nbsp;*&amp;nbsp;patents&amp;nbsp;in&amp;nbsp;process,&amp;nbsp;and&amp;nbsp;are&amp;nbsp;protected&amp;nbsp;by&amp;nbsp;trade&amp;nbsp;secret&amp;nbsp;or&amp;nbsp;copyright&amp;nbsp;law.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Dissemination&amp;nbsp;of&amp;nbsp;this&amp;nbsp;information&amp;nbsp;or&amp;nbsp;reproduction&amp;nbsp;of&amp;nbsp;this&amp;nbsp;material!!discoiqbr!!&amp;nbsp;*&amp;nbsp;is&amp;nbsp;strictly&amp;nbsp;forbidden&amp;nbsp;unless&amp;nbsp;prior&amp;nbsp;written&amp;nbsp;permission&amp;nbsp;is&amp;nbsp;obtained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;from&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated.!!discoiqbr!!&amp;nbsp;**************************************************************************/!!discoiqbr!!package&amp;nbsp;com.adobe.fd.readerextensions.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!import&amp;nbsp;org.apache.sling.api.resource.ResourceResolverFactory;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.ReaderExtensionOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.readerextensions.client.GetUsageRightsResult;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.readerextensions.client.ReaderExtensionsOptionSpec;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.readerextensions.client.UsageRights;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.UnlockOptions;!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!@Component(metatype&amp;nbsp;=&amp;nbsp;true,&amp;nbsp;immediate&amp;nbsp;=&amp;nbsp;true,&amp;nbsp;label&amp;nbsp;=&amp;nbsp;"ReaderExtensionsSampleService")!!discoiqbr!!@Service(value&amp;nbsp;=&amp;nbsp;ReaderExtensionsSampleService.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;ReaderExtensionsSampleService&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;@Reference(referenceInterface=DocAssuranceService.class)!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;@Reference(referenceInterface=ResourceResolverFactory.class)!!discoiqbr!!&amp;nbsp;private&amp;nbsp;ResourceResolverFactory&amp;nbsp;resourceResolverFactory;!!discoiqbr!!public&amp;nbsp;void&amp;nbsp;getCredentialUsageRights()&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;GetUsageRightsResult&amp;nbsp;usageRightsResult&amp;nbsp;=&amp;nbsp;docAssuranceService.getCredentialUsageRights("production",&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolverFactory.getAdministrativeResourceResolver(null));!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println("Credential&amp;nbsp;usage&amp;nbsp;Rights&amp;nbsp;are&amp;nbsp;as&amp;nbsp;follows");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(usageRightsResult.toString());!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(Exception&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!&amp;nbsp;&amp;nbsp;}&amp;nbsp;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!} 
  </codeblock> 
  <h4>Getting document usage rights</h4> 
  <p>To fetch usage rights information for a given document, call this API from within the <span class="code">docAssuranceService </span>API.</p> 
  <p><strong>Syntax</strong>: <span class="code">getDocumentUsageRights(Document inDocument, UnlockOptions unlockOptions)</span></p> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">inDocument</span><br /> </td> 
     <td>The document to fetch usage rights information from<br /> </td> 
    </tr> 
   </tbody> 
  </table> 
  <p>This following sample code returns the usage rights information for a document.</p> 
  <codeblock gutter="true" lineWrap="true" class="syntax java">
    /*************************************************************************!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;ADOBE&amp;nbsp;CONFIDENTIAL!!discoiqbr!!&amp;nbsp;*&amp;nbsp;__________________!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;Copyright&amp;nbsp;2014&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;All&amp;nbsp;Rights&amp;nbsp;Reserved.!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;NOTICE:&amp;nbsp;&amp;nbsp;All&amp;nbsp;information&amp;nbsp;contained&amp;nbsp;herein&amp;nbsp;is,&amp;nbsp;and&amp;nbsp;remains!!discoiqbr!!&amp;nbsp;*&amp;nbsp;the&amp;nbsp;property&amp;nbsp;of&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its&amp;nbsp;suppliers,!!discoiqbr!!&amp;nbsp;*&amp;nbsp;if&amp;nbsp;any.&amp;nbsp;&amp;nbsp;The&amp;nbsp;intellectual&amp;nbsp;and&amp;nbsp;technical&amp;nbsp;concepts&amp;nbsp;contained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;herein&amp;nbsp;are&amp;nbsp;proprietary&amp;nbsp;to&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its!!discoiqbr!!&amp;nbsp;*&amp;nbsp;suppliers&amp;nbsp;and&amp;nbsp;may&amp;nbsp;be&amp;nbsp;covered&amp;nbsp;by&amp;nbsp;U.S.&amp;nbsp;and&amp;nbsp;Foreign&amp;nbsp;Patents,!!discoiqbr!!&amp;nbsp;*&amp;nbsp;patents&amp;nbsp;in&amp;nbsp;process,&amp;nbsp;and&amp;nbsp;are&amp;nbsp;protected&amp;nbsp;by&amp;nbsp;trade&amp;nbsp;secret&amp;nbsp;or&amp;nbsp;copyright&amp;nbsp;law.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Dissemination&amp;nbsp;of&amp;nbsp;this&amp;nbsp;information&amp;nbsp;or&amp;nbsp;reproduction&amp;nbsp;of&amp;nbsp;this&amp;nbsp;material!!discoiqbr!!&amp;nbsp;*&amp;nbsp;is&amp;nbsp;strictly&amp;nbsp;forbidden&amp;nbsp;unless&amp;nbsp;prior&amp;nbsp;written&amp;nbsp;permission&amp;nbsp;is&amp;nbsp;obtained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;from&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated.!!discoiqbr!!&amp;nbsp;**************************************************************************/!!discoiqbr!!package&amp;nbsp;com.adobe.fd.readerextensions.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!import&amp;nbsp;java.util.HashMap;!!discoiqbr!!import&amp;nbsp;java.util.Map;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;javax.jcr.SimpleCredentials;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!import&amp;nbsp;org.apache.sling.api.resource.LoginException;!!discoiqbr!!import&amp;nbsp;org.apache.sling.api.resource.ResourceResolver;!!discoiqbr!!import&amp;nbsp;org.apache.sling.api.resource.ResourceResolverFactory;!!discoiqbr!!import&amp;nbsp;org.apache.sling.jcr.resource.JcrResourceConstants;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.ReaderExtensionOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.readerextensions.client.GetUsageRightsResult;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.readerextensions.client.ReaderExtensionsOptionSpec;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.readerextensions.client.UsageRights;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.UnlockOptions;!!discoiqbr!!!!discoiqbr!!@Component(metatype&amp;nbsp;=&amp;nbsp;true,&amp;nbsp;immediate&amp;nbsp;=&amp;nbsp;true,&amp;nbsp;label&amp;nbsp;=&amp;nbsp;"ReaderExtensionsSampleService")!!discoiqbr!!@Service(value&amp;nbsp;=&amp;nbsp;ReaderExtensionsSampleService.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;ReaderExtensionsSampleService&amp;nbsp;{!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference(referenceInterface=DocAssuranceService.class)!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference(referenceInterface=ResourceResolverFactory.class)!!discoiqbr!!private&amp;nbsp;ResourceResolverFactory&amp;nbsp;resourceResolverFactory;!!discoiqbr!!!!discoiqbr!!public&amp;nbsp;void&amp;nbsp;getDocumentUsageRights()&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inputDocument&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;//Name&amp;nbsp;of&amp;nbsp;the&amp;nbsp;input&amp;nbsp;file&amp;nbsp;on&amp;nbsp;which&amp;nbsp;usage&amp;nbsp;rights&amp;nbsp;is&amp;nbsp;to&amp;nbsp;be&amp;nbsp;applied.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;inputFileName&amp;nbsp;=&amp;nbsp;"C:/RETest/input/GetUsageRightsInfo/02_fromAcrobat7.0.8_Acro700_UB8_BS_signed_commenting.pdf";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;//Document&amp;nbsp;to&amp;nbsp;be&amp;nbsp;input&amp;nbsp;to&amp;nbsp;Doc&amp;nbsp;Assurance&amp;nbsp;Service!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;inputDocument&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(new&amp;nbsp;File(inputFileName));!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;//Unlock&amp;nbsp;options&amp;nbsp;to&amp;nbsp;unlock&amp;nbsp;the&amp;nbsp;document&amp;nbsp;if&amp;nbsp;some&amp;nbsp;kind&amp;nbsp;of&amp;nbsp;security&amp;nbsp;is&amp;nbsp;set&amp;nbsp;on&amp;nbsp;it.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;//Currently&amp;nbsp;set&amp;nbsp;to&amp;nbsp;null&amp;nbsp;because&amp;nbsp;input&amp;nbsp;document&amp;nbsp;has&amp;nbsp;no&amp;nbsp;security.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;UnlockOptions&amp;nbsp;unlockOptions&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;GetUsageRightsResult&amp;nbsp;usageRightsResult&amp;nbsp;=&amp;nbsp;docAssuranceService.getDocumentUsageRights(inputDocument,&amp;nbsp;unlockOptions);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println("Document&amp;nbsp;usage&amp;nbsp;Rights&amp;nbsp;are&amp;nbsp;as&amp;nbsp;follows");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(usageRightsResult.toString());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(Exception&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!&amp;nbsp;&amp;nbsp;}&amp;nbsp;finally&amp;nbsp;{!!discoiqbr!!//&amp;nbsp;&amp;nbsp;&amp;nbsp;if&amp;nbsp;(inputDocument&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!//&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inputDocument.dispose();&amp;nbsp;//dispose&amp;nbsp;off&amp;nbsp;the&amp;nbsp;document.!!discoiqbr!!//&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!}!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;Resource&amp;nbsp;resolver&amp;nbsp;of&amp;nbsp;the&amp;nbsp;user&amp;nbsp;in&amp;nbsp;whose&amp;nbsp;keystore&amp;nbsp;Reader&amp;nbsp;Extensions&amp;nbsp;Certificate&amp;nbsp;is&amp;nbsp;installed.!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;resourceResolverFactory!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@return!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;LoginException!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;public&amp;nbsp;ResourceResolver&amp;nbsp;getResourceResolver()&amp;nbsp;throws&amp;nbsp;LoginException{!!discoiqbr!!&amp;nbsp;&amp;nbsp;Map&lt;String,Object&gt;&amp;nbsp;authInfo&amp;nbsp;=&amp;nbsp;new&amp;nbsp;HashMap&lt;String,Object&gt;();!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Username&amp;nbsp;and&amp;nbsp;password&amp;nbsp;of&amp;nbsp;the&amp;nbsp;user&amp;nbsp;in&amp;nbsp;whose&amp;nbsp;keystore&amp;nbsp;Reader&amp;nbsp;Extensions&amp;nbsp;Certificate&amp;nbsp;is&amp;nbsp;installed!!discoiqbr!!&amp;nbsp;&amp;nbsp;SimpleCredentials&amp;nbsp;credentials&amp;nbsp;=&amp;nbsp;new&amp;nbsp;SimpleCredentials("username"/*UserName*/,&amp;nbsp;"password"/*Password*/.toCharArray());!!discoiqbr!!&amp;nbsp;&amp;nbsp;authInfo.put(JcrResourceConstants.AUTHENTICATION_INFO_CREDENTIALS,credentials);!!discoiqbr!!&amp;nbsp;&amp;nbsp;return&amp;nbsp;resourceResolverFactory.getResourceResolver(authInfo);!!discoiqbr!!}!!discoiqbr!!!!discoiqbr!!} 
  </codeblock> 
  <h4>Removing usage rights</h4> 
  <p>You can remove the usage rights for a document by calling the <span class="code">removeUsageRights </span>API from within the <span class="code">docAssuranceService </span>API.</p> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">inDocument</span><br /> </td> 
     <td>The document to remove usage rights from.<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">unlockOptions</span><br /> </td> 
     <td>Includes the parameters require to unlock an encrypted file. This is required only if the file is encrypted.<br /> </td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following sample removes the usage rights for a given document.</p> 
  <codeblock gutter="true" lineWrap="true" class="syntax java">
    /*************************************************************************!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;ADOBE&amp;nbsp;CONFIDENTIAL!!discoiqbr!!&amp;nbsp;*&amp;nbsp;__________________!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;Copyright&amp;nbsp;2014&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;All&amp;nbsp;Rights&amp;nbsp;Reserved.!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;NOTICE:&amp;nbsp;&amp;nbsp;All&amp;nbsp;information&amp;nbsp;contained&amp;nbsp;herein&amp;nbsp;is,&amp;nbsp;and&amp;nbsp;remains!!discoiqbr!!&amp;nbsp;*&amp;nbsp;the&amp;nbsp;property&amp;nbsp;of&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its&amp;nbsp;suppliers,!!discoiqbr!!&amp;nbsp;*&amp;nbsp;if&amp;nbsp;any.&amp;nbsp;&amp;nbsp;The&amp;nbsp;intellectual&amp;nbsp;and&amp;nbsp;technical&amp;nbsp;concepts&amp;nbsp;contained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;herein&amp;nbsp;are&amp;nbsp;proprietary&amp;nbsp;to&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its!!discoiqbr!!&amp;nbsp;*&amp;nbsp;suppliers&amp;nbsp;and&amp;nbsp;may&amp;nbsp;be&amp;nbsp;covered&amp;nbsp;by&amp;nbsp;U.S.&amp;nbsp;and&amp;nbsp;Foreign&amp;nbsp;Patents,!!discoiqbr!!&amp;nbsp;*&amp;nbsp;patents&amp;nbsp;in&amp;nbsp;process,&amp;nbsp;and&amp;nbsp;are&amp;nbsp;protected&amp;nbsp;by&amp;nbsp;trade&amp;nbsp;secret&amp;nbsp;or&amp;nbsp;copyright&amp;nbsp;law.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Dissemination&amp;nbsp;of&amp;nbsp;this&amp;nbsp;information&amp;nbsp;or&amp;nbsp;reproduction&amp;nbsp;of&amp;nbsp;this&amp;nbsp;material!!discoiqbr!!&amp;nbsp;*&amp;nbsp;is&amp;nbsp;strictly&amp;nbsp;forbidden&amp;nbsp;unless&amp;nbsp;prior&amp;nbsp;written&amp;nbsp;permission&amp;nbsp;is&amp;nbsp;obtained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;from&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated.!!discoiqbr!!&amp;nbsp;**************************************************************************/!!discoiqbr!!package&amp;nbsp;com.adobe.fd.readerextensions.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!import&amp;nbsp;java.util.HashMap;!!discoiqbr!!import&amp;nbsp;java.util.Map;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;javax.jcr.SimpleCredentials;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!import&amp;nbsp;org.apache.sling.api.resource.LoginException;!!discoiqbr!!import&amp;nbsp;org.apache.sling.api.resource.ResourceResolver;!!discoiqbr!!import&amp;nbsp;org.apache.sling.api.resource.ResourceResolverFactory;!!discoiqbr!!import&amp;nbsp;org.apache.sling.jcr.resource.JcrResourceConstants;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.ReaderExtensionOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.readerextensions.client.GetUsageRightsResult;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.readerextensions.client.ReaderExtensionsOptionSpec;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.readerextensions.client.UsageRights;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.UnlockOptions;!!discoiqbr!!!!discoiqbr!!@Component(metatype&amp;nbsp;=&amp;nbsp;true,&amp;nbsp;immediate&amp;nbsp;=&amp;nbsp;true,&amp;nbsp;label&amp;nbsp;=&amp;nbsp;"ReaderExtensionsSampleService")!!discoiqbr!!@Service(value&amp;nbsp;=&amp;nbsp;ReaderExtensionsSampleService.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;ReaderExtensionsSampleService&amp;nbsp;{!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference(referenceInterface=DocAssuranceService.class)!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference(referenceInterface=ResourceResolverFactory.class)!!discoiqbr!!private&amp;nbsp;ResourceResolverFactory&amp;nbsp;resourceResolverFactory;!!discoiqbr!!!!discoiqbr!!public&amp;nbsp;void&amp;nbsp;removeDocumentUsageRights()&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inputDocument&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;outDocument&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;//Name&amp;nbsp;of&amp;nbsp;the&amp;nbsp;input&amp;nbsp;file&amp;nbsp;on&amp;nbsp;which&amp;nbsp;usage&amp;nbsp;rights&amp;nbsp;is&amp;nbsp;to&amp;nbsp;be&amp;nbsp;applied.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;inputFileName&amp;nbsp;=&amp;nbsp;"C:/RETest/input/RemoveUsageRights/01_Ubiquitized_50-267_PDF1.5_UB2_Rights.pdf";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;//Name&amp;nbsp;of&amp;nbsp;the&amp;nbsp;output&amp;nbsp;file&amp;nbsp;where&amp;nbsp;result&amp;nbsp;will&amp;nbsp;be&amp;nbsp;saved.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;outputFileName&amp;nbsp;=&amp;nbsp;"C:/RETest/output/samples/removeUsageRightsOutput.pdf";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;//Document&amp;nbsp;to&amp;nbsp;be&amp;nbsp;input&amp;nbsp;to&amp;nbsp;Doc&amp;nbsp;Assurance&amp;nbsp;Service!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;inputDocument&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(new&amp;nbsp;File(inputFileName));!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;//Unlock&amp;nbsp;options&amp;nbsp;to&amp;nbsp;unlock&amp;nbsp;the&amp;nbsp;document&amp;nbsp;if&amp;nbsp;some&amp;nbsp;kind&amp;nbsp;of&amp;nbsp;security&amp;nbsp;is&amp;nbsp;set&amp;nbsp;on&amp;nbsp;it.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;//Currently&amp;nbsp;set&amp;nbsp;to&amp;nbsp;null&amp;nbsp;because&amp;nbsp;input&amp;nbsp;document&amp;nbsp;has&amp;nbsp;no&amp;nbsp;security.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;UnlockOptions&amp;nbsp;unlockOptions&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;//Specify&amp;nbsp;null&amp;nbsp;encryption&amp;nbsp;options&amp;nbsp;and&amp;nbsp;signatures&amp;nbsp;options.&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;//If&amp;nbsp;requirement&amp;nbsp;is&amp;nbsp;also&amp;nbsp;to&amp;nbsp;encrypt&amp;nbsp;and&amp;nbsp;sign&amp;nbsp;the&amp;nbsp;document&amp;nbsp;then,&amp;nbsp;corresponding&amp;nbsp;options&amp;nbsp;can&amp;nbsp;also&amp;nbsp;be&amp;nbsp;specified.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;outDocument&amp;nbsp;=&amp;nbsp;docAssuranceService.removeUsageRights(inputDocument,&amp;nbsp;unlockOptions);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;outputdir&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File("C:/RETest/output/samples");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;outputdir.mkdirs();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;outDocument.copyToFile(new&amp;nbsp;File(outputFileName));!!discoiqbr!!&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(Exception&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!&amp;nbsp;&amp;nbsp;}&amp;nbsp;!!discoiqbr!!}!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;Resource&amp;nbsp;resolver&amp;nbsp;of&amp;nbsp;the&amp;nbsp;user&amp;nbsp;in&amp;nbsp;whose&amp;nbsp;keystore&amp;nbsp;Reader&amp;nbsp;Extensions&amp;nbsp;Certificate&amp;nbsp;is&amp;nbsp;installed.!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;resourceResolverFactory!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@return!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;LoginException!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;public&amp;nbsp;ResourceResolver&amp;nbsp;getResourceResolver()&amp;nbsp;throws&amp;nbsp;LoginException{!!discoiqbr!!&amp;nbsp;&amp;nbsp;Map&lt;String,Object&gt;&amp;nbsp;authInfo&amp;nbsp;=&amp;nbsp;new&amp;nbsp;HashMap&lt;String,Object&gt;();!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Username&amp;nbsp;and&amp;nbsp;password&amp;nbsp;of&amp;nbsp;the&amp;nbsp;user&amp;nbsp;in&amp;nbsp;whose&amp;nbsp;keystore&amp;nbsp;Reader&amp;nbsp;Extensions&amp;nbsp;Certificate&amp;nbsp;is&amp;nbsp;installed!!discoiqbr!!&amp;nbsp;&amp;nbsp;SimpleCredentials&amp;nbsp;credentials&amp;nbsp;=&amp;nbsp;new&amp;nbsp;SimpleCredentials("username"/*UserName*/,&amp;nbsp;"password"/*Password*/.toCharArray());!!discoiqbr!!&amp;nbsp;&amp;nbsp;authInfo.put(JcrResourceConstants.AUTHENTICATION_INFO_CREDENTIALS,credentials);!!discoiqbr!!&amp;nbsp;&amp;nbsp;return&amp;nbsp;resourceResolverFactory.getResourceResolver(authInfo);!!discoiqbr!!}!!discoiqbr!!!!discoiqbr!!} 
  </codeblock> 
  <h4>Verifying digital signatures</h4> 
  <p>Digital signatures can be verified to ensure that a signed PDF document was not modified and that the digital signature is valid. When verifying a digital signature, you can check the signature's status and the signature's properties, such as the signer's identity. Before trusting a digital signature, it is recommended that you verify it. When verifying a digital signature, reference a PDF document that contains a digital signature.</p> 
  <p style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;"><strong>Syntax</strong>: <span class="code">verify( inDoc, signatureFieldName, revocationCheckStyle, verificationTime, dssPrefs, ResourceResolver resourceResolver)</span></p> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">inDoc</span><br /> </td> 
     <td>Document object containing PDF<br /> </td> 
    </tr> 
    <tr> 
     <td><code class="code">signatureField
       <discoiqbr /> Name</code><br /> </td> 
     <td>The name of the signature field to be validated. either fully qualified name or partial name can be given<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">revocationCheckStyle</span></td> 
     <td>The option to govern the revocation checking of the certificates encountered during validation</td> 
    </tr> 
    <tr> 
     <td><span class="code">verificationTime</span></td> 
     <td>The time at which the signature should be validated</td> 
    </tr> 
    <tr> 
     <td><span class="code">dssPrefs</span></td> 
     <td>Preferences to control various validation configurations. For an encrypted document, set unlock options by using <span class="code">setUnlockOptions()</span></td> 
    </tr> 
    <tr> 
     <td><span class="code">resourceResolver</span></td> 
     <td>Resource resolver to the granite trust store</td> 
    </tr> 
   </tbody> 
  </table> 
  <p>This sample code uses <span class="code">DocAssuranceService</span> to verify a signature field in an encrypted PDF document.</p> 
  <codeblock gutter="true" lineWrap="true" class="syntax java">
    /*************************************************************************!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!-------------------------------------------------------------!!discoiqbr!!*ADOBE&amp;nbsp;SYSTEMS&amp;nbsp;INCORPORATED!!discoiqbr!!*Copyright&amp;nbsp;2014&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated!!discoiqbr!!*All&amp;nbsp;Rights&amp;nbsp;Reserved.!!discoiqbr!!!!discoiqbr!!*NOTICE:&amp;nbsp;&amp;nbsp;Adobe&amp;nbsp;permits&amp;nbsp;you&amp;nbsp;to&amp;nbsp;use,&amp;nbsp;modify,&amp;nbsp;and&amp;nbsp;distribute&amp;nbsp;this&amp;nbsp;file&amp;nbsp;in&amp;nbsp;accordance&amp;nbsp;with&amp;nbsp;the&amp;nbsp;!!discoiqbr!!*terms&amp;nbsp;of&amp;nbsp;the&amp;nbsp;Adobe&amp;nbsp;license&amp;nbsp;agreement&amp;nbsp;accompanying&amp;nbsp;it.&amp;nbsp;&amp;nbsp;If&amp;nbsp;you&amp;nbsp;have&amp;nbsp;received&amp;nbsp;this&amp;nbsp;file&amp;nbsp;from&amp;nbsp;a&amp;nbsp;!!discoiqbr!!*source&amp;nbsp;other&amp;nbsp;than&amp;nbsp;Adobe,&amp;nbsp;then&amp;nbsp;your&amp;nbsp;use,&amp;nbsp;modification,&amp;nbsp;or&amp;nbsp;distribution&amp;nbsp;of&amp;nbsp;it&amp;nbsp;requires&amp;nbsp;the&amp;nbsp;prior&amp;nbsp;!!discoiqbr!!*written&amp;nbsp;permission&amp;nbsp;of&amp;nbsp;Adobe.!!discoiqbr!!-------------------------------------------------------------------------------------------------!!discoiqbr!!!!discoiqbr!!&amp;nbsp;**************************************************************************/!!discoiqbr!!package&amp;nbsp;com.adobe.docassurance.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!import&amp;nbsp;java.io.IOException;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;javax.jcr.RepositoryException;!!discoiqbr!!import&amp;nbsp;javax.jcr.Session;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!import&amp;nbsp;org.apache.sling.api.resource.ResourceResolver;!!discoiqbr!!import&amp;nbsp;org.apache.sling.jcr.api.SlingRepository;!!discoiqbr!!import&amp;nbsp;org.apache.sling.jcr.resource.JcrResourceResolverFactory;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.IdentityInformation;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.IdentityStatus;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.PDFSignatureType;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.PDFSignatureVerificationInfo;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.SignatureProperties;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.SignatureStatus;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.SignatureType;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.VerificationTime;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.InvalidArgumentException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.UnlockOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.ValidationPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.ValidationPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.common.RevocationCheckStyle;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.CRLPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.CRLPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.OCSPPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PKIPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PKIPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PathValidationPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PathValidationPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.TSPPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.TSPPreferencesImpl;!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;This&amp;nbsp;class&amp;nbsp;provides&amp;nbsp;a&amp;nbsp;sample&amp;nbsp;code&amp;nbsp;to&amp;nbsp;use&amp;nbsp;{@code&amp;nbsp;DocAssuranceService}&amp;nbsp;to&amp;nbsp;carry&amp;nbsp;out!!discoiqbr!!&amp;nbsp;*&amp;nbsp;verification&amp;nbsp;of&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;in&amp;nbsp;an&amp;nbsp;already&amp;nbsp;Encrypted&amp;nbsp;PDF&amp;nbsp;Document!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Digital&amp;nbsp;signatures&amp;nbsp;can&amp;nbsp;be&amp;nbsp;verified&amp;nbsp;to&amp;nbsp;ensure&amp;nbsp;that&amp;nbsp;a&amp;nbsp;signed&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;was&amp;nbsp;not&amp;nbsp;modified&amp;nbsp;and&amp;nbsp;that&amp;nbsp;the&amp;nbsp;digital&amp;nbsp;signature&amp;nbsp;is&amp;nbsp;valid.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;When&amp;nbsp;verifying&amp;nbsp;a&amp;nbsp;digital&amp;nbsp;signature,&amp;nbsp;you&amp;nbsp;can&amp;nbsp;check&amp;nbsp;the&amp;nbsp;signature's&amp;nbsp;status&amp;nbsp;and&amp;nbsp;the&amp;nbsp;signature's&amp;nbsp;properties,&amp;nbsp;such&amp;nbsp;as&amp;nbsp;the&amp;nbsp;signer's&amp;nbsp;identity.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Before&amp;nbsp;trusting&amp;nbsp;a&amp;nbsp;digital&amp;nbsp;signature,&amp;nbsp;it&amp;nbsp;is&amp;nbsp;recommended&amp;nbsp;that&amp;nbsp;you&amp;nbsp;verify&amp;nbsp;it.&amp;nbsp;When&amp;nbsp;verifying&amp;nbsp;a&amp;nbsp;digital&amp;nbsp;signature,&amp;nbsp;reference&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;that&amp;nbsp;contains&amp;nbsp;a&amp;nbsp;digital&amp;nbsp;signature.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;For&amp;nbsp;unprotected&amp;nbsp;document,&amp;nbsp;you&amp;nbsp;are&amp;nbsp;not&amp;nbsp;required&amp;nbsp;to&amp;nbsp;set&amp;nbsp;UnlockOptions&amp;nbsp;in&amp;nbsp;ValidationPreferences!!discoiqbr!!&amp;nbsp;*&amp;nbsp;PreRequisites&amp;nbsp;-&amp;nbsp;The&amp;nbsp;certificate&amp;nbsp;chain&amp;nbsp;upto&amp;nbsp;the&amp;nbsp;Root&amp;nbsp;Certificate&amp;nbsp;should&amp;nbsp;be&amp;nbsp;uploaded&amp;nbsp;on&amp;nbsp;CQ&amp;nbsp;trust&amp;nbsp;Store!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!!!discoiqbr!!@Component!!discoiqbr!!@Service(value=VerifyFieldEncryptedPDF.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;VerifyFieldEncryptedPDF&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;SlingRepository&amp;nbsp;slingRepository;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;JcrResourceResolverFactory&amp;nbsp;jcrResourceResolverFactory&amp;nbsp;;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;inputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;an&amp;nbsp;encrypted&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;JCR&amp;nbsp;node&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;IOException!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;RepositoryException!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;InvalidArgumentException!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;DocAssuranceException!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;public&amp;nbsp;void&amp;nbsp;verifyFieldEncryptedPDF(String&amp;nbsp;inputFile,String&amp;nbsp;fieldName)&amp;nbsp;throws&amp;nbsp;IOException,&amp;nbsp;RepositoryException,&amp;nbsp;InvalidArgumentException,&amp;nbsp;DocAssuranceException{!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;inFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;Session&amp;nbsp;adminSession&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ResourceResolver&amp;nbsp;resourceResolver&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//the&amp;nbsp;resource&amp;nbsp;resolver&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;corresponding&amp;nbsp;to&amp;nbsp;the&amp;nbsp;user&amp;nbsp;who&amp;nbsp;has&amp;nbsp;access&amp;nbsp;to&amp;nbsp;CQ&amp;nbsp;Trust&amp;nbsp;Store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;adminSession&amp;nbsp;=&amp;nbsp;slingRepository.loginAdministrative(null);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver&amp;nbsp;=&amp;nbsp;jcrResourceResolverFactory.getResourceResolver(adminSession);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Specify&amp;nbsp;the&amp;nbsp;name&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RevocationCheckStyle&amp;nbsp;revocationCheckStyle&amp;nbsp;=&amp;nbsp;RevocationCheckStyle.AlwaysCheck;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;VerificationTime&amp;nbsp;verificationTime&amp;nbsp;=&amp;nbsp;VerificationTime.CURRENT_TIME;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ValidationPreferences&amp;nbsp;dssPrefs&amp;nbsp;=&amp;nbsp;getValidationPreferences();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Verify&amp;nbsp;the&amp;nbsp;digital&amp;nbsp;signature!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PDFSignatureVerificationInfo&amp;nbsp;&amp;nbsp;signInfo&amp;nbsp;=&amp;nbsp;docAssuranceService.verify(!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fieldName,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;revocationCheckStyle,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;verificationTime,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;dssPrefs,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Get&amp;nbsp;the&amp;nbsp;Signature&amp;nbsp;Status!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SignatureStatus&amp;nbsp;sigStatus&amp;nbsp;=&amp;nbsp;signInfo.getStatus();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;myStatus="";&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Determine&amp;nbsp;the&amp;nbsp;status&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.DynamicFormSignatureUnknown)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"The&amp;nbsp;signatures&amp;nbsp;located&amp;nbsp;in&amp;nbsp;the&amp;nbsp;dynamic&amp;nbsp;PDF&amp;nbsp;form&amp;nbsp;are&amp;nbsp;unknown";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.DocumentSignatureUnknown)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"The&amp;nbsp;signatures&amp;nbsp;located&amp;nbsp;in&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;are&amp;nbsp;unknown";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.CertifiedDynamicFormSignatureTamper)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"The&amp;nbsp;signatures&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;certified&amp;nbsp;PDF&amp;nbsp;form&amp;nbsp;are&amp;nbsp;valid";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.SignedDynamicFormSignatureTamper)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"The&amp;nbsp;signatures&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;signed&amp;nbsp;dynamic&amp;nbsp;PDF&amp;nbsp;form&amp;nbsp;are&amp;nbsp;valid";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.CertifiedDocumentSignatureTamper)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"The&amp;nbsp;signatures&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;certified&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;are&amp;nbsp;valid";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.SignedDocumentSignatureTamper)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"The&amp;nbsp;signatures&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;signed&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;are&amp;nbsp;valid";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.SignatureFormatError)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"The&amp;nbsp;format&amp;nbsp;of&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;in&amp;nbsp;a&amp;nbsp;signed&amp;nbsp;document&amp;nbsp;is&amp;nbsp;invalid";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.DynamicFormSigNoChanges)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"No&amp;nbsp;changes&amp;nbsp;were&amp;nbsp;made&amp;nbsp;to&amp;nbsp;the&amp;nbsp;signed&amp;nbsp;dynamic&amp;nbsp;PDF&amp;nbsp;form";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.DocumentSigNoChanges)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"No&amp;nbsp;changes&amp;nbsp;were&amp;nbsp;made&amp;nbsp;to&amp;nbsp;the&amp;nbsp;signed&amp;nbsp;PDF&amp;nbsp;document";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.DynamicFormCertificationSigNoChanges)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"No&amp;nbsp;changes&amp;nbsp;were&amp;nbsp;made&amp;nbsp;to&amp;nbsp;the&amp;nbsp;certified&amp;nbsp;dynamic&amp;nbsp;PDF&amp;nbsp;form";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.DocumentCertificationSigNoChanges)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"No&amp;nbsp;changes&amp;nbsp;were&amp;nbsp;made&amp;nbsp;to&amp;nbsp;the&amp;nbsp;certified&amp;nbsp;PDF&amp;nbsp;document";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.DocSigWithChanges)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"There&amp;nbsp;were&amp;nbsp;changes&amp;nbsp;to&amp;nbsp;a&amp;nbsp;signed&amp;nbsp;PDF&amp;nbsp;document";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.CertificationSigWithChanges)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"There&amp;nbsp;were&amp;nbsp;changes&amp;nbsp;made&amp;nbsp;to&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document.";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Get&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;type!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SignatureType&amp;nbsp;sigType&amp;nbsp;=&amp;nbsp;signInfo.getSignatureType();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;myType&amp;nbsp;=&amp;nbsp;"";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&amp;nbsp;(sigType.getType()&amp;nbsp;==&amp;nbsp;PDFSignatureType.AUTHORSIG)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myType="Certification";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if(sigType.getType()&amp;nbsp;==&amp;nbsp;PDFSignatureType.RECIPIENTSIG)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myType="Recipient";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Get&amp;nbsp;the&amp;nbsp;identity&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signer!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;IdentityInformation&amp;nbsp;signerId&amp;nbsp;=&amp;nbsp;signInfo.getSigner();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;signerMsg&amp;nbsp;=&amp;nbsp;"";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&amp;nbsp;(signerId.getStatus()&amp;nbsp;==&amp;nbsp;IdentityStatus.UNKNOWN)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signerMsg&amp;nbsp;=&amp;nbsp;"Identity&amp;nbsp;Unknown";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(signerId.getStatus()&amp;nbsp;==&amp;nbsp;IdentityStatus.TRUSTED)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signerMsg&amp;nbsp;=&amp;nbsp;"Identity&amp;nbsp;Trusted";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(signerId.getStatus()&amp;nbsp;==&amp;nbsp;IdentityStatus.NOTTRUSTED)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;signerMsg&amp;nbsp;=&amp;nbsp;"Identity&amp;nbsp;Not&amp;nbsp;Trusted";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Get&amp;nbsp;the&amp;nbsp;Signature&amp;nbsp;properties&amp;nbsp;returned&amp;nbsp;by&amp;nbsp;the&amp;nbsp;Signature&amp;nbsp;service!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SignatureProperties&amp;nbsp;sigProps&amp;nbsp;=&amp;nbsp;signInfo.getSignatureProps();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;signerName&amp;nbsp;=&amp;nbsp;&amp;nbsp;sigProps.getSignerName();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println("The&amp;nbsp;status&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;is:&amp;nbsp;"+myStatus&amp;nbsp;+".&amp;nbsp;The&amp;nbsp;signer&amp;nbsp;identity&amp;nbsp;is&amp;nbsp;"+signerMsg&amp;nbsp;+".&amp;nbsp;The&amp;nbsp;signature&amp;nbsp;type&amp;nbsp;is&amp;nbsp;"+myType&amp;nbsp;+".&amp;nbsp;The&amp;nbsp;name&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signer&amp;nbsp;is&amp;nbsp;"+signerName+".");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;catch&amp;nbsp;(Exception&amp;nbsp;ee)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ee.printStackTrace();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;finally{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;always&amp;nbsp;close&amp;nbsp;the&amp;nbsp;PDFDocument&amp;nbsp;object&amp;nbsp;after&amp;nbsp;your&amp;nbsp;processing&amp;nbsp;is&amp;nbsp;done.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(inDoc&amp;nbsp;!=&amp;nbsp;null){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc.close();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(adminSession&amp;nbsp;!=&amp;nbsp;null&amp;nbsp;&amp;&amp;&amp;nbsp;adminSession.isLive()){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(resourceResolver&amp;nbsp;!=&amp;nbsp;null){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver.close();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;adminSession.logout();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;ValidationPreferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;private&amp;nbsp;static&amp;nbsp;ValidationPreferences&amp;nbsp;getValidationPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ValidationPreferencesImpl&amp;nbsp;prefs&amp;nbsp;=&amp;nbsp;new&amp;nbsp;ValidationPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;prefs.setPKIPreferences(getPKIPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//set&amp;nbsp;the&amp;nbsp;unlock&amp;nbsp;options&amp;nbsp;for&amp;nbsp;processing&amp;nbsp;an&amp;nbsp;encrypted&amp;nbsp;pdf&amp;nbsp;document,&amp;nbsp;do&amp;nbsp;not&amp;nbsp;set&amp;nbsp;if&amp;nbsp;the&amp;nbsp;input&amp;nbsp;doc&amp;nbsp;is&amp;nbsp;unprotected!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;prefs.setUnlockOptions(getUnlockOptions());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;prefs;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;PKIPreferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;static&amp;nbsp;PKIPreferences&amp;nbsp;getPKIPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PKIPreferences&amp;nbsp;pkiPref&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PKIPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pkiPref.setCRLPreferences(getCRLPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pkiPref.setPathPreferences(getPathValidationPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pkiPref.setOCSPPreferences(getOCSPPref());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pkiPref.setTSPPreferences(getTspPref());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;pkiPref;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;static&amp;nbsp;TSPPreferences&amp;nbsp;getTspPref(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;TSPPreferencesImpl&amp;nbsp;tsp&amp;nbsp;=&amp;nbsp;new&amp;nbsp;TSPPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;tsp.setRevocationCheck(RevocationCheckStyle.BestEffort);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;tsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;static&amp;nbsp;OCSPPreferencesImpl&amp;nbsp;getOCSPPref(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;OCSPPreferencesImpl&amp;nbsp;ocsp&amp;nbsp;=&amp;nbsp;new&amp;nbsp;OCSPPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ocsp.setRevocationCheck(RevocationCheckStyle.BestEffort);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;ocsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;CRL&amp;nbsp;Preferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;static&amp;nbsp;CRLPreferences&amp;nbsp;getCRLPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;CRLPreferencesImpl&amp;nbsp;crlPrefs&amp;nbsp;=&amp;nbsp;new&amp;nbsp;CRLPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;crlPrefs.setRevocationCheck(RevocationCheckStyle.BestEffort);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;crlPrefs.setGoOnline(true);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;crlPrefs;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;PathValidationPreferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;static&amp;nbsp;PathValidationPreferences&amp;nbsp;getPathValidationPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PathValidationPreferencesImpl&amp;nbsp;pathPref&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PathValidationPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pathPref.setDoValidation(true);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;pathPref;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;for&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;static&amp;nbsp;UnlockOptions&amp;nbsp;getUnlockOptions(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;UnlockOptions&amp;nbsp;unlockOptions&amp;nbsp;=&amp;nbsp;new&amp;nbsp;UnlockOptions();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;Open&amp;nbsp;Password&amp;nbsp;for&amp;nbsp;password&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unlockOptions.setPassword("OpenPassword");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;Certificate&amp;nbsp;Encrypted&amp;nbsp;Document,&amp;nbsp;set&amp;nbsp;the&amp;nbsp;alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;uploaded&amp;nbsp;in&amp;nbsp;the&amp;nbsp;user's&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//and&amp;nbsp;corresponding&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;unlockOptions;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!} 
  </codeblock> 
  <h4>Verifying multiple digital signatures</h4> 
  <p>AEM lets you verify digital signatures in PDF documents. A PDF document can contain multiple digital signatures if it is subjected to a business process that requires signatures from multiple signers. For example, a financial transaction requires signatures of both the loan officer and the manager. You can use the Signature service API to verify all signatures within the PDF document. When verifying multiple digital signatures, you can check the status and properties of each signature. Before you trust a digital signature, Adobe recommends that you verify it.</p> 
  <p><strong>Syntax</strong>: <span class="code">verifyDocument(Document doc, RevocationCheckStyle revocationCheckStyle, VerificationTime verificationTime, ValidationPreferences prefStore, ResourceResolver resourceResolver)</span></p> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">inDoc</span><br /> </td> 
     <td>Document object containing PDF<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">revocationCheckStyle</span></td> 
     <td>The option to govern the revocation checking of the certificates encountered during validation</td> 
    </tr> 
    <tr> 
     <td><span class="code">verificationTime</span></td> 
     <td>The time at which the signature should be validated</td> 
    </tr> 
    <tr> 
     <td><span class="code">dssPrefs</span></td> 
     <td>Preferences to control various validation configurations. For an encrypted document, set unlock options by using <span class="code">setUnlockOptions()</span></td> 
    </tr> 
    <tr> 
     <td><span class="code">resourceResolver</span></td> 
     <td>Resource resolver to the granite trust store</td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following sample code uses DocAssuranceService to verify the signature fields in an already encrypted PDF document.</p> 
  <codeblock gutter="true" lineWrap="true" class="syntax java">
    /*************************************************************************!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;&amp;nbsp;*!!discoiqbr!!-------------------------------------------------------------!!discoiqbr!!*ADOBE&amp;nbsp;SYSTEMS&amp;nbsp;INCORPORATED!!discoiqbr!!*Copyright&amp;nbsp;2014&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated!!discoiqbr!!*All&amp;nbsp;Rights&amp;nbsp;Reserved.!!discoiqbr!!!!discoiqbr!!*NOTICE:&amp;nbsp;&amp;nbsp;Adobe&amp;nbsp;permits&amp;nbsp;you&amp;nbsp;to&amp;nbsp;use,&amp;nbsp;modify,&amp;nbsp;and&amp;nbsp;distribute&amp;nbsp;this&amp;nbsp;file&amp;nbsp;in&amp;nbsp;accordance&amp;nbsp;with&amp;nbsp;the&amp;nbsp;!!discoiqbr!!*terms&amp;nbsp;of&amp;nbsp;the&amp;nbsp;Adobe&amp;nbsp;license&amp;nbsp;agreement&amp;nbsp;accompanying&amp;nbsp;it.&amp;nbsp;&amp;nbsp;If&amp;nbsp;you&amp;nbsp;have&amp;nbsp;received&amp;nbsp;this&amp;nbsp;file&amp;nbsp;from&amp;nbsp;a&amp;nbsp;!!discoiqbr!!*source&amp;nbsp;other&amp;nbsp;than&amp;nbsp;Adobe,&amp;nbsp;then&amp;nbsp;your&amp;nbsp;use,&amp;nbsp;modification,&amp;nbsp;or&amp;nbsp;distribution&amp;nbsp;of&amp;nbsp;it&amp;nbsp;requires&amp;nbsp;the&amp;nbsp;prior&amp;nbsp;!!discoiqbr!!*written&amp;nbsp;permission&amp;nbsp;of&amp;nbsp;Adobe.!!discoiqbr!!-------------------------------------------------------------------------------------------------!!discoiqbr!!!!discoiqbr!!&amp;nbsp;**************************************************************************/!!discoiqbr!!package&amp;nbsp;com.adobe.docassurance.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!import&amp;nbsp;java.io.IOException;!!discoiqbr!!import&amp;nbsp;java.util.Iterator;!!discoiqbr!!import&amp;nbsp;java.util.List;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;javax.jcr.RepositoryException;!!discoiqbr!!import&amp;nbsp;javax.jcr.Session;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!import&amp;nbsp;org.apache.sling.api.resource.ResourceResolver;!!discoiqbr!!import&amp;nbsp;org.apache.sling.jcr.api.SlingRepository;!!discoiqbr!!import&amp;nbsp;org.apache.sling.jcr.resource.JcrResourceResolverFactory;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.PDFDocumentVerificationInfo;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.PDFSignatureType;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.PDFSignatureVerificationInfo;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.SignatureProperties;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.SignatureStatus;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.SignatureType;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.VerificationTime;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.InvalidArgumentException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.UnlockOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.ValidationPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.ValidationPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.common.RevocationCheckStyle;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.CRLPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.CRLPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PKIPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PKIPreferencesImpl;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PathValidationPreferences;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pki.client.types.prefs.PathValidationPreferencesImpl;!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;This&amp;nbsp;class&amp;nbsp;provides&amp;nbsp;a&amp;nbsp;sample&amp;nbsp;code&amp;nbsp;to&amp;nbsp;use&amp;nbsp;{@code&amp;nbsp;DocAssuranceService}&amp;nbsp;to&amp;nbsp;carry&amp;nbsp;out!!discoiqbr!!&amp;nbsp;*&amp;nbsp;verification&amp;nbsp;of&amp;nbsp;all&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;fields&amp;nbsp;in&amp;nbsp;an&amp;nbsp;already&amp;nbsp;Encrypted&amp;nbsp;PDF&amp;nbsp;Document!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Assume&amp;nbsp;that&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;contains&amp;nbsp;multiple&amp;nbsp;digital&amp;nbsp;signatures&amp;nbsp;as&amp;nbsp;a&amp;nbsp;result&amp;nbsp;of&amp;nbsp;a&amp;nbsp;business&amp;nbsp;process&amp;nbsp;that&amp;nbsp;requires&amp;nbsp;signatures&amp;nbsp;from&amp;nbsp;multiple&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;signers.&amp;nbsp;For&amp;nbsp;example,&amp;nbsp;consider&amp;nbsp;a&amp;nbsp;financial&amp;nbsp;transaction&amp;nbsp;that&amp;nbsp;requires&amp;nbsp;both&amp;nbsp;a&amp;nbsp;loan&amp;nbsp;officer's&amp;nbsp;and&amp;nbsp;a&amp;nbsp;manager's&amp;nbsp;signature.&amp;nbsp;You&amp;nbsp;can&amp;nbsp;use&amp;nbsp;the&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Signature&amp;nbsp;service&amp;nbsp;Java&amp;nbsp;API&amp;nbsp;or&amp;nbsp;web&amp;nbsp;service&amp;nbsp;API&amp;nbsp;to&amp;nbsp;verify&amp;nbsp;all&amp;nbsp;signatures&amp;nbsp;within&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document.&amp;nbsp;When&amp;nbsp;verifying&amp;nbsp;multiple&amp;nbsp;digital&amp;nbsp;signatures,!!discoiqbr!!&amp;nbsp;*&amp;nbsp;you&amp;nbsp;can&amp;nbsp;check&amp;nbsp;the&amp;nbsp;status&amp;nbsp;and&amp;nbsp;properties&amp;nbsp;of&amp;nbsp;each&amp;nbsp;signature.&amp;nbsp;Before&amp;nbsp;you&amp;nbsp;trust&amp;nbsp;a&amp;nbsp;digital&amp;nbsp;signature,&amp;nbsp;it&amp;nbsp;is&amp;nbsp;recommended&amp;nbsp;that&amp;nbsp;you&amp;nbsp;verify&amp;nbsp;it.&amp;nbsp;It&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;is&amp;nbsp;recommended&amp;nbsp;that&amp;nbsp;you&amp;nbsp;are&amp;nbsp;familiar&amp;nbsp;with&amp;nbsp;verifying&amp;nbsp;a&amp;nbsp;single&amp;nbsp;digital&amp;nbsp;signature.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;For&amp;nbsp;unprotected&amp;nbsp;document,&amp;nbsp;you&amp;nbsp;are&amp;nbsp;not&amp;nbsp;required&amp;nbsp;to&amp;nbsp;set&amp;nbsp;UnlockOptions&amp;nbsp;in&amp;nbsp;ValidationPreferences!!discoiqbr!!&amp;nbsp;*&amp;nbsp;PreRequisites&amp;nbsp;-&amp;nbsp;The&amp;nbsp;certificate&amp;nbsp;chain&amp;nbsp;upto&amp;nbsp;the&amp;nbsp;Root&amp;nbsp;Certificate&amp;nbsp;should&amp;nbsp;be&amp;nbsp;uploaded&amp;nbsp;on&amp;nbsp;CQ&amp;nbsp;trust&amp;nbsp;Store!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!!!discoiqbr!!@Component!!discoiqbr!!@Service(value=VerifyEncryptedPDFDoc.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;VerifyEncryptedPDFDoc&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;SlingRepository&amp;nbsp;slingRepository;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;JcrResourceResolverFactory&amp;nbsp;jcrResourceResolverFactory&amp;nbsp;;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;inputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;an&amp;nbsp;encrypted&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;JCR&amp;nbsp;node&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;IOException!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;RepositoryException!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;InvalidArgumentException!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;DocAssuranceException!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;public&amp;nbsp;void&amp;nbsp;verifyEncryptedPDFDoc(String&amp;nbsp;inputFile)&amp;nbsp;throws&amp;nbsp;IOException,&amp;nbsp;RepositoryException,&amp;nbsp;InvalidArgumentException,&amp;nbsp;DocAssuranceException{!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;inFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;Session&amp;nbsp;adminSession&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ResourceResolver&amp;nbsp;resourceResolver&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//the&amp;nbsp;resource&amp;nbsp;resolver&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;corresponding&amp;nbsp;to&amp;nbsp;the&amp;nbsp;user&amp;nbsp;who&amp;nbsp;has&amp;nbsp;access&amp;nbsp;to&amp;nbsp;CQ&amp;nbsp;Trust&amp;nbsp;Store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;adminSession&amp;nbsp;=&amp;nbsp;slingRepository.loginAdministrative(null);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver&amp;nbsp;=&amp;nbsp;jcrResourceResolverFactory.getResourceResolver(adminSession);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RevocationCheckStyle&amp;nbsp;revocationCheckStyle&amp;nbsp;=&amp;nbsp;RevocationCheckStyle.CheckIfAvailable;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;VerificationTime&amp;nbsp;verificationTime&amp;nbsp;=&amp;nbsp;VerificationTime.CURRENT_TIME;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ValidationPreferences&amp;nbsp;dssPrefs&amp;nbsp;=&amp;nbsp;getValidationPreferences();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Verify&amp;nbsp;the&amp;nbsp;digital&amp;nbsp;signature!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PDFDocumentVerificationInfo&amp;nbsp;&amp;nbsp;docInfo&amp;nbsp;=&amp;nbsp;docAssuranceService.verifyDocument(!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;revocationCheckStyle,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;verificationTime,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;dssPrefs,!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Get&amp;nbsp;a&amp;nbsp;list&amp;nbsp;of&amp;nbsp;all&amp;nbsp;signatures&amp;nbsp;that&amp;nbsp;are&amp;nbsp;located&amp;nbsp;in&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;List&amp;nbsp;allSignatures&amp;nbsp;=&amp;nbsp;docInfo.getVerificationInfos();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Create&amp;nbsp;an&amp;nbsp;Iterator&amp;nbsp;object&amp;nbsp;and&amp;nbsp;iterate&amp;nbsp;through&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//the&amp;nbsp;List&amp;nbsp;object!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Iterator&lt;PDFSignatureVerificationInfo&gt;&amp;nbsp;iter&amp;nbsp;=&amp;nbsp;allSignatures.iterator();&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;while&amp;nbsp;(iter.hasNext())&amp;nbsp;{&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PDFSignatureVerificationInfo&amp;nbsp;signInfo&amp;nbsp;=&amp;nbsp;(PDFSignatureVerificationInfo)iter.next();&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Get&amp;nbsp;the&amp;nbsp;Signature&amp;nbsp;Status!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SignatureStatus&amp;nbsp;sigStatus&amp;nbsp;=&amp;nbsp;signInfo.getStatus();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;myStatus="";&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Determine&amp;nbsp;the&amp;nbsp;status&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.DynamicFormSignatureUnknown)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"The&amp;nbsp;signatures&amp;nbsp;located&amp;nbsp;in&amp;nbsp;the&amp;nbsp;dynamic&amp;nbsp;PDF&amp;nbsp;form&amp;nbsp;are&amp;nbsp;unknown";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.DocumentSignatureUnknown)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"The&amp;nbsp;signatures&amp;nbsp;located&amp;nbsp;in&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;are&amp;nbsp;unknown";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.CertifiedDynamicFormSignatureTamper)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"The&amp;nbsp;signatures&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;certified&amp;nbsp;PDF&amp;nbsp;form&amp;nbsp;are&amp;nbsp;valid";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.SignedDynamicFormSignatureTamper)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"The&amp;nbsp;signatures&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;signed&amp;nbsp;dynamic&amp;nbsp;PDF&amp;nbsp;form&amp;nbsp;are&amp;nbsp;valid";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.CertifiedDocumentSignatureTamper)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"The&amp;nbsp;signatures&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;certified&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;are&amp;nbsp;valid";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.SignedDocumentSignatureTamper)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"The&amp;nbsp;signatures&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;signed&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;are&amp;nbsp;valid";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.SignatureFormatError)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"The&amp;nbsp;format&amp;nbsp;of&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;in&amp;nbsp;a&amp;nbsp;signed&amp;nbsp;document&amp;nbsp;is&amp;nbsp;invalid";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.DynamicFormSigNoChanges)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"No&amp;nbsp;changes&amp;nbsp;were&amp;nbsp;made&amp;nbsp;to&amp;nbsp;the&amp;nbsp;signed&amp;nbsp;dynamic&amp;nbsp;PDF&amp;nbsp;form";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.DocumentSigNoChanges)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"No&amp;nbsp;changes&amp;nbsp;were&amp;nbsp;made&amp;nbsp;to&amp;nbsp;the&amp;nbsp;signed&amp;nbsp;PDF&amp;nbsp;document";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.DynamicFormCertificationSigNoChanges)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"No&amp;nbsp;changes&amp;nbsp;were&amp;nbsp;made&amp;nbsp;to&amp;nbsp;the&amp;nbsp;certified&amp;nbsp;dynamic&amp;nbsp;PDF&amp;nbsp;form";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.DocumentCertificationSigNoChanges)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"No&amp;nbsp;changes&amp;nbsp;were&amp;nbsp;made&amp;nbsp;to&amp;nbsp;the&amp;nbsp;certified&amp;nbsp;PDF&amp;nbsp;document";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.DocSigWithChanges)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"There&amp;nbsp;were&amp;nbsp;changes&amp;nbsp;to&amp;nbsp;a&amp;nbsp;signed&amp;nbsp;PDF&amp;nbsp;document";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if&amp;nbsp;(sigStatus&amp;nbsp;==&amp;nbsp;SignatureStatus.CertificationSigWithChanges)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myStatus&amp;nbsp;=&amp;nbsp;"There&amp;nbsp;were&amp;nbsp;changes&amp;nbsp;made&amp;nbsp;to&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document.";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Get&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;type!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SignatureType&amp;nbsp;sigType&amp;nbsp;=&amp;nbsp;signInfo.getSignatureType();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;myType&amp;nbsp;=&amp;nbsp;"";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&amp;nbsp;(sigType.getType()&amp;nbsp;==&amp;nbsp;PDFSignatureType.AUTHORSIG)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myType="Certification";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if(sigType.getType()&amp;nbsp;==&amp;nbsp;PDFSignatureType.RECIPIENTSIG)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;myType="Recipient";!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Get&amp;nbsp;the&amp;nbsp;Signature&amp;nbsp;properties&amp;nbsp;returned&amp;nbsp;by&amp;nbsp;the&amp;nbsp;Signature&amp;nbsp;service!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SignatureProperties&amp;nbsp;sigProps&amp;nbsp;=&amp;nbsp;signInfo.getSignatureProps();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;signerName&amp;nbsp;=&amp;nbsp;&amp;nbsp;sigProps.getSignerName();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println("The&amp;nbsp;status&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;is:&amp;nbsp;"+myStatus&amp;nbsp;+".&amp;nbsp;The&amp;nbsp;signature&amp;nbsp;type&amp;nbsp;is&amp;nbsp;"+myType&amp;nbsp;+".&amp;nbsp;The&amp;nbsp;name&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signer&amp;nbsp;is&amp;nbsp;"+signerName+".");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;catch&amp;nbsp;(Exception&amp;nbsp;ee)!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ee.printStackTrace();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;finally{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;always&amp;nbsp;close&amp;nbsp;the&amp;nbsp;PDFDocument&amp;nbsp;object&amp;nbsp;after&amp;nbsp;your&amp;nbsp;processing&amp;nbsp;is&amp;nbsp;done.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(inDoc&amp;nbsp;!=&amp;nbsp;null){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc.close();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(adminSession&amp;nbsp;!=&amp;nbsp;null&amp;nbsp;&amp;&amp;&amp;nbsp;adminSession.isLive()){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(resourceResolver&amp;nbsp;!=&amp;nbsp;null){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver.close();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;adminSession.logout();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;ValidationPreferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;private&amp;nbsp;static&amp;nbsp;ValidationPreferences&amp;nbsp;getValidationPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ValidationPreferencesImpl&amp;nbsp;prefs&amp;nbsp;=&amp;nbsp;new&amp;nbsp;ValidationPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;prefs.setPKIPreferences(getPKIPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//set&amp;nbsp;the&amp;nbsp;unlock&amp;nbsp;options&amp;nbsp;for&amp;nbsp;processing&amp;nbsp;an&amp;nbsp;encrypted&amp;nbsp;pdf&amp;nbsp;document,&amp;nbsp;do&amp;nbsp;not&amp;nbsp;set&amp;nbsp;if&amp;nbsp;the&amp;nbsp;document&amp;nbsp;is&amp;nbsp;unprotected!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;prefs.setUnlockOptions(getUnlockOptions());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;prefs;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;PKIPreferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;static&amp;nbsp;PKIPreferences&amp;nbsp;getPKIPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PKIPreferences&amp;nbsp;pkiPref&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PKIPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pkiPref.setCRLPreferences(getCRLPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pkiPref.setPathPreferences(getPathValidationPreferences());!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;pkiPref;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;CRL&amp;nbsp;Preferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;static&amp;nbsp;CRLPreferences&amp;nbsp;getCRLPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;CRLPreferencesImpl&amp;nbsp;crlPrefs&amp;nbsp;=&amp;nbsp;new&amp;nbsp;CRLPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;crlPrefs.setRevocationCheck(RevocationCheckStyle.CheckIfAvailable);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;crlPrefs.setGoOnline(true);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;crlPrefs;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;PathValidationPreferences!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;static&amp;nbsp;PathValidationPreferences&amp;nbsp;getPathValidationPreferences(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PathValidationPreferencesImpl&amp;nbsp;pathPref&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PathValidationPreferencesImpl();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pathPref.setDoValidation(false);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;pathPref;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;for&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;static&amp;nbsp;UnlockOptions&amp;nbsp;getUnlockOptions(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;UnlockOptions&amp;nbsp;unlockOptions&amp;nbsp;=&amp;nbsp;new&amp;nbsp;UnlockOptions();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;Open&amp;nbsp;Password&amp;nbsp;for&amp;nbsp;password&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unlockOptions.setPassword("OpenPassword");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;Certificate&amp;nbsp;Encrypted&amp;nbsp;Document,&amp;nbsp;set&amp;nbsp;the&amp;nbsp;alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;uploaded&amp;nbsp;in&amp;nbsp;the&amp;nbsp;user's&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//and&amp;nbsp;corresponding&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;unlockOptions;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!} 
  </codeblock> 
  <h4>Removing digital signatures</h4> 
  <p>You can apply a new digital signature to a signature field only after you remove the previous digital signature. You cannot overwrite a digital signature. If you attempt to apply a digital signature to a signature field that contains a signature already, an exception occurs.</p> 
  <p><strong>Syntax</strong>: <span class="code">clearSignatureField(Document inDoc, String signatureFieldName, UnlockOptions unlockOptions)</span></p> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">inDoc</span><br /> </td> 
     <td>Document object containing PDF<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">signatureFieldName</span></td> 
     <td>The name of the signature field<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">unlockOptions</span><br /> </td> 
     <td>Includes the parameters require to unlock an encrypted file, This is required only if the file is encrypted<br /> </td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code sample removes a digital signature from a signature field.</p> 
  <codeblock gutter="true" lineWrap="true" class="syntax java">
    /*************************************************************************!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;&amp;nbsp;*!!discoiqbr!!-------------------------------------------------------------!!discoiqbr!!*ADOBE&amp;nbsp;SYSTEMS&amp;nbsp;INCORPORATED!!discoiqbr!!*Copyright&amp;nbsp;2014&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated!!discoiqbr!!*All&amp;nbsp;Rights&amp;nbsp;Reserved.!!discoiqbr!!!!discoiqbr!!*NOTICE:&amp;nbsp;&amp;nbsp;Adobe&amp;nbsp;permits&amp;nbsp;you&amp;nbsp;to&amp;nbsp;use,&amp;nbsp;modify,&amp;nbsp;and&amp;nbsp;distribute&amp;nbsp;this&amp;nbsp;file&amp;nbsp;in&amp;nbsp;accordance&amp;nbsp;with&amp;nbsp;the&amp;nbsp;!!discoiqbr!!*terms&amp;nbsp;of&amp;nbsp;the&amp;nbsp;Adobe&amp;nbsp;license&amp;nbsp;agreement&amp;nbsp;accompanying&amp;nbsp;it.&amp;nbsp;&amp;nbsp;If&amp;nbsp;you&amp;nbsp;have&amp;nbsp;received&amp;nbsp;this&amp;nbsp;file&amp;nbsp;!!discoiqbr!!*from&amp;nbsp;a&amp;nbsp;source&amp;nbsp;other&amp;nbsp;than&amp;nbsp;Adobe,&amp;nbsp;then&amp;nbsp;your&amp;nbsp;use,&amp;nbsp;modification,&amp;nbsp;or&amp;nbsp;distribution&amp;nbsp;of&amp;nbsp;it&amp;nbsp;requires&amp;nbsp;!!discoiqbr!!*the&amp;nbsp;prior&amp;nbsp;written&amp;nbsp;permission&amp;nbsp;of&amp;nbsp;Adobe.!!discoiqbr!!-------------------------------------------------------------------------------------------------!!discoiqbr!!!!discoiqbr!!&amp;nbsp;**************************************************************************/!!discoiqbr!!package&amp;nbsp;com.adobe.docassurance.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!import&amp;nbsp;java.io.IOException;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;javax.jcr.RepositoryException;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.InvalidArgumentException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.PDFOperationException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.PermissionsException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.SignaturesOtherException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.UnlockOptions;!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Digital&amp;nbsp;signatures&amp;nbsp;must&amp;nbsp;be&amp;nbsp;removed&amp;nbsp;from&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;before&amp;nbsp;a&amp;nbsp;newer&amp;nbsp;digital&amp;nbsp;signature&amp;nbsp;can&amp;nbsp;be&amp;nbsp;applied.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;A&amp;nbsp;digital&amp;nbsp;signature&amp;nbsp;cannot&amp;nbsp;be&amp;nbsp;overwritten.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;If&amp;nbsp;you&amp;nbsp;attempt&amp;nbsp;to&amp;nbsp;apply&amp;nbsp;a&amp;nbsp;digital&amp;nbsp;signature&amp;nbsp;to&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;that&amp;nbsp;contains&amp;nbsp;a&amp;nbsp;signature,&amp;nbsp;an&amp;nbsp;exception&amp;nbsp;occurs!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*The&amp;nbsp;following&amp;nbsp;Java&amp;nbsp;code&amp;nbsp;example&amp;nbsp;removes&amp;nbsp;a&amp;nbsp;digital&amp;nbsp;signature&amp;nbsp;from&amp;nbsp;a&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;named&amp;nbsp;SignatureField1.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*The&amp;nbsp;name&amp;nbsp;of&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;file&amp;nbsp;that&amp;nbsp;contain&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;is&amp;nbsp;LoanSigned.pdf!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!!!discoiqbr!!@Component!!discoiqbr!!@Service(value=ClearSignatureField.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;ClearSignatureField&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;inputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;an&amp;nbsp;encrypted&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;disk!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;outFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;where&amp;nbsp;the&amp;nbsp;output&amp;nbsp;file&amp;nbsp;has&amp;nbsp;to&amp;nbsp;be&amp;nbsp;saved&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;Exception&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;public&amp;nbsp;void&amp;nbsp;clearSignatureField(String&amp;nbsp;inputFile,&amp;nbsp;String&amp;nbsp;outFile)&amp;nbsp;throws&amp;nbsp;Exception{!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;inFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Specify&amp;nbsp;the&amp;nbsp;name&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;fieldName&amp;nbsp;=&amp;nbsp;"SignatureField1";!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Clear&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;encrypted&amp;nbsp;document&amp;nbsp;pass&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;-&amp;nbsp;see&amp;nbsp;the&amp;nbsp;method&amp;nbsp;getUnlockOptions()&amp;nbsp;below!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Document&amp;nbsp;outPDF&amp;nbsp;=&amp;nbsp;docAssuranceService.clearSignatureField(inDoc,fieldName,null);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//save&amp;nbsp;the&amp;nbsp;outPDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outPDF.copyToFile(new&amp;nbsp;File(outFile));!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;for&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;UnlockOptions&amp;nbsp;getUnlockOptions(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;UnlockOptions&amp;nbsp;unlockOptions&amp;nbsp;=&amp;nbsp;new&amp;nbsp;UnlockOptions();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;Open&amp;nbsp;Password&amp;nbsp;for&amp;nbsp;password&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unlockOptions.setPassword("OpenPassword");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;Certificate&amp;nbsp;Encrypted&amp;nbsp;Document,&amp;nbsp;set&amp;nbsp;the&amp;nbsp;alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;uploaded&amp;nbsp;in&amp;nbsp;the&amp;nbsp;user's&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//and&amp;nbsp;corresponding&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;unlockOptions;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!} 
  </codeblock> 
  <h4>Getting certifying signature field</h4> 
  <p>You can retrieve the names of all signature fields that are located in a PDF document that you want to sign or certify. If you are unsure of the signature field names that are located in a PDF document or you want to verify the names, you can programmatically retrieve them. The Signature service returns the fully qualified name of the signature field, such as <span class="code">form1[0].grantApplication[0].page1[0].SignatureField1[0]</span>.</p> 
  <p><strong>Syntax</strong>: <span class="code">getCertifyingSignatureField(Document inDoc, UnlockOptions unlockOptions)</span></p> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">inDoc</span><br /> </td> 
     <td>Document object containing PDF.<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">UnlockOptions</span></td> 
     <td>UnlockOptions includes the parameters require to unlock an encrypted file. This is required only if the file is encrypted.</td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code example retrieves the signature field that was used to certify the document.</p> 
  <codeblock gutter="true" lineWrap="true" class="syntax js">
    /*************************************************************************!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;ADOBE&amp;nbsp;CONFIDENTIAL!!discoiqbr!!&amp;nbsp;*&amp;nbsp;___________________!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;Copyright&amp;nbsp;2014&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;All&amp;nbsp;Rights&amp;nbsp;Reserved.!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;NOTICE:&amp;nbsp;&amp;nbsp;All&amp;nbsp;information&amp;nbsp;contained&amp;nbsp;herein&amp;nbsp;is,&amp;nbsp;and&amp;nbsp;remains!!discoiqbr!!&amp;nbsp;*&amp;nbsp;the&amp;nbsp;property&amp;nbsp;of&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its&amp;nbsp;suppliers,!!discoiqbr!!&amp;nbsp;*&amp;nbsp;if&amp;nbsp;any.&amp;nbsp;&amp;nbsp;The&amp;nbsp;intellectual&amp;nbsp;and&amp;nbsp;technical&amp;nbsp;concepts&amp;nbsp;contained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;herein&amp;nbsp;are&amp;nbsp;proprietary&amp;nbsp;to&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its!!discoiqbr!!&amp;nbsp;*&amp;nbsp;suppliers&amp;nbsp;and&amp;nbsp;are&amp;nbsp;protected&amp;nbsp;by&amp;nbsp;trade&amp;nbsp;secret&amp;nbsp;or&amp;nbsp;copyright&amp;nbsp;law.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Dissemination&amp;nbsp;of&amp;nbsp;this&amp;nbsp;information&amp;nbsp;or&amp;nbsp;reproduction&amp;nbsp;of&amp;nbsp;this&amp;nbsp;material!!discoiqbr!!&amp;nbsp;*&amp;nbsp;is&amp;nbsp;strictly&amp;nbsp;forbidden&amp;nbsp;unless&amp;nbsp;prior&amp;nbsp;written&amp;nbsp;permission&amp;nbsp;is&amp;nbsp;obtained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;from&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated.!!discoiqbr!!&amp;nbsp;**************************************************************************/!!discoiqbr!!package&amp;nbsp;com.adobe.docassurance.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!import&amp;nbsp;java.util.Iterator;!!discoiqbr!!import&amp;nbsp;java.util.List;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.PDFSignatureField;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.DuplicateSignatureFieldException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.InvalidArgumentException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.PDFOperationException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.PermissionsException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.SignaturesBaseException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.UnlockOptions;!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;*&amp;nbsp;You&amp;nbsp;can&amp;nbsp;retrieve&amp;nbsp;the&amp;nbsp;names&amp;nbsp;of&amp;nbsp;all&amp;nbsp;signature&amp;nbsp;fields&amp;nbsp;that&amp;nbsp;are&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;that&amp;nbsp;you&amp;nbsp;want&amp;nbsp;to&amp;nbsp;sign&amp;nbsp;or&amp;nbsp;certify.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;If&amp;nbsp;you&amp;nbsp;are&amp;nbsp;unsure&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;names&amp;nbsp;that&amp;nbsp;are&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;or&amp;nbsp;you&amp;nbsp;want&amp;nbsp;to&amp;nbsp;verify&amp;nbsp;the&amp;nbsp;names,&amp;nbsp;you&amp;nbsp;can!!discoiqbr!!&amp;nbsp;*&amp;nbsp;programmatically&amp;nbsp;retrieve&amp;nbsp;them.&amp;nbsp;The&amp;nbsp;Signature&amp;nbsp;service&amp;nbsp;returns&amp;nbsp;the&amp;nbsp;fully&amp;nbsp;qualified&amp;nbsp;name&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field,&amp;nbsp;such&amp;nbsp;as&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;form1[0].grantApplication[0].page1[0].SignatureField1[0].!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;The&amp;nbsp;following&amp;nbsp;Java&amp;nbsp;code&amp;nbsp;example&amp;nbsp;retrieves&amp;nbsp;the&amp;nbsp;ignature&amp;nbsp;field&amp;nbsp;that&amp;nbsp;was&amp;nbsp;used&amp;nbsp;to&amp;nbsp;certify&amp;nbsp;the&amp;nbsp;document.!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!!!discoiqbr!!@Component!!discoiqbr!!@Service(value=GetCertifyingSignatureField.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;GetCertifyingSignatureField&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;inputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;the&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;disk!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;SignaturesBaseException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;DuplicateSignatureFieldException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;PermissionsException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;PDFOperationException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;InvalidArgumentException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;public&amp;nbsp;void&amp;nbsp;getCertifyingSignatureField(String&amp;nbsp;inputFile)&amp;nbsp;throws&amp;nbsp;Exception&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;inFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Retrieve&amp;nbsp;signature&amp;nbsp;data&amp;nbsp;for&amp;nbsp;a&amp;nbsp;given&amp;nbsp;signature&amp;nbsp;field.!!discoiqbr!!&amp;nbsp;&amp;nbsp;//for&amp;nbsp;encrypted&amp;nbsp;document&amp;nbsp;pass&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;-&amp;nbsp;see&amp;nbsp;the&amp;nbsp;method&amp;nbsp;getUnlockOptions()&amp;nbsp;below!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PDFSignatureField&amp;nbsp;pdfSignature&amp;nbsp;=&amp;nbsp;docAssuranceService.getCertifyingSignatureField(inDoc,null);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;for&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;UnlockOptions&amp;nbsp;getUnlockOptions(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;UnlockOptions&amp;nbsp;unlockOptions&amp;nbsp;=&amp;nbsp;new&amp;nbsp;UnlockOptions();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;Open&amp;nbsp;Password&amp;nbsp;for&amp;nbsp;password&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unlockOptions.setPassword("OpenPassword");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;Certificate&amp;nbsp;Encrypted&amp;nbsp;Document,&amp;nbsp;set&amp;nbsp;the&amp;nbsp;alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;uploaded&amp;nbsp;in&amp;nbsp;the&amp;nbsp;user's&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//and&amp;nbsp;corresponding&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;unlockOptions;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!}!!discoiqbr!! 
  </codeblock> 
  <h4>Getting PDF encryption type</h4> 
  <p>You can retrieve the names of all signature fields that are located in a PDF document that you want to sign or certify. If you are unsure of the signature field names that are located in a PDF document or you want to verify the names, you can programmatically retrieve them. The Signature service returns the fully qualified name of the signature field, such <span class="code">asform1[0].grantApplication[0].page1[0].SignatureField1[0]</span>.</p> 
  <p><strong>Syntax</strong>: <span class="code">void getPDFEncryption(Document inDoc)</span></p> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">inDoc</span><br /> </td> 
     <td>A document supplied as input. It may or may not be encrypted.<br /> </td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code example retrieves the Signature information for the given signature field located in a PDF document.<br /> </p> 
  <codeblock gutter="true" lineWrap="true" class="syntax java">
    /*************************************************************************!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;ADOBE&amp;nbsp;CONFIDENTIAL!!discoiqbr!!&amp;nbsp;*&amp;nbsp;___________________!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;Copyright&amp;nbsp;2014&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated!!discoiqbr!!&amp;nbsp;*&amp;nbsp;&amp;nbsp;All&amp;nbsp;Rights&amp;nbsp;Reserved.!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*&amp;nbsp;NOTICE:&amp;nbsp;&amp;nbsp;All&amp;nbsp;information&amp;nbsp;contained&amp;nbsp;herein&amp;nbsp;is,&amp;nbsp;and&amp;nbsp;remains!!discoiqbr!!&amp;nbsp;*&amp;nbsp;the&amp;nbsp;property&amp;nbsp;of&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its&amp;nbsp;suppliers,!!discoiqbr!!&amp;nbsp;*&amp;nbsp;if&amp;nbsp;any.&amp;nbsp;&amp;nbsp;The&amp;nbsp;intellectual&amp;nbsp;and&amp;nbsp;technical&amp;nbsp;concepts&amp;nbsp;contained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;herein&amp;nbsp;are&amp;nbsp;proprietary&amp;nbsp;to&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated&amp;nbsp;and&amp;nbsp;its!!discoiqbr!!&amp;nbsp;*&amp;nbsp;suppliers&amp;nbsp;and&amp;nbsp;are&amp;nbsp;protected&amp;nbsp;by&amp;nbsp;trade&amp;nbsp;secret&amp;nbsp;or&amp;nbsp;copyright&amp;nbsp;law.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;Dissemination&amp;nbsp;of&amp;nbsp;this&amp;nbsp;information&amp;nbsp;or&amp;nbsp;reproduction&amp;nbsp;of&amp;nbsp;this&amp;nbsp;material!!discoiqbr!!&amp;nbsp;*&amp;nbsp;is&amp;nbsp;strictly&amp;nbsp;forbidden&amp;nbsp;unless&amp;nbsp;prior&amp;nbsp;written&amp;nbsp;permission&amp;nbsp;is&amp;nbsp;obtained!!discoiqbr!!&amp;nbsp;*&amp;nbsp;from&amp;nbsp;Adobe&amp;nbsp;Systems&amp;nbsp;Incorporated.!!discoiqbr!!&amp;nbsp;**************************************************************************/!!discoiqbr!!package&amp;nbsp;com.adobe.docassurance.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!import&amp;nbsp;java.util.Iterator;!!discoiqbr!!import&amp;nbsp;java.util.List;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.PDFSignatureField;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.DuplicateSignatureFieldException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.InvalidArgumentException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.PDFOperationException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.PermissionsException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.client.types.exceptions.SignaturesBaseException;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.signatures.pdf.inputs.UnlockOptions;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.encryption.client.EncryptionTypeResult;!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;*&amp;nbsp;You&amp;nbsp;can&amp;nbsp;retrieve&amp;nbsp;the&amp;nbsp;names&amp;nbsp;of&amp;nbsp;all&amp;nbsp;signature&amp;nbsp;fields&amp;nbsp;that&amp;nbsp;are&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;that&amp;nbsp;you&amp;nbsp;want&amp;nbsp;to&amp;nbsp;sign&amp;nbsp;or&amp;nbsp;certify.&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;If&amp;nbsp;you&amp;nbsp;are&amp;nbsp;unsure&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;names&amp;nbsp;that&amp;nbsp;are&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;or&amp;nbsp;you&amp;nbsp;want&amp;nbsp;to&amp;nbsp;verify&amp;nbsp;the&amp;nbsp;names,&amp;nbsp;you&amp;nbsp;can!!discoiqbr!!&amp;nbsp;*&amp;nbsp;programmatically&amp;nbsp;retrieve&amp;nbsp;them.&amp;nbsp;The&amp;nbsp;Signature&amp;nbsp;service&amp;nbsp;returns&amp;nbsp;the&amp;nbsp;fully&amp;nbsp;qualified&amp;nbsp;name&amp;nbsp;of&amp;nbsp;the&amp;nbsp;signature&amp;nbsp;field,&amp;nbsp;such&amp;nbsp;as&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;form1[0].grantApplication[0].page1[0].SignatureField1[0].!!discoiqbr!!&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;*&amp;nbsp;The&amp;nbsp;following&amp;nbsp;Java&amp;nbsp;code&amp;nbsp;example&amp;nbsp;retrieves&amp;nbsp;the&amp;nbsp;Signature&amp;nbsp;Info&amp;nbsp;for&amp;nbsp;the&amp;nbsp;given&amp;nbsp;signature&amp;nbsp;field&amp;nbsp;located&amp;nbsp;in&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document.!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!!!discoiqbr!!@Component!!discoiqbr!!@Service(value=GetPDFEncryption.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;GetPDFEncryption&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;inputFile&amp;nbsp;-&amp;nbsp;path&amp;nbsp;to&amp;nbsp;the&amp;nbsp;pdf&amp;nbsp;document&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;disk!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;SignaturesBaseException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;DuplicateSignatureFieldException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;PermissionsException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;PDFOperationException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;InvalidArgumentException&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;public&amp;nbsp;void&amp;nbsp;getPDFEncryption(String&amp;nbsp;inputFile)&amp;nbsp;throws&amp;nbsp;Exception&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;inFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;//Retrieve&amp;nbsp;signature&amp;nbsp;data&amp;nbsp;for&amp;nbsp;a&amp;nbsp;given&amp;nbsp;signature&amp;nbsp;field.!!discoiqbr!!&amp;nbsp;&amp;nbsp;//for&amp;nbsp;encrypted&amp;nbsp;document&amp;nbsp;pass&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;-&amp;nbsp;see&amp;nbsp;the&amp;nbsp;method&amp;nbsp;getUnlockOptions()&amp;nbsp;below!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;EncryptionTypeResult&amp;nbsp;encryptionTypeResult&amp;nbsp;=&amp;nbsp;docAssuranceService.getPDFEncryption(inDoc);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;sets&amp;nbsp;Unlock&amp;nbsp;Options&amp;nbsp;for&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;UnlockOptions&amp;nbsp;getUnlockOptions(){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;UnlockOptions&amp;nbsp;unlockOptions&amp;nbsp;=&amp;nbsp;new&amp;nbsp;UnlockOptions();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//sets&amp;nbsp;the&amp;nbsp;Open&amp;nbsp;Password&amp;nbsp;for&amp;nbsp;password&amp;nbsp;encrypted&amp;nbsp;PDF!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unlockOptions.setPassword("OpenPassword");!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//for&amp;nbsp;Certificate&amp;nbsp;Encrypted&amp;nbsp;Document,&amp;nbsp;set&amp;nbsp;the&amp;nbsp;alias&amp;nbsp;of&amp;nbsp;the&amp;nbsp;credential&amp;nbsp;uploaded&amp;nbsp;in&amp;nbsp;the&amp;nbsp;user's&amp;nbsp;key&amp;nbsp;store!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//and&amp;nbsp;corresponding&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;unlockOptions;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!}!!discoiqbr!! 
  </codeblock> 
  <h4>Removing password encryption from PDF</h4> 
  <p>Remove password-based encryption from a PDF document to let users open the PDF document in Adobe Reader or Acrobat without having to specify a password. After you remove password-based encryption from a PDF document, the document is no longer secure.</p> 
  <p><strong>Syntax</strong>: <span class="code">Document removePDFPasswordSecurity (Document inDoc,String password)</span></p> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">inDoc</span><br /> </td> 
     <td>Document supplied as input. It must be password protected.<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">password</span><br /> </td> 
     <td>Either a document open or permission password to be used for removing security from the document.<br /> </td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following code sample removes password-based encryption from a PDF document.</p> 
  <codeblock gutter="true" lineWrap="true" class="syntax java">
    package&amp;nbsp;com.adobe.docassurance.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!import&amp;nbsp;java.io.FileNotFoundException;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!import&amp;nbsp;org.apache.sling.jcr.api.SlingRepository;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;*&amp;nbsp;The&amp;nbsp;following&amp;nbsp;Java&amp;nbsp;code&amp;nbsp;example&amp;nbsp;removes&amp;nbsp;password-based&amp;nbsp;encryption&amp;nbsp;from&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document.!!discoiqbr!!&amp;nbsp;*&amp;nbsp;The&amp;nbsp;master&amp;nbsp;password&amp;nbsp;value&amp;nbsp;used&amp;nbsp;to&amp;nbsp;remove&amp;nbsp;password-based&amp;nbsp;encryption&amp;nbsp;is&amp;nbsp;PermissionPassword!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!@Component(enabled=true,immediate=true)!!discoiqbr!!@Service(value=RemovePasswordEncryption.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;RemovePasswordEncryption&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;//&amp;nbsp;Create&amp;nbsp;reference&amp;nbsp;for&amp;nbsp;DocAssuranceService!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;SlingRepository&amp;nbsp;slingRepository;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;The&amp;nbsp;below&amp;nbsp;sample&amp;nbsp;code&amp;nbsp;demonstrates&amp;nbsp;removing&amp;nbsp;password&amp;nbsp;encryption&amp;nbsp;from&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;using&amp;nbsp;AEM&amp;nbsp;EncryptionService.!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;inFilePath&amp;nbsp;&amp;nbsp;path&amp;nbsp;of&amp;nbsp;the&amp;nbsp;input&amp;nbsp;PDF&amp;nbsp;File!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Path&amp;nbsp;Example&amp;nbsp;for&amp;nbsp;Files&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;hardDisk&amp;nbsp;=&amp;nbsp;"C:/temp/test.pdf"&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;outFilePath&amp;nbsp;path&amp;nbsp;where&amp;nbsp;the&amp;nbsp;output&amp;nbsp;PDF&amp;nbsp;File&amp;nbsp;needs&amp;nbsp;to&amp;nbsp;be&amp;nbsp;saved!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Path&amp;nbsp;Example&amp;nbsp;for&amp;nbsp;Files&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;hardDisk&amp;nbsp;=&amp;nbsp;"C:/temp/test_out.pdf"&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;Exception!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;public&amp;nbsp;void&amp;nbsp;removePasswordEncryption(String&amp;nbsp;inputFile,&amp;nbsp;String&amp;nbsp;outputFile)&amp;nbsp;throws&amp;nbsp;Exception&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;inFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;outFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;outDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try{!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;password&amp;nbsp;=&amp;nbsp;"PermissionPassword";&amp;nbsp;//master&amp;nbsp;password&amp;nbsp;with&amp;nbsp;which&amp;nbsp;the&amp;nbsp;pdf&amp;nbsp;was&amp;nbsp;encrypted!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//in&amp;nbsp;case&amp;nbsp;if&amp;nbsp;the&amp;nbsp;pdf&amp;nbsp;is&amp;nbsp;encrypted&amp;nbsp;only&amp;nbsp;with&amp;nbsp;user&amp;nbsp;password,&amp;nbsp;specify&amp;nbsp;the!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//user&amp;nbsp;password!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Remove&amp;nbsp;password-based&amp;nbsp;encryption&amp;nbsp;from&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outDoc&amp;nbsp;=&amp;nbsp;docAssuranceService.removePDFPasswordSecurity(inDoc,password);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}finally{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;always&amp;nbsp;close&amp;nbsp;the&amp;nbsp;PDFDocument&amp;nbsp;object&amp;nbsp;after&amp;nbsp;your&amp;nbsp;processing&amp;nbsp;is&amp;nbsp;done.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(inDoc&amp;nbsp;!=&amp;nbsp;null){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc.close();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outDoc.copyToFile(outFile);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;!!discoiqbr!!} 
  </codeblock> 
  <h4>Removing certificate encryption</h4> 
  <p>You can remove certificate-based encryption from a PDF document so that users can open the PDF document in Adobe Reader or Acrobat. To remove encryption from a PDF document that is encrypted with a certificate, reference a private key. After you remove the encryption from a PDF document, it is no longer secure.</p> 
  <p><strong>Syntax</strong>: <span class="code">removePDFCertificateSecurity(Document inDoc, String alias, ResourceResolver resourceResolver)</span></p> 
  <p><strong>Input Parameters</strong></p> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span class="code">inDoc</span><br /> </td> 
     <td>A Document object that represents the certificate-encrypted PDF document.<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">alias</span><br /> </td> 
     <td>The alias that corresponds to the key in Granite Trust Store that is used to remove certificate-based encryption from the PDF document.<br /> </td> 
    </tr> 
    <tr> 
     <td><span class="code">ResourceResolver</span></td> 
     <td>ResourceResolver to access the key store of the particular user to fetch the Credential.</td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code sample removes certificate-based encryption from a PDF document.</p> 
  <codeblock gutter="true" lineWrap="true" class="syntax java">
    package&amp;nbsp;com.adobe.docassurance.samples;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;java.io.File;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;javax.jcr.Session;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Component;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Reference;!!discoiqbr!!import&amp;nbsp;org.apache.felix.scr.annotations.Service;!!discoiqbr!!import&amp;nbsp;org.apache.sling.api.resource.ResourceResolver;!!discoiqbr!!import&amp;nbsp;org.apache.sling.jcr.api.SlingRepository;!!discoiqbr!!import&amp;nbsp;org.apache.sling.jcr.resource.JcrResourceResolverFactory;!!discoiqbr!!!!discoiqbr!!import&amp;nbsp;com.adobe.aemfd.docmanager.Document;!!discoiqbr!!import&amp;nbsp;com.adobe.fd.docassurance.client.api.DocAssuranceService;!!discoiqbr!!!!discoiqbr!!/**!!discoiqbr!!&amp;nbsp;*&amp;nbsp;The&amp;nbsp;following&amp;nbsp;Java&amp;nbsp;code&amp;nbsp;example&amp;nbsp;removes&amp;nbsp;certificate-based&amp;nbsp;encryption&amp;nbsp;from&amp;nbsp;a&amp;nbsp;PDF&amp;nbsp;document!!discoiqbr!!&amp;nbsp;*!!discoiqbr!!&amp;nbsp;*/!!discoiqbr!!@Component(enabled=true,immediate=true)!!discoiqbr!!@Service(value=RemovePKIEncryption.class)!!discoiqbr!!public&amp;nbsp;class&amp;nbsp;RemovePKIEncryption&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;//&amp;nbsp;Create&amp;nbsp;reference&amp;nbsp;for&amp;nbsp;docAssuranceServiceInterface!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;private&amp;nbsp;DocAssuranceService&amp;nbsp;docAssuranceService;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;SlingRepository&amp;nbsp;slingRepository;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;@Reference!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private&amp;nbsp;JcrResourceResolverFactory&amp;nbsp;jcrResourceResolverFactory&amp;nbsp;;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;The&amp;nbsp;below&amp;nbsp;sample&amp;nbsp;code&amp;nbsp;demonstrates&amp;nbsp;encrypting&amp;nbsp;PDF&amp;nbsp;with&amp;nbsp;Password&amp;nbsp;using&amp;nbsp;AEM&amp;nbsp;docAssuranceService.!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;inFilePath&amp;nbsp;&amp;nbsp;path&amp;nbsp;of&amp;nbsp;the&amp;nbsp;input&amp;nbsp;PDF&amp;nbsp;File!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Path&amp;nbsp;Example&amp;nbsp;for&amp;nbsp;Files&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;hardDisk&amp;nbsp;=&amp;nbsp;"C:/temp/test.pdf"&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@param&amp;nbsp;outFilePath&amp;nbsp;path&amp;nbsp;where&amp;nbsp;the&amp;nbsp;output&amp;nbsp;PDF&amp;nbsp;File&amp;nbsp;needs&amp;nbsp;to&amp;nbsp;be&amp;nbsp;saved!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Path&amp;nbsp;Example&amp;nbsp;for&amp;nbsp;Files&amp;nbsp;stored&amp;nbsp;at&amp;nbsp;hardDisk&amp;nbsp;=&amp;nbsp;"C:/temp/test_Encrypted.pdf"&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;*&amp;nbsp;@throws&amp;nbsp;Exception!!discoiqbr!!&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;public&amp;nbsp;void&amp;nbsp;removePKIEncryption(String&amp;nbsp;inputFile,&amp;nbsp;String&amp;nbsp;outputFile)&amp;nbsp;throws&amp;nbsp;Exception&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;inFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;outFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Document&amp;nbsp;outDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Session&amp;nbsp;adminSession&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ResourceResolver&amp;nbsp;resourceResolver&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;adminSession&amp;nbsp;=&amp;nbsp;slingRepository.loginAdministrative(null);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver&amp;nbsp;=&amp;nbsp;jcrResourceResolverFactory.getResourceResolver(adminSession);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Remove&amp;nbsp;certificate-based&amp;nbsp;encryption&amp;nbsp;from&amp;nbsp;the&amp;nbsp;PDF&amp;nbsp;document&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;Here&amp;nbsp;the&amp;nbsp;alias("encryption")&amp;nbsp;of&amp;nbsp;the&amp;nbsp;private&amp;nbsp;credential&amp;nbsp;stored&amp;nbsp;in&amp;nbsp;the&amp;nbsp;keystore&amp;nbsp;of&amp;nbsp;the!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;user&amp;nbsp;has&amp;nbsp;been&amp;nbsp;provided&amp;nbsp;with&amp;nbsp;the&amp;nbsp;user's&amp;nbsp;resource&amp;nbsp;resolver!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outDoc&amp;nbsp;=&amp;nbsp;docAssuranceService.removePDFCertificateSecurity(inDoc,&amp;nbsp;"encryption",resourceResolver);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}catch(Exception&amp;nbsp;e){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//&amp;nbsp;TODO&amp;nbsp;Auto-generated&amp;nbsp;catch&amp;nbsp;block!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}finally{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&amp;nbsp;always&amp;nbsp;close&amp;nbsp;the&amp;nbsp;PDFDocument&amp;nbsp;object&amp;nbsp;after&amp;nbsp;your&amp;nbsp;processing&amp;nbsp;is&amp;nbsp;done.!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(inDoc&amp;nbsp;!=&amp;nbsp;null){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc.close();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(adminSession&amp;nbsp;!=&amp;nbsp;null&amp;nbsp;&amp;&amp;&amp;nbsp;adminSession.isLive()){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(resourceResolver&amp;nbsp;!=&amp;nbsp;null){!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceResolver.close();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;adminSession.logout();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outDoc.copyToFile(outFile);!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!!!discoiqbr!!&amp;nbsp;} 
  </codeblock> 
  <h2>Output Service</h2> 
  <p>The Output service provides APIs to render an XDP file in .pdf, .pcl, .zpl, and .ps formats. The service supports following APIs: </p> 
  <ul> 
   <li><strong><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-1">generatePDFOutput</a>: </strong>Generates a PDF document by merging a form design with data stored on a network location, local file system, or HTTP location as literal values.<br /> </li> 
   <li><strong><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-4">generatePDFOutput</a>: </strong>Generates a PDF document by merging a form design with data that are stored in an application.</li> 
   <li><strong><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-7">generatePDFOutputBatch</a>:</strong> Merges a form design with data to create a PDF document. Optionally, generates a metadata file for each record or saves the output to a PDF file.</li> 
   <li><strong><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-10">generatePrintedOutput</a>:</strong> Generates a PCL, PostScript, or ZPL output from a form design and data file stored on a network location, local file system, or HTTP location as literal values.<br /> </li> 
   <li><strong><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-13">generatePrintedOutput</a>:</strong> Generates a PCL, PostScript, and ZPL output from a form design and data file that are stored in an application.</li> 
  </ul> 
  <h3>generatePDFOutput</h3> 
  <p>The generatePDFOutput API generates a PDF document by merging a form design with data. Optionally, generates a metadata file for each record or saves the output to a PDF file. Use the generatePDFOutput API for the form designs or data that are stored on a network location, local file system, or HTTP location as literal values. If the form design and XML data are stored in an application, use the <a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-4">generatePDFOutput</a> API.</p> 
  <p style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;"><strong>Syntax:</strong><span class="code"> Document generatePDFOutput(String uriOrFileName, Document data, PDFOutputOptions options);</span></p> 
  <h4>Input Parameters</h4> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td>uriOrFileName</td> 
     <td>Specifies path and name of the input file. The file can be of type PDF or XDP. If only filename is specified, the file is read in relation to contentRoot specified in options.</td> 
    </tr> 
    <tr> 
     <td>data</td> 
     <td>An XML file that contains the data that is merged with the PDF document.<br /> </td> 
    </tr> 
    <tr> 
     <td>options</td> 
     <td>Specifies values of contentRoot, locale, AcrobatVersion, linearizedPDF, and taggedPDF variables. The options parameter accept object of type PDFOutputOptions. <br /> </td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code sample generates a PDF document by merging a form design with data stored in an XML file.</p> 
  <codeblock gutter="true" lineWrap="true" class="syntax java">
    @Reference&amp;nbsp;private&amp;nbsp;OutputService&amp;nbsp;outputService;!!discoiqbr!!!!discoiqbr!!private&amp;nbsp;File&amp;nbsp;generatePDFOutput(String&amp;nbsp;contentRoot,File&amp;nbsp;inputXML,String&amp;nbsp;templateStr,String&amp;nbsp;acrobatVersion,String&amp;nbsp;tagged,String&amp;nbsp;linearized,&amp;nbsp;String&amp;nbsp;locale)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!String&amp;nbsp;outputFolder="C:/Output";!!discoiqbr!!!!discoiqbr!!Document&amp;nbsp;doc=null;!!discoiqbr!!!!discoiqbr!!try&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PDFOutputOptions&amp;nbsp;option&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PDFOutputOptions();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setContentRoot(contentRoot);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(acrobatVersion.equalsIgnoreCase("Acrobat_10"))!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&amp;nbsp;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setAcrobatVersion(com.adobe.fd.output.api.AcrobatVersion.Acrobat_10);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;if(acrobatVersion.equalsIgnoreCase("Acrobat_10_1"))&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setAcrobatVersion(com.adobe.fd.output.api.AcrobatVersion.Acrobat_10_1);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;if(acrobatVersion.equalsIgnoreCase("Acrobat_11"))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setAcrobatVersion(com.adobe.fd.output.api.AcrobatVersion.Acrobat_11);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&amp;nbsp;(tagged.equalsIgnoreCase("true")&amp;nbsp;)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setTaggedPDF(true&amp;nbsp;);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&amp;nbsp;(linearized.equalsIgnoreCase("true")&amp;nbsp;)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setTaggedPDF(true&amp;nbsp;);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(locale!=null)!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setLocale(locale);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;InputStream&amp;nbsp;in&amp;nbsp;=&amp;nbsp;new&amp;nbsp;FileInputStream(inputXML);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc&amp;nbsp;=&amp;nbsp;outputService.generatePDFOutput(templateStr,new&amp;nbsp;Document(in),option);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;toSave&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFolder+"Output.pdf");!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc.copyToFile(toSave);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;toSave;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(OutputServiceException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}catch&amp;nbsp;(FileNotFoundException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(IOException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}finally{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc.dispose();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;null;!!discoiqbr!!!!discoiqbr!!} 
  </codeblock> 
  <h3>generatePDFOutput</h3> 
  <p>The generatePDFOutput API generates a PDF document by merging a form design with data. Optionally, generate a metadata file for each record or save the output to a PDF file. Use the generatePrintedOutput API for the form designs or data that are stored in an application. If the form design and XML data are stored in on a network location, locally, or an HTTP location as literal values, use the <a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-1">generatePDFOutput</a> API.</p> 
  <p style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;"><strong>Syntax:</strong> <span class="code">Document generatePDFOutput(Document inputdocument, Document data, PDFOutputOptions options)</span></p> 
  <h4>Input Parameter</h4> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameters</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td>Inputdocument<br /> </td> 
     <td>Specifies path and name of the input file. The file can be of type PDF or XDP. If only filename is specified, the file is read in relation to contentRoot specified in options. <br /> </td> 
    </tr> 
    <tr> 
     <td>data</td> 
     <td>An XML file that contains the data that is merged with the PDF document.<br /> </td> 
    </tr> 
    <tr> 
     <td>options</td> 
     <td>Specifies values of contentRoot, locale, AcrobatVersion, linearizedPDF, and taggedPDF variables. The options parameter accepts object of type PDFOutputOptions.</td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code sample generates a PDF document by merging a form design with data stored in an XML file.</p> 
  <codeblock gutter="true" lineWrap="true" class="syntax java">
    @Reference&amp;nbsp;private&amp;nbsp;OutputService&amp;nbsp;outputService;!!discoiqbr!!!!discoiqbr!!private&amp;nbsp;File&amp;nbsp;generatePDFOutput2(String&amp;nbsp;contentRoot,&amp;nbsp;File&amp;nbsp;inputXML,&amp;nbsp;File&amp;nbsp;templateStr,&amp;nbsp;String&amp;nbsp;acrobatVersion,&amp;nbsp;String&amp;nbsp;tagged,&amp;nbsp;String&amp;nbsp;linearized,&amp;nbsp;String&amp;nbsp;locale)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!String&amp;nbsp;outputFolder="C:/Output";!!discoiqbr!!!!discoiqbr!!Document&amp;nbsp;doc=null;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PDFOutputOptions&amp;nbsp;option&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PDFOutputOptions();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setContentRoot(contentRoot);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(locale!=null)!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setLocale(locale);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(acrobatVersion.equalsIgnoreCase("Acrobat_10"))!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setAcrobatVersion(com.adobe.fd.output.api.AcrobatVersion.Acrobat_10);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;if(acrobatVersion.equalsIgnoreCase("Acrobat_10_1"))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setAcrobatVersion(com.adobe.fd.output.api.AcrobatVersion.Acrobat_10_1);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;if(acrobatVersion.equalsIgnoreCase("Acrobat_11"))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setAcrobatVersion(com.adobe.fd.output.api.AcrobatVersion.Acrobat_11);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&amp;nbsp;(tagged.equalsIgnoreCase("true")&amp;nbsp;)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setTaggedPDF(true&amp;nbsp;);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if&amp;nbsp;(linearized.equalsIgnoreCase("true")&amp;nbsp;)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setTaggedPDF(true&amp;nbsp;);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;InputStream&amp;nbsp;inputXMLStream&amp;nbsp;=&amp;nbsp;new&amp;nbsp;FileInputStream(inputXML);&amp;nbsp;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;InputStream&amp;nbsp;templateStream&amp;nbsp;=&amp;nbsp;new&amp;nbsp;FileInputStream(templateStr);;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc&amp;nbsp;=&amp;nbsp;outputService.generatePDFOutput(new&amp;nbsp;Document(templateStream),new&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Document(inputXMLStream),option);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;toSave&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFolder,"Output.pdf");!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc.copyToFile(toSave);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;toSave;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(OutputServiceException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}catch&amp;nbsp;(FileNotFoundException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(IOException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}finally{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc.dispose();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;null;!!discoiqbr!!!!discoiqbr!!} 
  </codeblock> 
  <h3>generatePDFOutputBatch</h3> 
  <p>Merges a form design with data to create a PDF document. Optionally, generates a metadata file for each record or saves the output to a PDF file. Use the generatePDFOutputBatch API for form designs or data that are stored on a network location, local file system, or HTTP location as literal values.</p> 
  <p style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;"><strong>Syntax:</strong> <span class="code">BatchResult generatePDFOutputBatch(Map templates, Map data, PDFOutputOptions options, BatchOptions batchOptions);</span></p> 
  <h4>Input Parameters</h4> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameter</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td>templates<br /> </td> 
     <td>Specifies Map of key and template filename.<br /> </td> 
    </tr> 
    <tr> 
     <td>data</td> 
     <td>Specifies Map of key and data document. If key is not null, then data document is rendered with template for corresponding key specified in the templates Map. </td> 
    </tr> 
    <tr> 
     <td>options</td> 
     <td>Specifies values of contentRoot, locale, AcrobatVersion, linearizedPDF, and taggedPDF variables. The options parameter accepts object of type PDFOutputOptions.</td> 
    </tr> 
    <tr> 
     <td>batchOptions</td> 
     <td>Specifies the value of the variable <span class="code">generateManyFiles</span>. Set the generateManyFiles flag to generate multiple files. The options parameter accepts object of type BatchOptions.</td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code sample generates PDF documents by merging a form designs with data stored in an XML file.</p> 
  <codeblock gutter="true" class="syntax java">
    private&amp;nbsp;ArrayList&amp;nbsp;generatePDFBatch(String&amp;nbsp;contentRoot,String&amp;nbsp;multipleFiles)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!String&amp;nbsp;outputFolder="C:/Output";!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PDFOutputOptions&amp;nbsp;option&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PDFOutputOptions();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setContentRoot(contentRoot);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Map&amp;nbsp;templates&amp;nbsp;=&amp;nbsp;new&amp;nbsp;LinkedHashMap();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Map&amp;nbsp;data&amp;nbsp;=&amp;nbsp;new&amp;nbsp;LinkedHashMap();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;template1&amp;nbsp;=&amp;nbsp;"PurchaseOrder.xdp";&amp;nbsp;String&amp;nbsp;template2&amp;nbsp;=&amp;nbsp;"CardApp.xdp";&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;templates.put(template1.substring(0,&amp;nbsp;template1.indexOf(".xdp")),template1);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;templates.put(template1.substring(0,&amp;nbsp;template2.indexOf(".xdp")),template2);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;inputXML1&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File("c:/InputFolder/PurchaseOrder.xml");!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;inputXML2&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File("c:/InputFolder/CardApp.xml");!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;InputStream&amp;nbsp;in1&amp;nbsp;=&amp;nbsp;new&amp;nbsp;FileInputStream(inputXML1);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;InputStream&amp;nbsp;in2&amp;nbsp;=&amp;nbsp;new&amp;nbsp;FileInputStream(inputXML2);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;data.put(template1.substring(0,&amp;nbsp;template1.indexOf(".xdp")),new&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Document((in1)));&amp;nbsp;data.put(template1.substring(0,&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;template1.indexOf(".xdp")),new&amp;nbsp;Document((in2)));&amp;nbsp;BatchOptions&amp;nbsp;bo&amp;nbsp;=&amp;nbsp;new&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;BatchOptions();&amp;nbsp;BatchResult&amp;nbsp;ret=null;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(multipleFiles.equalsIgnoreCase("true"))!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;bo.setGenerateManyFiles(true);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ret&amp;nbsp;=&amp;nbsp;outputService.generatePDFOutputBatch(templates,&amp;nbsp;data,&amp;nbsp;option,&amp;nbsp;bo);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ret&amp;nbsp;=&amp;nbsp;outputService.generatePDFOutputBatch(templates,&amp;nbsp;data,&amp;nbsp;option,&amp;nbsp;new&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;BatchOptions());!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ArrayList&amp;nbsp;outputs&amp;nbsp;=&amp;nbsp;new&amp;nbsp;ArrayList();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int&amp;nbsp;counter=0;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(ret.getMetaDataDoc()&amp;nbsp;!=null&amp;nbsp;){!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;toSave&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFolder+"Output.xml");!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ret.getMetaDataDoc().copyToFile(toSave);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outputs.add(toSave);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;List&lt;Document&gt;&amp;nbsp;list&amp;nbsp;=&amp;nbsp;ret.getGeneratedDocs();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for(Document&amp;nbsp;doc:list){!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;toSave&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFolder,"Output"+"_"+counter+".pdf");&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc.copyToFile(toSave);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outputs.add(toSave);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;counter++;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc.dispose();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;outputs;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(OutputServiceException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}catch&amp;nbsp;(FileNotFoundException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}catch&amp;nbsp;(IOException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;null;!!discoiqbr!!!!discoiqbr!!} 
  </codeblock> 
  <h3>generatePrintedOutput</h3> 
  <p>Generates a PCL, PostScript, and ZPL output from a form design and data file. The data file is merged with the form design and formatted for printing. You can send the output directly to a printer or save as a file. Use the generatePrintedOutput API for the form designs or data that are stored in an application.</p> 
  <p style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;"><strong>Syntax:</strong> <span class="code">Document generatePrintedOutput(String uriOrFileName, Document data, PrintedOutputOptions);</span></p> 
  <h4>Input Parameters</h4> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameter</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td>uriOrFileName<br /> </td> 
     <td>Specifies path and name of the input file. If only filename is specified, the file is read in relation to contentRoot specified in options. The file can be of type PDF or XDP.<br /> </td> 
    </tr> 
    <tr> 
     <td>data</td> 
     <td>An XML file that contains data that is merged with PDF documents.<br /> </td> 
    </tr> 
    <tr> 
     <td>options</td> 
     <td>Specifies values of contentRoot, locale, AcrobatVersion, linearizedPDF, and taggedPDF variables. The options parameter accepts object of type PrintedOutputOptions.<br /> </td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code sample generates a PCL, PostScript, and ZPL output from a form design and data. The output type depends upon the value passed to the <span class="code">printConfig </span>parameter. </p> 
  <codeblock gutter="true" class="syntax java">
    @Reference&amp;nbsp;private&amp;nbsp;OutputService&amp;nbsp;outputService;!!discoiqbr!!!!discoiqbr!!private&amp;nbsp;File&amp;nbsp;generatePrintedOutput(String&amp;nbsp;contentRoot,File&amp;nbsp;inputXML,String&amp;nbsp;templateStr,String&amp;nbsp;printConfig)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!String&amp;nbsp;outputFolder="C:/Output";!!discoiqbr!!!!discoiqbr!!Document&amp;nbsp;doc=null;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PrintedOutputOptions&amp;nbsp;options&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PrintedOutputOptions();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;options.setContentRoot(contentRoot);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(printConfig.equalsIgnoreCase("ps"))!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;options.setPrintConfig(PrintConfig.PS_PLAIN);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else&amp;nbsp;if(printConfig.equalsIgnoreCase("pcl"))&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;options.setPrintConfig(PrintConfig.HP_PCL_5e);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else&amp;nbsp;if(printConfig.equalsIgnoreCase("zpl"))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;options.setPrintConfig(PrintConfig.ZPL300);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;&amp;nbsp;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;InputStream&amp;nbsp;in&amp;nbsp;=&amp;nbsp;new&amp;nbsp;FileInputStream(inputXML);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc&amp;nbsp;=&amp;nbsp;outputService.generatePrintedOutput(templateStr,new&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Document(in),options);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;in.close();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;toSave&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFolder,"Output"+"."+printConfig);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc.copyToFile(toSave);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;&amp;nbsp;toSave;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(OutputServiceException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}catch&amp;nbsp;(FileNotFoundException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}catch&amp;nbsp;(IOException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}finally{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc.dispose();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;null;!!discoiqbr!!!!discoiqbr!!} 
  </codeblock> 
  <h3>generatePrintedOutput</h3> 
  <p>Generates a PCL, PostScript, and ZPL output given a form design and data file. The data file is merged with the form design and formatted for printing. The output can be sent directly to a printer or saved as file. Use the generatePrintedOutput API for the form designs or data stored in an application.</p> 
  <p style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;"><strong>Syntax:</strong> <span class="code">Document generatePrintedOutput(Document inputdocument, Document data, PrintedOutputOptions);</span></p> 
  <h4>Input Parameters</h4> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameter</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td>Inputdocument<br /> </td> 
     <td>Specifies path and name of the input file. If only filename is specified, the file is read in relation to contentRoot specified in options. The file can be of type XDP. </td> 
    </tr> 
    <tr> 
     <td>data</td> 
     <td>An XML file that contains data that is merged with PDF documents.<br /> </td> 
    </tr> 
    <tr> 
     <td>options</td> 
     <td>This object is used to set the values of contentRoot, locale, printConfig, copies, and paginationOverride. The options parameter accepts object of type PrintedOutputOptions.<br /> </td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code sample generates a PCL, PostScript, and ZPL output from a form design and data. The output type depends upon the value passed to the <span class="code">printConfig </span>parameter. </p> 
  <codeblock gutter="true" class="syntax java">
    @Reference&amp;nbsp;private&amp;nbsp;OutputService&amp;nbsp;outputService;!!discoiqbr!!!!discoiqbr!!private&amp;nbsp;File&amp;nbsp;generatePrintedOutput2(File&amp;nbsp;&amp;nbsp;inputXML,File&amp;nbsp;templateStr,String&amp;nbsp;printConfig)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!String&amp;nbsp;outputFolder="C:/Output";!!discoiqbr!!!!discoiqbr!!Document&amp;nbsp;doc=null;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PrintedOutputOptions&amp;nbsp;options&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PrintedOutputOptions();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(printConfig.equalsIgnoreCase("ps"))!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;options.setPrintConfig(PrintConfig.PS_PLAIN);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else&amp;nbsp;if(printConfig.equalsIgnoreCase("pcl"))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;options.setPrintConfig(PrintConfig.HP_PCL_5e);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else&amp;nbsp;if(printConfig.equalsIgnoreCase("zpl"))&amp;nbsp;{&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;options.setPrintConfig(PrintConfig.ZPL300);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;InputStream&amp;nbsp;inputXMlStream&amp;nbsp;=&amp;nbsp;new&amp;nbsp;FileInputStream(inputXML);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;InputStream&amp;nbsp;templateStream&amp;nbsp;=&amp;nbsp;new&amp;nbsp;FileInputStream(templateStr);&amp;nbsp;doc&amp;nbsp;=&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outputService.generatePrintedOutput(new&amp;nbsp;Document(templateStream),new&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Document(inputXMlStream),options);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;toSave&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFolder,"Output"+"."+printConfig);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc.copyToFile(toSave);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;toSave;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(OutputServiceException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}catch&amp;nbsp;(FileNotFoundException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(IOException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}finally{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc.dispose();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;null;!!discoiqbr!!!!discoiqbr!!} 
  </codeblock> 
  <h3>generatePrintedOutputBatch</h3> 
  <p>Generates a document of PS, PCL, and ZPL format by merging a form design with data. Optionally, generate a metadata file for each record or save the output to a PDF file. Use the generatePrintedOutputBatch API for the form designs or data that are stored on a network location, local file system, or HTTP location as literal values.</p> 
  <p><strong>Syntax<span class="code">:</span></strong><span class="code"> BatchResult generatePrintedOutputBatch(Map templates, Map data, PrintedOutputOptions options, BatchOptions batchOptions);</span></p> 
  <h4>Input Parameters</h4> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameter</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td>templates<br /> </td> 
     <td>Specifies the map of key and template filename.<br /> </td> 
    </tr> 
    <tr> 
     <td>data</td> 
     <td>Specifies map of key and data document. If key is not null, then data document is rendered with template for corresponding key in the templates Map.<br /> </td> 
    </tr> 
    <tr> 
     <td>options</td> 
     <td>Specifies object of type PrintedOutputOptions. This object is used to set the values of contentRoot, locale, printConfig, copies, paginationOverride.<br /> </td> 
    </tr> 
    <tr> 
     <td>batchOptions</td> 
     <td>Specifies value of variable generateManyFiles. Set the generateManyFiles flag to generate multiple files. The options parameter accepts object of type BatchOptions.<br /> </td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code sample generates PCL, PostScript, and ZPL output in batch from multiple form design templates and data files. The output type depends upon the value passed to the <span class="code">printConfig </span>parameter. </p> 
  <codeblock gutter="true" lineWrap="true" class="syntax java">
    @Reference&amp;nbsp;private&amp;nbsp;OutputService&amp;nbsp;outputService;!!discoiqbr!!!!discoiqbr!!private&amp;nbsp;ArrayList&amp;nbsp;generatePrintedOutputBatch(String&amp;nbsp;contentRoot,String&amp;nbsp;multipleFiles,String&amp;nbsp;printConfig)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!String&amp;nbsp;outputFolder="C:/Output";!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PrintedOutputOptions&amp;nbsp;option&amp;nbsp;=&amp;nbsp;new&amp;nbsp;PrintedOutputOptions();&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setContentRoot(contentRoot);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Map&amp;nbsp;templates&amp;nbsp;=&amp;nbsp;new&amp;nbsp;LinkedHashMap();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Map&amp;nbsp;data&amp;nbsp;=&amp;nbsp;new&amp;nbsp;LinkedHashMap();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;template1&amp;nbsp;=&amp;nbsp;"PurchaseOrder.xdp";!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String&amp;nbsp;template2&amp;nbsp;=&amp;nbsp;"CardApp.xdp";!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;templates.put(template1.substring(0,&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;template1.indexOf(".xdp")),template1);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;templates.put(template1.substring(0,&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;template2.indexOf(".xdp")),template2);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;inputXML1&amp;nbsp;=&amp;nbsp;new&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File("c:/InputFolder/PurchaseOrder.xml");!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;inputXML2&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File("c:/InputFolder/CardApp.xml");!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;InputStream&amp;nbsp;in1&amp;nbsp;=&amp;nbsp;new&amp;nbsp;FileInputStream(inputXML1);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;InputStream&amp;nbsp;in2&amp;nbsp;=&amp;nbsp;new&amp;nbsp;FileInputStream(inputXML2);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;data.put(template1.substring(0,&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;template1.indexOf(".xdp")),new&amp;nbsp;Document((in1)));!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;data.put(template2.substring(0,&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;template2.indexOf(".xdp")),new&amp;nbsp;Document((in2)));!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(printConfig.equalsIgnoreCase("ps"))!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setPrintConfig(PrintConfig.PS_PLAIN);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;if(printConfig.equalsIgnoreCase("pcl"))!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setPrintConfig(PrintConfig.HP_PCL_5e);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;else&amp;nbsp;if(printConfig.equalsIgnoreCase("zpl")){!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setPrintConfig(PrintConfig.ZPL300);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;option.setContentRoot(contentRoot);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;BatchOptions&amp;nbsp;bo&amp;nbsp;=&amp;nbsp;new&amp;nbsp;BatchOptions();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;BatchResult&amp;nbsp;ret&amp;nbsp;=&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outputService.generatePrintedOutputBatch(temp&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;lates,&amp;nbsp;data,&amp;nbsp;option,&amp;nbsp;new&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;BatchOptions());!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ArrayList&amp;nbsp;outputs&amp;nbsp;=&amp;nbsp;new&amp;nbsp;ArrayList();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int&amp;nbsp;counter=0;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(ret.getMetaDataDoc()&amp;nbsp;!=null&amp;nbsp;){!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;toSave&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFolder,"Output"+".xml");&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ret.getMetaDataDoc().copyToFile(toSave);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outputs.add(toSave);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;List&lt;Document&gt;&amp;nbsp;list&amp;nbsp;=&amp;nbsp;ret.getGeneratedDocs();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for(Document&amp;nbsp;doc:list){!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;toSave&amp;nbsp;=&amp;nbsp;new&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File(outputFolder,"Output"+"_"+counter+".&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"+printConfig);&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc.copyToFile(toSave);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outputs.add(toSave);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;counter++;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc.dispose();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;outputs;&amp;nbsp;&amp;nbsp;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;catch&amp;nbsp;(OutputServiceException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}catch&amp;nbsp;(FileNotFoundException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(IOException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;null;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;} 
  </codeblock> 
  <h2>Forms Service</h2> 
  <p>The Forms service provides APIs to import and export data to and from an interactive PDF form. An interactive PDF form is a PDF document that contains one or more fields used to display and collect information from the users. The service supports following APIs: </p> 
  <ul> 
   <li><strong><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-18">exportData</a>: </strong>exports data from a PDF form.</li> 
   <li><strong><a href="../../forms/using/aem-document-services-programmatically.md#main-pars-header-22">importData</a>:</strong> imports data into an interactive PDF Form.</li> 
  </ul> 
  <h3>exportData</h3> 
  <p>Exports form data from an interactive PDF form in XML and XDP formats.</p> 
  <p><strong>Syntax:</strong> <span class="code">Document exportData(Document xdpOrPdf, DataFormat dataFormat)</span></p> 
  <h4>Input Parameters</h4> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameter</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td>xdpOrPdf<br /> </td> 
     <td>Specifies a document object containing an XDP or PDF file. </td> 
    </tr> 
    <tr> 
     <td>dataFormat<br /> </td> 
     <td>Specified the format in which data is exported. It accepts variable of type enum(XDP, XmlData, Auto).<br /> </td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code sample exports form data from an interactive PDF form in XML and XDP formats.</p> 
  <h4>Sample</h4> 
  <codeblock gutter="true" class="syntax java">
    @Reference&amp;nbsp;private&amp;nbsp;FormsService&amp;nbsp;formsService;!!discoiqbr!!private&amp;nbsp;File&amp;nbsp;exportData(String&amp;nbsp;&amp;nbsp;dataFormat,&amp;nbsp;File&amp;nbsp;&amp;nbsp;inDoc)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!String&amp;nbsp;outputFolder="C:/Output";!!discoiqbr!!!!discoiqbr!!InputStream&amp;nbsp;in;&amp;nbsp;Document&amp;nbsp;doc=null;!!discoiqbr!!!!discoiqbr!!try&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;in&amp;nbsp;=&amp;nbsp;new&amp;nbsp;FileInputStream(inDoc);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if(dataFormat.equalsIgnoreCase("xml"))&amp;nbsp;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc=formsService.exportData(new&amp;nbsp;Document(in),&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;DataFormat.XmlData);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else&amp;nbsp;if(dataFormat.equalsIgnoreCase("xdp"))&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc&amp;nbsp;=formsService.exportData(new&amp;nbsp;Document(in),&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;DataFormat.XDP);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;toSave&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFolder,"Output"+"."+dataFormat);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc.copyToFile(toSave);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;toSave;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(FormsServiceException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}catch&amp;nbsp;(FileNotFoundException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(IOException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}finally{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc.dispose();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;null;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!!!discoiqbr!! 
  </codeblock> 
  <h3>importData</h3> 
  <p>Imports form data into an interactive PDF form.<br /> </p> 
  <p><strong>Syntax:</strong> <span class="code">Document importData(Document PDF, Document data)</span></p> 
  <h4>Input Parameters</h4> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameter</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td>PDF<br /> </td> 
     <td>Specifies a document object containing PDF files. </td> 
    </tr> 
    <tr> 
     <td>Data<br /> </td> 
     <td>An XML file that contains data in XML format.</td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code sample imports form data into an interactive PDF form.<br /> </p> 
  <h4>Sample</h4> 
  <codeblock gutter="true" class="syntax java">
    @Reference&amp;nbsp;private&amp;nbsp;FormsService&amp;nbsp;formsService!!discoiqbr!!!!discoiqbr!!private&amp;nbsp;File&amp;nbsp;importData(File&amp;nbsp;inDoc,&amp;nbsp;File&amp;nbsp;inXML)!!discoiqbr!!!!discoiqbr!!{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;String&amp;nbsp;outputFolder="C:/Output";!!discoiqbr!!!!discoiqbr!!&amp;nbsp;Document&amp;nbsp;doc=null;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;try&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;InputStream&amp;nbsp;in&amp;nbsp;=&amp;nbsp;new&amp;nbsp;FileInputStream(inDoc);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;InputStream&amp;nbsp;in2&amp;nbsp;=&amp;nbsp;new&amp;nbsp;FileInputStream(inXML);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc=formsService.importData(new&amp;nbsp;Document(in),&amp;nbsp;new&amp;nbsp;Document(in2));!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;File&amp;nbsp;toSave&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFolder,"Output.pdf");!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc.copyToFile(toSave);!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(FormsServiceException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}catch&amp;nbsp;(FileNotFoundException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&amp;nbsp;catch&amp;nbsp;(IOException&amp;nbsp;e)&amp;nbsp;{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}finally{!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doc.dispose();!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return&amp;nbsp;null;!!discoiqbr!!!!discoiqbr!!} 
  </codeblock> 
  <h2 id="PDFGeneratorService">PDF Generator Service</h2> 
  <p>The PDF Generator service provides APIs to converts native file formats to PDF. It also converts PDF to other file formats and optimizes the size of PDF documents. </p> 
  <h3>GeneratePDFService</h3> 
  <p>The GeneratePDFService provides APIs to convert various file formats such as .doc, .docx, .ppt, .pptx, .xls, .xlsx, .odp, .odt, .ods, (Deprecated).swf, .jpg, .bmp, .tif, .png, .html, and many other file formats to PDF. It also provides APIs to export PDF to various file formats and optimize PDFs. The service supports the following APIs:</p> 
  <ul> 
   <li><strong>createPDF</strong>: Converts a supported file type to a PDF document. It supports file formats such as Microsoft Word, Microsoft PowerPoint, Microsoft Excel, and Microsoft Project. In addition to these applications, any third party generic PDF generating application type can also be plugged into the API.</li> 
   <li><strong>exportPDF</strong>: Converts a PDF document to a supported file type. The method accepts a PDF as input and exports the content of the PDF in specified file type format. You can export a PDF document in Encapsulated PostScript( eps), HTML 3.2( htm, html), HTML 4.01 with CSS 1.0( htm, html), JPEG( jpg, jpeg, jpe), JPEG2000( jpf, jpx, jp2, j2k, j2c, jpc), Microsoft Word Document( doc, docx) Microsoft Excel Workbook( xlsx), Microsoft PowerPoint Presentation( pptx), PNG( png), PostScript( ps), Rich Text Format( rtf), Text(Accessible)( txt), Text(Plain)( txt) TIFF( tif, tiff), XML 1.0( xml), PDF/A-1a(sRGB), PDF/A-1b, PDF/A-2a(sRGB), PDF/A-2b(sRGB), PDF/A-3a(sRGB), PDF/A-3b(sRGB) formats. You can also specify <a href="/content/help/en/acrobat/using/preflight-profiles-acrobat-pro" target="_blank">custom Preflight profiles</a> for the PDF outputs. </li> 
  </ul> 
  <ul> 
   <li><strong>optimizePDF</strong>: Optimizes the PDF document and also converts a PDF document from one type to another. The method accepts a PDF document as input.</li> 
   <li><strong>htmlToPdf2</strong>: Converts an HTML page to a PDF document. It accepts URL of the HTML page as input.</li> 
  </ul> 
  <note> 
   <p>The HTMLtoPDF API is deprecated for AEM Forms server running on AIX operating system.</p> 
  </note> 
  <h4>PDF Generator API available on Microsoft Windows and Linux</h4> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <td style="text-align: center;" width="40%"><strong>API</strong></td> 
     <td style="text-align: center;" valign="top" width="98"><p><strong>Microsoft Windows </strong></p> </td> 
     <td style="text-align: center;"><strong>Linux </strong></td> 
    </tr> 
    <tr> 
     <td style="text-align: center;">createPDF</td> 
     <td style="text-align: center;"><strong></strong></td> 
     <td style="text-align: center;"><strong></strong></td> 
    </tr> 
    <tr> 
     <td style="text-align: center;">exportPDF</td> 
     <td style="text-align: center;"><strong></strong></td> 
     <td style="text-align: center;"><strong></strong></td> 
    </tr> 
    <tr> 
     <td style="text-align: center;">optimizePDF</td> 
     <td style="text-align: center;"><strong></strong></td> 
     <td style="text-align: center;"></td> 
    </tr> 
    <tr> 
     <td style="text-align: center;">exportPDF</td> 
     <td style="text-align: center;"><strong></strong></td> 
     <td style="text-align: center;"></td> 
    </tr> 
    <tr> 
     <td style="text-align: center;">OCR PDF (searchable PDF)</td> 
     <td style="text-align: center;"><strong></strong></td> 
     <td style="text-align: center;"></td> 
    </tr> 
   </tbody> 
  </table> 
  <h4 id="createPDF">createPDF</h4> 
  <p>The createPDF API converts a supported file type to a PDF document. It supports various file formats such as Microsoft Word, Microsoft PowerPoint, Microsoft Excel, and Microsoft Project. In addition to these applications, any third party generic PDF generating application type can also be plugged into the API.<br /> </p> 
  <p>For the conversion, only a few parameters are mandatory. An input document is mandatory parameter. You can apply the security permissions, PDF Output Settings, and Metadata information later to the output PDF document.</p> 
  <p>The createPDF service returns a java.util.Map with results. The keys of the map are: </p> 
  <ul> 
   <li>ConvertedDoc: It contains the newly created PDF document.</li> 
   <li>LogDoc: It contains the log file.</li> 
  </ul> 
  <p>The createPDF service throws the following exceptions:</p> 
  <ul> 
   <li>ConversionException<br /> </li> 
   <li>InvalidParameterException<br /> </li> 
   <li>FileFormatNotSupportedException<br /> </li> 
  </ul> 
  <p><strong>Syntax:</strong> <span class="code"> Map createPDF(Document inputDoc, String inputFilename, String fileTypeSettings, String pdfSettings, String securitySettings, Document settingsDoc, Document xmpDoc) throws InvalidParameterException, ConversionException, FileFormatNotSupportedException;</span></p> 
  <h4>Input Parameters</h4> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameter</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td>inputDoc<br /> </td> 
     <td>Specifies a document object. The document object contains the input file. Create a com.adobe.aemfd.docmanager.Document object over the input document. It is a mandatory parameter.</td> 
    </tr> 
    <tr> 
     <td>inputFileName<br /> </td> 
     <td>The name of the input file along with the extension. It is a mandatory parameter.<br /> </td> 
    </tr> 
    <tr> 
     <td>fileTypeSettings</td> 
     <td>It is an optional parameter.</td> 
    </tr> 
    <tr> 
     <td>pdfSettings</td> 
     <td><p>PDF output for the converted document. You can apply only following settings:</p> 
      <ul> 
       <li>High_Quality_Print<br /> </li> 
       <li>PDFA1b_2005_RGB<br /> </li> 
       <li>PDFA1b_2005_CMYK<br /> </li> 
       <li>PDFX1a_2001<br /> </li> 
       <li>PDFX3_2002<br /> </li> 
       <li>Press_Quality<br /> </li> 
       <li>Smallest_File_Size</li> 
      </ul> <p>It is an optional parameter.<br /> </p> </td> 
    </tr> 
    <tr> 
     <td>securitySettings</td> 
     <td><p>Security settings for the converted document. You can apply the following settings:</p> 
      <ul> 
       <li>No Security</li> 
       <li>Password Security<br /> </li> 
       <li>Certificate Security<br /> </li> 
       <li>Adobe Policy Server</li> 
      </ul> <p>It is an optional parameter.</p> </td> 
    </tr> 
    <tr> 
     <td>settingsDoc</td> 
     <td>The file contains the settings applied while generating the PDF document (Such as, Optimizing PDF document for Web View) and settings applied after creating the PDF document (Such as, Initial View and Security). It is an optional parameter.<br /> </td> 
    </tr> 
    <tr> 
     <td>xmpDoc </td> 
     <td>The file contains metadata information applied to the generated PDF Document. This parameter is optional.<br /> </td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code converts a document of supported file type to a PDF document. </p> 
  <codeblock lineWrap="true" class="syntax java">
    @Reference&amp;nbsp;GeneratePDFService&amp;nbsp;generatePdfService;!!discoiqbr!!File&amp;nbsp;createPDF(File&amp;nbsp;inputFile,&amp;nbsp;String&amp;nbsp;inputFilename,&amp;nbsp;String&amp;nbsp;fileTypeSettings,&amp;nbsp;String&amp;nbsp;pdfSettings,&amp;nbsp;String&amp;nbsp;securitySettings,&amp;nbsp;File&amp;nbsp;settingsFile,&amp;nbsp;File&amp;nbsp;xmpFile)&amp;nbsp;throws&amp;nbsp;Exception!!discoiqbr!!{!!discoiqbr!!&amp;nbsp;Transaction&amp;nbsp;tx&amp;nbsp;=&amp;nbsp;OSGiUtils.getTransactionManager().getTransaction();!!discoiqbr!!&amp;nbsp;//&amp;nbsp;Begin&amp;nbsp;transaction!!discoiqbr!!&amp;nbsp;if&amp;nbsp;(tx&amp;nbsp;==&amp;nbsp;null)!!discoiqbr!!&amp;nbsp;OSGiUtils.getTransactionManager().begin();!!discoiqbr!!&amp;nbsp;String&amp;nbsp;outputFolder="C:/Output"!!discoiqbr!!&amp;nbsp;Document&amp;nbsp;convertedDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;Document&amp;nbsp;settingsDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;Document&amp;nbsp;xmpDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;try!!discoiqbr!!&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;if(inputFilename&amp;nbsp;==&amp;nbsp;null&amp;nbsp;||&amp;nbsp;inputFilename.trim().equals(""))&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;throw&amp;nbsp;new&amp;nbsp;Exception("Input&amp;nbsp;file&amp;nbsp;name&amp;nbsp;cannot&amp;nbsp;be&amp;nbsp;null");!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;if(inputFileExtension.lastIndexOf('.')&amp;nbsp;==&amp;nbsp;-1)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;throw&amp;nbsp;new&amp;nbsp;Exception("Input&amp;nbsp;file&amp;nbsp;should&amp;nbsp;have&amp;nbsp;an&amp;nbsp;extension");!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;if(settingsFile&amp;nbsp;!=&amp;nbsp;null&amp;nbsp;&amp;&amp;&amp;nbsp;settingsFile.exists()&amp;nbsp;&amp;&amp;&amp;nbsp;settingsFile.isFile())!!discoiqbr!!&amp;nbsp;&amp;nbsp;settingsDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(settingsFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;if(xmpFile&amp;nbsp;!=&amp;nbsp;null&amp;nbsp;&amp;&amp;&amp;nbsp;xmpFile.exists()&amp;nbsp;&amp;&amp;&amp;nbsp;xmpFile.isFile())!!discoiqbr!!&amp;nbsp;&amp;nbsp;xmpDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(xmpFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Map&amp;nbsp;result&amp;nbsp;=&amp;nbsp;generatePdfService.createPDF(inDoc,&amp;nbsp;inputFilename,&amp;nbsp;fileTypeSettings,&amp;nbsp;pdfSettings,&amp;nbsp;securitySettings,&amp;nbsp;settingsDoc,&amp;nbsp;xmpDoc);!!discoiqbr!!&amp;nbsp;&amp;nbsp;convertedDoc&amp;nbsp;=&amp;nbsp;(Document)result.get("ConvertedDoc");!!discoiqbr!!&amp;nbsp;&amp;nbsp;OSGiUtils.getTransactionManager().commit();!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;outputFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFolder,"Output.pdf");!!discoiqbr!!&amp;nbsp;&amp;nbsp;doc.copyToFile(outputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;return&amp;nbsp;outputFile;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;catch&amp;nbsp;(Exception&amp;nbsp;e)!!discoiqbr!!&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(OSGiUtils.getTransactionManager().getTransaction()&amp;nbsp;!=&amp;nbsp;null)!!discoiqbr!!&amp;nbsp;&amp;nbsp;OSGiUtils.getTransactionManager().rollback();!!discoiqbr!!&amp;nbsp;&amp;nbsp;throw&amp;nbsp;e;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;finally&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(convertedDoc&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;convertedDoc.dispose();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;convertedDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(inDoc&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc.dispose();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(settingsDoc&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;settingsDoc.dispose();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;settingsDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(xmpDoc&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;xmpDoc.dispose();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;xmpDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!} 
  </codeblock> 
  <h4 id="exportPDF">exportPDF</h4> 
  <p>Converts a PDF document to a supported file type. The method accepts a PDF as input and exports the content of the PDF in specified file type format.</p> 
  <p>The createPDF service returns a java.util.Map with results. The keys of the map are: </p> 
  <ul> 
   <li>ConvertedDoc: It contains the output document.</li> 
  </ul> 
  <p>The createPDF service throws the following exceptions:</p> 
  <ul> 
   <li>ConversionException<br /> </li> 
   <li>InvalidParameterException<br /> </li> 
   <li>FileFormatNotSupportedException</li> 
  </ul> 
  <p><strong>Syntax:</strong> <code class="code"> Map exportPDF(Document inputDoc, String inputFileName, String formatType, Document settingsDoc) throws ConversionException, InvalidParameterException, FileFormatNotSupportedException;
    <discoiqbr /> </code></p> 
  <h4>Input Parameters</h4> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameter</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td>inputDoc<br /> </td> 
     <td>Specifies the document to be converted. </td> 
    </tr> 
    <tr> 
     <td>inputFileName<br /> </td> 
     <td>The name of the file along with the extension.<br /> </td> 
    </tr> 
    <tr> 
     <td>formatType</td> 
     <td>The output file format for the exportPDF API.<br /> </td> 
    </tr> 
    <tr> 
     <td>settingsDoc </td> 
     <td>The file contains the configurations to be applied while generating the output document. Generally, it is an XML file.</td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code sample converts a PDF document to specified file type.<br /> </p> 
  <codeblock lineWrap="true" class="syntax java">
    (tx&amp;nbsp;==&amp;nbsp;null)!!discoiqbr!!OSGiUtils.getTransactionManager().begin();!!discoiqbr!!String&amp;nbsp;outputFolder="C:/Output"!!discoiqbr!!Document&amp;nbsp;convertedDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!Document&amp;nbsp;settingsDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!try!!discoiqbr!!{!!discoiqbr!!&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inputFile);!!discoiqbr!!&amp;nbsp;if(inputFileName&amp;nbsp;==&amp;nbsp;null&amp;nbsp;||&amp;nbsp;inputFileName.trim().equals(""))&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;throw&amp;nbsp;new&amp;nbsp;Exception("Input&amp;nbsp;file&amp;nbsp;name&amp;nbsp;cannot&amp;nbsp;be&amp;nbsp;null");!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;if(inputFileExtension.lastIndexOf('.')&amp;nbsp;==&amp;nbsp;-1)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;throw&amp;nbsp;new&amp;nbsp;Exception("Input&amp;nbsp;file&amp;nbsp;should&amp;nbsp;have&amp;nbsp;an&amp;nbsp;extension");!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;if(settingsFile&amp;nbsp;!=&amp;nbsp;null&amp;nbsp;&amp;&amp;&amp;nbsp;settingsFile.exists()&amp;nbsp;&amp;&amp;&amp;nbsp;settingsFile.isFile())!!discoiqbr!!&amp;nbsp;settingsDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(settingsFile);!!discoiqbr!!&amp;nbsp;Map&amp;nbsp;result&amp;nbsp;=&amp;nbsp;generatePdfService.exportPDF(inDoc,&amp;nbsp;inputFileName,&amp;nbsp;formatType,&amp;nbsp;settingsDoc);!!discoiqbr!!&amp;nbsp;convertedDoc&amp;nbsp;=&amp;nbsp;(Document)result.get("ConvertedDoc");!!discoiqbr!!&amp;nbsp;OSGiUtils.getTransactionManager().commit();!!discoiqbr!!&amp;nbsp;File&amp;nbsp;outputFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFolder,"OutputFile");!!discoiqbr!!&amp;nbsp;doc.copyToFile(outputFile);!!discoiqbr!!&amp;nbsp;return&amp;nbsp;outputFile;!!discoiqbr!!}!!discoiqbr!!catch&amp;nbsp;(Exception&amp;nbsp;e)!!discoiqbr!!{!!discoiqbr!!&amp;nbsp;if&amp;nbsp;(OSGiUtils.getTransactionManager().getTransaction()&amp;nbsp;!=&amp;nbsp;null)!!discoiqbr!!&amp;nbsp;OSGiUtils.getTransactionManager().rollback();!!discoiqbr!!&amp;nbsp;throw&amp;nbsp;e;!!discoiqbr!!}!!discoiqbr!!finally&amp;nbsp;{!!discoiqbr!!&amp;nbsp;if&amp;nbsp;(convertedDoc&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;convertedDoc.dispose();!!discoiqbr!!&amp;nbsp;&amp;nbsp;convertedDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;if&amp;nbsp;(inDoc&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;inDoc.dispose();!!discoiqbr!!&amp;nbsp;&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;if&amp;nbsp;(settingsDoc&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;settingsDoc.dispose();!!discoiqbr!!&amp;nbsp;&amp;nbsp;settingsDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!}!!discoiqbr!!} 
  </codeblock> 
  <h4 id="optimizePDF">optimizePDF</h4> 
  <p>The OptimizePDF API optimizes PDF files by reducing their size. The result of this conversion is PDF files that might be smaller than their original versions. This operation also converts PDF documents to the PDF version specified in the optimization parameters. It returns OptimizePDFResult object containing optimized PDF.</p> 
  <p>The createPDF service throws the following exceptions:</p> 
  <ul> 
   <li>ConversionException<br /> </li> 
   <li>InvalidParameterException<br /> </li> 
   <li>FileFormatNotSupportedException</li> 
  </ul> 
  <p><strong>Syntax:</strong> <code class="code"> OptimizePDFResult optimizePDF(Document inputDoc, String fileTypeSettings, Document settingsDoc) throws ConversionException, InvalidParameterException, FileFormatNotSupportedException;
    <discoiqbr /> </code></p> 
  <h4>Input Parameters</h4> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameter</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td>inputDoc<br /> </td> 
     <td>Specifies the input document. It is a mandatory parameter.</td> 
    </tr> 
    <tr> 
     <td>fileTypeSettings<br /> </td> 
     <td>It is an optional parameter.<br /> </td> 
    </tr> 
    <tr> 
     <td>settingsDoc </td> 
     <td>The file contains the settings applied while generating the PDF document (Such as, Optimizing PDF document for Web View) and settings applied after creating the PDF document (Such as, Initial View and Security). It is an optional parameter.<br /> </td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code sample optimizes the input PDF file by reducing its size.<br /> </p> 
  <codeblock lineWrap="true" class="syntax java">
    @Reference&amp;nbsp;GeneratePDFService&amp;nbsp;generatePdfService;!!discoiqbr!!File&amp;nbsp;optimizePDF(File&amp;nbsp;inputFile,&amp;nbsp;String&amp;nbsp;fileTypeSettings,&amp;nbsp;File&amp;nbsp;settingsFile)&amp;nbsp;throws&amp;nbsp;Exception!!discoiqbr!!{!!discoiqbr!!&amp;nbsp;Transaction&amp;nbsp;tx&amp;nbsp;=&amp;nbsp;OSGiUtils.getTransactionManager().getTransaction();!!discoiqbr!!&amp;nbsp;//&amp;nbsp;Begin&amp;nbsp;transaction!!discoiqbr!!&amp;nbsp;if&amp;nbsp;(tx&amp;nbsp;==&amp;nbsp;null)!!discoiqbr!!&amp;nbsp;OSGiUtils.getTransactionManager().begin();!!discoiqbr!!&amp;nbsp;String&amp;nbsp;outputFolder="C:/Output"!!discoiqbr!!&amp;nbsp;Document&amp;nbsp;convertedDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;Document&amp;nbsp;settingsDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;try!!discoiqbr!!&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;if(settingsFile&amp;nbsp;!=&amp;nbsp;null&amp;nbsp;&amp;&amp;&amp;nbsp;settingsFile.exists()&amp;nbsp;&amp;&amp;&amp;nbsp;settingsFile.isFile())!!discoiqbr!!&amp;nbsp;&amp;nbsp;settingsDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(settingsFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;OptimizePDFResult&amp;nbsp;result&amp;nbsp;=&amp;nbsp;generatePdfService.optimizePDF(inDoc,&amp;nbsp;fileTypeSettings,&amp;nbsp;settingsDoc);!!discoiqbr!!&amp;nbsp;&amp;nbsp;convertedDoc&amp;nbsp;=&amp;nbsp;result.getConvertedDocument();!!discoiqbr!!&amp;nbsp;&amp;nbsp;OSGiUtils.getTransactionManager().commit();!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;outputFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFolder,"Output.pdf");!!discoiqbr!!&amp;nbsp;&amp;nbsp;doc.copyToFile(outputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;return&amp;nbsp;outputFile;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;catch&amp;nbsp;(Exception&amp;nbsp;e)!!discoiqbr!!&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(OSGiUtils.getTransactionManager().getTransaction()&amp;nbsp;!=&amp;nbsp;null)!!discoiqbr!!&amp;nbsp;&amp;nbsp;OSGiUtils.getTransactionManager().rollback();!!discoiqbr!!&amp;nbsp;&amp;nbsp;throw&amp;nbsp;e;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;finally&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(convertedDoc&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;convertedDoc.dispose();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;convertedDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(inDoc&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc.dispose();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(settingsDoc&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;settingsDoc.dispose();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;settingsDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!} 
  </codeblock> 
  <h4>htmlToPdf2</h4> 
  <p>Converts an HTML page to a PDF document. It accepts URL of the HTML page as input.</p> 
  <p>The htmlToPdf2 service returns an HtmlToPdfResult object. You can obtain the converted PDF via result.getConvertedDocument().</p> 
  <p>The htmlToPdf2 service throws the following exceptions:</p> 
  <ul> 
   <li>ConversionException<br /> </li> 
   <li>InvalidParameterException<br /> </li> 
   <li>FileFormatNotSupportedException</li> 
  </ul> 
  <p><strong>Syntax:</strong> <code class="code"> HtmlToPdfResult htmlToPdf2(String inputUrl, String fileTypeSettingsName, String securitySettingsName, Document settingsDoc, Document xmpDoc) throws ConversionException, InvalidParameterException, FileFormatNotSupportedException;
    <discoiqbr /> </code></p> 
  <h4>Input Parameters</h4> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameter</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td>inputDoc<br /> </td> 
     <td>Specifies the input document. It is a mandatory parameter.</td> 
    </tr> 
    <tr> 
     <td>fileTypeSettings<br /> </td> 
     <td>It is an optional parameter.<br /> </td> 
    </tr> 
    <tr> 
     <td>settingsDoc </td> 
     <td>The file contains the settings applied while generating the PDF document (Such as, Optimizing PDF document for Web View) and settings applied after creating the PDF document (Such as, Initial View and Security). It is an optional parameter.<br /> </td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code sample converts an HTML page to a PDF document.<br /> </p> 
  <codeblock lineWrap="true" class="syntax java">
    Reference&amp;nbsp;GeneratePDFService&amp;nbsp;generatePdfService;!!discoiqbr!!File&amp;nbsp;htmlToPdf(String&amp;nbsp;inputUrl,&amp;nbsp;String&amp;nbsp;fileTypeSettingsName,&amp;nbsp;String&amp;nbsp;securitySettingsName,&amp;nbsp;File&amp;nbsp;settingsFile,&amp;nbsp;File&amp;nbsp;xmpFile)&amp;nbsp;throws&amp;nbsp;Exception!!discoiqbr!!{!!discoiqbr!!&amp;nbsp;Transaction&amp;nbsp;tx&amp;nbsp;=&amp;nbsp;OSGiUtils.getTransactionManager().getTransaction();!!discoiqbr!!&amp;nbsp;//&amp;nbsp;Begin&amp;nbsp;transaction!!discoiqbr!!&amp;nbsp;if&amp;nbsp;(tx&amp;nbsp;==&amp;nbsp;null)!!discoiqbr!!&amp;nbsp;OSGiUtils.getTransactionManager().begin();!!discoiqbr!!&amp;nbsp;String&amp;nbsp;outputFolder="C:/Output"!!discoiqbr!!&amp;nbsp;Document&amp;nbsp;convertedDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;Document&amp;nbsp;settingsDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;Document&amp;nbsp;xmpDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;try!!discoiqbr!!&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;if(settingsFile&amp;nbsp;!=&amp;nbsp;null&amp;nbsp;&amp;&amp;&amp;nbsp;settingsFile.exists()&amp;nbsp;&amp;&amp;&amp;nbsp;settingsFile.isFile())!!discoiqbr!!&amp;nbsp;&amp;nbsp;settingsDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(settingsFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;if(xmpFile&amp;nbsp;!=&amp;nbsp;null&amp;nbsp;&amp;&amp;&amp;nbsp;xmpFile.exists()&amp;nbsp;&amp;&amp;&amp;nbsp;xmpFile.isFile())!!discoiqbr!!&amp;nbsp;&amp;nbsp;xmpDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(xmpFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;HtmlToPdfResult&amp;nbsp;result&amp;nbsp;=&amp;nbsp;generatePdfService.htmlToPdf2(inputURL,&amp;nbsp;fileTypeSettingsName,&amp;nbsp;securitySettingsName,&amp;nbsp;settingsDoc,&amp;nbsp;xmpDoc);;!!discoiqbr!!&amp;nbsp;&amp;nbsp;convertedDoc&amp;nbsp;=&amp;nbsp;result.getConvertedDocument();!!discoiqbr!!&amp;nbsp;&amp;nbsp;OSGiUtils.getTransactionManager().commit();!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;outputFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFolder,"Output.pdf");!!discoiqbr!!&amp;nbsp;&amp;nbsp;doc.copyToFile(outputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;return&amp;nbsp;outputFile;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;catch&amp;nbsp;(Exception&amp;nbsp;e)!!discoiqbr!!&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(OSGiUtils.getTransactionManager().getTransaction()&amp;nbsp;!=&amp;nbsp;null)!!discoiqbr!!&amp;nbsp;&amp;nbsp;OSGiUtils.getTransactionManager().rollback();!!discoiqbr!!&amp;nbsp;&amp;nbsp;throw&amp;nbsp;e;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;finally&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(convertedDoc&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;convertedDoc.dispose();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;convertedDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(xmpDoc&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;xmpDoc.dispose();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;xmpDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(settingsDoc&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;settingsDoc.dispose();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;settingsDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!} 
  </codeblock> 
  <h3>DistillerService</h3> 
  <p>The Distiller service converts PostScript, Encapsulated PostScript (EPS), and printer text files (PRN) to PDF files. The Distiller service is frequently used to convert large volumes of print documents to electronic documents, such as invoices and statements. Converting documents to PDF also allows enterprises to send their customers a paper version and an electronic version of a document. The supported file formats are .ps, .eps, and .prn. The service supports the following API:</p> 
  <p>The createPDF service returns a java.util.Map with results. The keys of the map are: </p> 
  <ul> 
   <li>ConvertedDoc : It contains the newly created PDF document.</li> 
   <li>LogDoc : It contains the log file.</li> 
  </ul> 
  <p>The createPDF service throws the following exceptions:</p> 
  <ul> 
   <li>ConversionException<br /> </li> 
   <li>InvalidParameterException<br /> </li> 
   <li>FileFormatNotSupportedException</li> 
  </ul> 
  <h4>createPDF</h4> 
  <p>Converts the supported formats to PDF documents. The method accepts files formats .ps, .eps, and .prn as an input. You can apply specific security permissions, output settings, and Metadata information to the output PDF document.</p> 
  <p><strong>Syntax:</strong> <code class="code"> Map createPDF(Document inputDoc, String inputFileName, String pdfSettings, String securitySettings, Document settingsDoc, Document xmpDoc) throws ConversionException, InvalidParameterException, FileFormatNotSupportedException;
    <discoiqbr /> </code></p> 
  <h4>Input Parameters</h4> 
  <table border="1" cellpadding="1" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th>Parameter</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td>inputDoc<br /> </td> 
     <td>Specifies the input document. It is a mandatory parameter.</td> 
    </tr> 
    <tr> 
     <td>inputFileName</td> 
     <td>Specifies the complete name of the input file along with the extension of the file. It is a mandatory parameter.</td> 
    </tr> 
    <tr> 
     <td>pdfSettings</td> 
     <td><p>PDF output settings for the converted document. You can apply only following settings:</p> 
      <ul> 
       <li>High_Quality_Print<br /> </li> 
       <li>PDFA1b_2005_RGB<br /> </li> 
       <li>PDFA1b_2005_CMYK<br /> </li> 
       <li>PDFX1a_2001<br /> </li> 
       <li>PDFX3_2002<br /> </li> 
       <li>Press_Quality<br /> </li> 
       <li>Smallest_File_Size</li> 
      </ul> <p>It is an optional parameter.</p> </td> 
    </tr> 
    <tr> 
     <td>securitySettings</td> 
     <td><p>Security settings for the converted document. You can apply the following settings:</p> 
      <ul> 
       <li>No Security</li> 
       <li>Password Security<br /> </li> 
       <li>Certificate Security<br /> </li> 
       <li>Adobe Policy Server</li> 
      </ul> <p>It is an optional parameter.</p> </td> 
    </tr> 
    <tr> 
     <td>settingsDoc </td> 
     <td>The file contains the settings applied while generating the PDF document (Such as, Optimizing PDF document for Web View) and settings applied after creating the PDF document (Such as, Initial View and Security). It is an optional parameter.<br /> </td> 
    </tr> 
    <tr> 
     <td>xmpDoc </td> 
     <td>The file contains metadata information for generated PDF Document. It is an optional parameter.</td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following Java code sample converts input files of type PostScript (PS), Encapsulated PostScript (EPS), and printer text files (PRN) to PDF files. <br /> </p> 
  <codeblock lineWrap="true" class="syntax java">
    @Reference&amp;nbsp;DistillerService&amp;nbsp;distillerService;!!discoiqbr!!File&amp;nbsp;createPDF(File&amp;nbsp;inputFile,&amp;nbsp;String&amp;nbsp;inputFilename,&amp;nbsp;String&amp;nbsp;pdfSettings,&amp;nbsp;String&amp;nbsp;securitySettings,&amp;nbsp;File&amp;nbsp;settingsFile,&amp;nbsp;File&amp;nbsp;xmpFile)&amp;nbsp;throws&amp;nbsp;Exception!!discoiqbr!!{!!discoiqbr!!&amp;nbsp;Transaction&amp;nbsp;tx&amp;nbsp;=&amp;nbsp;OSGiUtils.getTransactionManager().getTransaction();!!discoiqbr!!&amp;nbsp;//&amp;nbsp;Begin&amp;nbsp;transaction!!discoiqbr!!&amp;nbsp;if&amp;nbsp;(tx&amp;nbsp;==&amp;nbsp;null)!!discoiqbr!!&amp;nbsp;OSGiUtils.getTransactionManager().begin();!!discoiqbr!!&amp;nbsp;String&amp;nbsp;outputFolder="C:/Output"!!discoiqbr!!&amp;nbsp;Document&amp;nbsp;convertedDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;Document&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;Document&amp;nbsp;settingsDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;Document&amp;nbsp;xmpDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;try!!discoiqbr!!&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(inputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;if(inputFilename&amp;nbsp;==&amp;nbsp;null&amp;nbsp;||&amp;nbsp;inputFilename.trim().equals(""))&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;throw&amp;nbsp;new&amp;nbsp;Exception("Input&amp;nbsp;file&amp;nbsp;name&amp;nbsp;cannot&amp;nbsp;be&amp;nbsp;null");!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;if(inputFileExtension.lastIndexOf('.')&amp;nbsp;==&amp;nbsp;-1)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;throw&amp;nbsp;new&amp;nbsp;Exception("Input&amp;nbsp;file&amp;nbsp;should&amp;nbsp;have&amp;nbsp;an&amp;nbsp;extension");!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;if(settingsFile&amp;nbsp;!=&amp;nbsp;null&amp;nbsp;&amp;&amp;&amp;nbsp;settingsFile.exists()&amp;nbsp;&amp;&amp;&amp;nbsp;settingsFile.isFile())!!discoiqbr!!&amp;nbsp;&amp;nbsp;settingsDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(settingsFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;if(xmpFile&amp;nbsp;!=&amp;nbsp;null&amp;nbsp;&amp;&amp;&amp;nbsp;xmpFile.exists()&amp;nbsp;&amp;&amp;&amp;nbsp;xmpFile.isFile())!!discoiqbr!!&amp;nbsp;&amp;nbsp;xmpDoc&amp;nbsp;=&amp;nbsp;new&amp;nbsp;Document(xmpFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;Map&amp;nbsp;result&amp;nbsp;=&amp;nbsp;distillerService.createPDF(inDoc,&amp;nbsp;inputFilename,&amp;nbsp;pdfSettings,&amp;nbsp;securitySettings,&amp;nbsp;settingsDoc,&amp;nbsp;xmpDoc);!!discoiqbr!!&amp;nbsp;&amp;nbsp;convertedDoc&amp;nbsp;=&amp;nbsp;(Document)result.get("ConvertedDoc");!!discoiqbr!!&amp;nbsp;&amp;nbsp;OSGiUtils.getTransactionManager().commit();!!discoiqbr!!&amp;nbsp;&amp;nbsp;File&amp;nbsp;outputFile&amp;nbsp;=&amp;nbsp;new&amp;nbsp;File(outputFolder,"Output.pdf");!!discoiqbr!!&amp;nbsp;&amp;nbsp;doc.copyToFile(outputFile);!!discoiqbr!!&amp;nbsp;&amp;nbsp;return&amp;nbsp;outputFile;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;catch&amp;nbsp;(Exception&amp;nbsp;e)!!discoiqbr!!&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(OSGiUtils.getTransactionManager().getTransaction()&amp;nbsp;!=&amp;nbsp;null)!!discoiqbr!!&amp;nbsp;&amp;nbsp;OSGiUtils.getTransactionManager().rollback();!!discoiqbr!!&amp;nbsp;&amp;nbsp;throw&amp;nbsp;e;!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!&amp;nbsp;finally&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(convertedDoc&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;convertedDoc.dispose();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;convertedDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(inDoc&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc.dispose();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;inDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(settingsDoc&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;settingsDoc.dispose();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;settingsDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;&amp;nbsp;if&amp;nbsp;(xmpDoc&amp;nbsp;!=&amp;nbsp;null)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;xmpDoc.dispose();!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;xmpDoc&amp;nbsp;=&amp;nbsp;null;!!discoiqbr!!&amp;nbsp;&amp;nbsp;}!!discoiqbr!!&amp;nbsp;}!!discoiqbr!!} 
  </codeblock> 
  <related-links> 
   <a href="../../forms/using/assembler-service.md">Using Assembler Service</a> 
   <a href="../../forms/using/overview-aem-document-services.md">Overview of AEM Document Services</a> 
  </related-links> 
 </body> 
</html>