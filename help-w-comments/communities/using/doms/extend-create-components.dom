<?xml version="1.1" encoding="UTF-8" standalone="yes"?> 
<html> 
 <head> 
  <meta content="carlino@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="e288bc5a-80b5-41c6-ab89-a347880c8968" name="jcr:uuid" /> 
  <meta content="carlino" name="cq:lastModifiedBy" /> 
  <meta content="2017-10-31T16:33:37.123-0400" name="firstPublishExternalDate" /> 
  <meta content="2018-04-03T07:43:29.958-0400" name="lastPublishExternalDate" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="2018-04-03T07:43:29.958-0400" name="topicBrowsingSortDate" /> 
  <meta content="User" name="contentOwner" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="carlino" name="cq:lastReplicatedBy" /> 
  <meta content="2018-05-17T05:54:52.086-0400" name="locHandOffDate" /> 
  <meta content="Create the Components" name="navTitle" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="2018-05-17T05:54:52.087-0400" name="cq:lastModified" /> 
  <meta content="https://helpx.adobe.com/experience-manager/6-4/communities/using/extend-create-components.html" name="publishExternalURL" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="mwpw_migration_script_version" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="Create the Comments component" name="seoDescription" /> 
  <meta content="2017-10-12T21:46:58.665-0400" name="qaDate" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/COMMUNITIES" name="primaryProductTag" /> 
  <meta content="2017-12-01T19:05:53.251-0500" name="jcr:created" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="2018-04-03T07:43:29.958-0400" name="publishExternalDate" /> 
  <meta content="Create the Components" name="jcr:title" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="2018-04-03T07:43:31.313-0400" name="cq:lastReplicated" /> 
  <meta content="products:SG_EXPERIENCEMANAGER/6.4/COMMUNITIES;topic_tags:developing;content_type:reference" name="cq:tags" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="e96d4219-75df-47df-a56f-9e2b8b51b1ce" name="jcr:predecessors" /> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="Create the Components" name="seoTitle" /> 
  <meta content="/content/docs/en/aem/6-3/develop/communities/tutorials/extend-comments/create-components" name="qaNotes" /> 
 </head> 
 <body> 
  <table cellpadding="4" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <td> </td> 
     <td style="text-align: right;"><strong><a href="../../communities/using/extend-sample-page.md">Add Comment to Sample Page ⇒</a></strong></td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The example of extending components uses the comment system, which is actually composed of two components</p> 
  <ul> 
   <li>comments - the encompassing comment system which is the component placed on a page</li> 
   <li>comment - the component which captures an instance of a posted comment</li> 
  </ul> 
  <div>
    Both components needs to be put in place, especially if customizing the appearance of a posted comment. 
  </div> 
  <note> 
   <p>Only one comment system per site page is allowed.</p> 
   <p>Many Communities features already include a comment system whose resourceType can be modified to reference the extended comment system.</p> 
  </note> 
  <h3>Create the Comments Component</h3> 
  <p>These directions specify a <strong>Group </strong>value other than <i>.hidden</i> so the component may be made available from the component browser (sidekick).</p> 
  <p>The deletion of the auto-created JSP file is because the default HBS file will be used instead.</p> 
  <ol> 
   <li>Browse to <strong>CRXDE|Lite</strong> (<a href="http://localhost:4502/crx/de/index.jsp">http://localhost:4502/crx/de/index.jsp</a>)</li> 
   <li>create a location for custom applications : 
    <ul> 
     <li>select the <strong>/apps</strong> node 
      <ul> 
       <li><strong>Create Folder</strong> named <strong>custom</strong></li> 
      </ul> </li> 
     <li>select the <strong>/apps/custom</strong> node 
      <ul> 
       <li><strong>Create Folder</strong> named <strong>components</strong></li> 
      </ul> </li> 
    </ul> </li> 
   <li>select the <strong>/apps/custom/components</strong> node 
    <ul> 
     <li><strong>Create &amp;gt; Component...</strong> 
      <ul> 
       <li><strong>Label</strong> : <i>comments</i></li> 
       <li><strong>Title</strong> : <i>Alt Comments</i></li> 
       <li><strong>Description</strong> : <i>Alternative comments style</i></li> 
       <li><strong>Super Type</strong> : <i>social/commons/components/hbs/comments</i></li> 
       <li><strong>Group</strong> : <i>Custom</i></li> 
      </ul> </li> 
     <li>Select <strong>Next</strong></li> 
     <li>Select <strong>Next</strong></li> 
     <li>Select <strong>Next</strong></li> 
     <li>Select <strong>OK</strong></li> 
    </ul> </li> 
   <li>Expand the node just created : <strong>/apps/custom/components/comments</strong></li> 
   <li>Select <strong>Save All</strong></li> 
   <li>Right-click <strong>comments.jsp</strong></li> 
   <li>Select <strong>Delete</strong></li> 
   <li>Select <strong>Save All</strong></li> 
  </ol> 
  <img imageRotate="0" src="assets/chlimage_1-73.png" /> 
  <h3>Create the Child Comment Component</h3> 
  <p>These directions set <strong>Group</strong> to <i>.hidden</i> as only the parent component should be included within a page.</p> 
  <p>The deletion of the auto-created JSP file is because the default HBS file will be used instead.</p> 
  <ol> 
   <li>Navigate to the <strong>/apps/custom/components/comments</strong> node</li> 
   <li>Right-click the node 
    <ul> 
     <li>Select <strong>Create &amp;gt; Component...</strong> 
      <ul> 
       <li><strong>Label</strong> : <i>comment</i></li> 
       <li><strong>Title</strong> : <i>Alt Comment</i></li> 
       <li><strong>Description</strong> : <i>Alternative comment style</i></li> 
       <li><strong>Super Type</strong> : <i>social/commons/components/hbs/comments/comment</i></li> 
       <li><strong>Group</strong> : <i>.hidden</i></li> 
      </ul> </li> 
     <li>Select <strong>Next</strong></li> 
     <li>Select <strong>Next</strong></li> 
     <li>Select <strong>Next</strong></li> 
     <li>Select <strong>OK</strong></li> 
    </ul> </li> 
   <li>Expand the node just created : <strong>/apps/custom/components/comments/comment</strong></li> 
   <li>Select <strong>Save All</strong></li> 
   <li>Right-click <strong>comment.jsp</strong></li> 
   <li>Select <strong>Delete</strong></li> 
   <li>Select <strong>Save All</strong></li> 
  </ol> 
  <img imageRotate="0" src="assets/chlimage_1-74.png" /> 
  <img imageRotate="0" src="assets/chlimage_1-75.png" /> 
  <h3>Copy and Modify the Default HBS Scripts</h3> 
  <p>Using <a href="../../sites/developing/using/developing-with-crxde-lite.md">CRXDE Lite</a> :</p> 
  <ul> 
   <li>copy <strong>comments.hbs</strong> 
    <ul> 
     <li>from <a href="http://localhost:4502/crx/de/index.jsp#/libs/social/commons/components/hbs/comments">/libs/social/commons/components/hbs/comments</a></li> 
     <li>to <a href="http://localhost:4502/crx/de/index.jsp#/apps/custom/components/comments">/apps/custom/components/comments</a></li> 
    </ul> </li> 
   <li>edit <strong>comments.hbs</strong> to : 
    <ul> 
     <li>change the value of the <span class="code">data-scf-component</span> attribute (~line 20) : 
      <ul> 
       <li>from <span class="code">social/commons/components/hbs/comments</span></li> 
       <li>to <span class="code">/apps/custom/components/comments</span></li> 
      </ul> </li> 
     <li>modify to include the custom comment component (~line 75) : 
      <ul> 
       <li>replace <span><span class="code">{{include this resourceType='social/commons/components/hbs/comments/comment'}}</span></span></li> 
       <li>with <span><span class="code">{{include this resourceType='/apps/custom/components/comments/comment'}}</span></span></li> 
      </ul> </li> 
    </ul> </li> 
  </ul> 
  <ul> 
   <li>copy <strong>comment.hbs</strong> 
    <ul> 
     <li>from <a href="http://localhost:4502/crx/de/index.jsp#/libs/social/commons/components/hbs/comments/comment">/libs/social/commons/components/hbs/comments/comment</a></li> 
     <li>to <a href="http://localhost:4502/crx/de/index.jsp#/apps/custom/components/comments/comment">/apps/custom/components/comments/comment</a></li> 
    </ul> </li> 
   <li>edit <strong>comment.hbs</strong> to : 
    <ul> 
     <li>change the value of the data-scf-component attribute (~ line 19) 
      <ul> 
       <li>from <span class="code">social/commons/components/hbs/comments/comment</span></li> 
       <li>to /apps/<span class="code">custom/components/comments/comment</span></li> 
      </ul> </li> 
    </ul> </li> 
  </ul> 
  <ul> 
   <li>select<span class="code"> /apps/custom</span> node</li> 
   <li>select <strong>Save All</strong></li> 
  </ul> 
  <h3>Create a Client Library Folder</h3> 
  <p>To avoid having to explicitly include this client library, the categories value for the default comment system's clientlib could be used (<span class="code">cq.social.author.hbs.comments</span>), but then this clientlib would be included for all instances of the default component as well.</p> 
  <p>Using <a href="../../sites/developing/using/developing-with-crxde-lite.md">CRXDE Lite</a> :</p> 
  <ul> 
   <li>select <span class="code">/apps/custom/components/comments</span> node</li> 
   <li>select <strong>Create Node</strong> 
    <ul> 
     <li><strong>Name</strong>: <span class="code">clientlibs</span></li> 
     <li><strong>Type </strong>: <span class="code">cq:ClientLibraryFolder</span></li> 
     <li>add to <strong>Properties </strong>tab : 
      <ul> 
       <li><strong>Name</strong> <span class="code">categories</span> <strong>Type</strong> <span class="code">String</span> <strong>Value</strong> <span class="code">cq.social.author.hbs.comments</span> <span class="code">Multi</span></li> 
       <li><strong>Name</strong> <span class="code">dependencies</span> <strong>Type</strong> <span class="code">String</span> <strong>Value</strong> <span class="code">cq.social.scf</span> <span class="code">Multi</span></li> 
      </ul> </li> 
    </ul> </li> 
   <li>select <strong>Save All</strong></li> 
   <li>with <span class="code">/apps/custom/components/comments/clientlib</span>s node selected, create 3 files : 
    <ul> 
     <li><strong>Name</strong>: <span class="code">css.txt</span></li> 
     <li><strong>Name</strong>: <span class="code">js.tx</span>t</li> 
     <li><strong>Name</strong>: customcommentsystem.js</li> 
    </ul> </li> 
   <li>enter 'customcommentsystem.js' as the content of <span class="code">js.txt</span></li> 
   <li>select <strong>Save All</strong></li> 
  </ul> 
  <img imageRotate="0" src="assets/chlimage_1-76.png" /> 
  <h3>Register the SCF Model &amp; View</h3> 
  <p>When extending (overriding) an SCF component, the resourceType is different (overlaying makes use of the relative search mechanism that searches through <span class="code">/apps</span> before <span class="code">/libs</span> so that the resourceType remains the same). This is why it is necessary to write JavaScript (in the client library) to register the SCF JS model and view for the custom resourceType. </p> 
  <p>Enter the following text as the content of <span class="code">customcommentsystem.js</span> :</p> 
  <h4>customcommentsystem.js</h4> 
  <codeblock gutter="true" class="syntax xml">
    (function($CQ,&amp;nbsp;_,&amp;nbsp;Backbone,&amp;nbsp;SCF)&amp;nbsp;{!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;"use&amp;nbsp;strict";!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;CustomComment&amp;nbsp;=&amp;nbsp;SCF.Components["social/commons/components/hbs/comments/comment"].Model;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;CustomCommentView&amp;nbsp;=&amp;nbsp;SCF.Components["social/commons/components/hbs/comments/comment"].View;!!discoiqbr!!!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;CustomCommentSystem&amp;nbsp;=&amp;nbsp;SCF.Components["social/commons/components/hbs/comments"].Model;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;var&amp;nbsp;CustomCommentSystemView&amp;nbsp;=&amp;nbsp;SCF.Components["social/commons/components/hbs/comments"].View;!!discoiqbr!!&amp;nbsp;!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SCF.registerComponent('/apps/custom/components/comments/comment',&amp;nbsp;CustomComment,&amp;nbsp;CustomCommentView);!!discoiqbr!!&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SCF.registerComponent('/apps/custom/components/comments',&amp;nbsp;CustomCommentSystem,&amp;nbsp;CustomCommentSystemView);!!discoiqbr!!!!discoiqbr!!})($CQ,&amp;nbsp;_,&amp;nbsp;Backbone,&amp;nbsp;SCF); 
  </codeblock> 
  <ul> 
   <li>select <strong>Save All</strong></li> 
  </ul> 
  <h3>Publish the App</h3> 
  <p>In order to experience the extended component in the publish environment, it is necessary to replicate the custom component.</p> 
  <p>One way to do so is </p> 
  <ul> 
   <li>from global navigation 
    <ul> 
     <li>select <strong>Tools &amp;gt; Deployment &amp;gt; Replication</strong></li> 
     <li>select <span class="code"><u>Activate Tree</u></span></li> 
     <li>set <span class="code">Start Path</span>: to <span class="code">/apps/custom</span></li> 
     <li>uncheck <span class="code">Only Modified</span></li> 
     <li>select <span class="code">Activate </span>button</li> 
    </ul> </li> 
  </ul> 
  <table cellpadding="4" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <td> </td> 
     <td style="text-align: right;"><strong><a href="../../communities/using/extend-sample-page.md">Add Comment to Sample Page ⇒</a></strong></td> 
    </tr> 
   </tbody> 
  </table> 
 </body> 
</html>